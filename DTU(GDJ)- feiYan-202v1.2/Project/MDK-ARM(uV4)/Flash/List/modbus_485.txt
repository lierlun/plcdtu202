; generated by ARM C/C++ Compiler, 5.03 [Build 24]
; commandline ArmCC [--list --split_sections --debug -c --asm --interleave -o.\Flash\Obj\modbus_485.o --asm_dir=.\Flash\List\ --list_dir=.\Flash\List\ --depend=.\Flash\Obj\modbus_485.d --cpu=Cortex-M3 --apcs=interwork -O0 --diag_suppress=870 -I..\..\Libraries\CMSIS\Device\ST\STM32F10x\Include -I..\..\Libraries\STM32F10x_StdPeriph_Driver\inc -I..\..\User\bsp -I..\..\User\bsp\inc -I..\..\User -I..\..\Libraries\CMSIS\Include -I..\..\uCOS-III\uC-CPU -I..\..\uCOS-III\uC-CPU\ARM-Cortex-M3\RealView -I..\..\uCOS-III\uC-LIB -I..\..\uCOS-III\uC-LIB\Ports\ARM-Cortex-M3\RealView -I..\..\uCOS-III\uCOS-III\Source -I..\..\uCOS-III\uCOS-III\Ports\ARM-Cortex-M3\RealView -I..\..\Malloc -I..\..\User\Modbus -Id:\Keil_v4\ARM\RV31\INC -Id:\Keil_v4\ARM\CMSIS\Include -Id:\Keil_v4\ARM\Inc\ST\STM32F10x -D__MICROLIB -DUSE_STDPERIPH_DRIVER -DSTM32F10X_HD --omf_browse=.\Flash\Obj\modbus_485.crf ..\..\User\Modbus\modbus_485.c]
                          THUMB

                          AREA ||i.ModbusTask||, CODE, READONLY, ALIGN=2

                  ModbusTask PROC
;;;193    ***************************************************************/
;;;194    void ModbusTask(void)
000000  b538              PUSH     {r3-r5,lr}
;;;195    {
;;;196    	uint32_t addr = 0;
000002  2000              MOVS     r0,#0
000004  9000              STR      r0,[sp,#0]
;;;197    	uint8_t  i = 0;
000006  2400              MOVS     r4,#0
;;;198    	static uint32_t start_time = 0;
;;;199    	       uint8_t  sign = 0;
000008  2500              MOVS     r5,#0
;;;200    
;;;201    	UART485_Master(&addr);
00000a  4668              MOV      r0,sp
00000c  f7fffffe          BL       UART485_Master
;;;202    	for(i=0;i<=19;i++)
000010  bf00              NOP      
000012  e006              B        |L1.34|
                  |L1.20|
;;;203    	{
;;;204    		g_PduUART485[0].RegHold[i] =  GPRS_Para.sICCID[i];
000014  4819              LDR      r0,|L1.124|
000016  5d01              LDRB     r1,[r0,r4]
000018  4819              LDR      r0,|L1.128|
00001a  f8201014          STRH     r1,[r0,r4,LSL #1]
00001e  1c60              ADDS     r0,r4,#1              ;202
000020  b2c4              UXTB     r4,r0                 ;202
                  |L1.34|
000022  2c13              CMP      r4,#0x13              ;202
000024  ddf6              BLE      |L1.20|
;;;205    		
;;;206     	}
;;;207    	
;;;208    	g_PduUART485[0].RegHold[20] = 1;
000026  2101              MOVS     r1,#1
000028  4815              LDR      r0,|L1.128|
00002a  380c              SUBS     r0,r0,#0xc
00002c  8681              STRH     r1,[r0,#0x34]
;;;209    	g_PduUART485[0].RegHold[21] = (GPRS_Para.Air208RunSta == 2)? 1: 0;
00002e  4813              LDR      r0,|L1.124|
000030  3829              SUBS     r0,r0,#0x29
000032  7dc0              LDRB     r0,[r0,#0x17]  ; GPRS_Para
000034  2802              CMP      r0,#2
000036  d100              BNE      |L1.58|
000038  e000              B        |L1.60|
                  |L1.58|
00003a  2100              MOVS     r1,#0
                  |L1.60|
00003c  4810              LDR      r0,|L1.128|
00003e  380c              SUBS     r0,r0,#0xc
000040  86c1              STRH     r1,[r0,#0x36]
;;;210    	
;;;211    	sign = timing(start_time,1000);
000042  f44f717a          MOV      r1,#0x3e8
000046  480f              LDR      r0,|L1.132|
000048  6800              LDR      r0,[r0,#0]  ; start_time
00004a  f7fffffe          BL       timing
00004e  4605              MOV      r5,r0
;;;212    	if(sign)
000050  b19d              CBZ      r5,|L1.122|
;;;213    	{
;;;214    		start_time = bsp_GetRunTime();
000052  f7fffffe          BL       bsp_GetRunTime
000056  490b              LDR      r1,|L1.132|
000058  6008              STR      r0,[r1,#0]  ; start_time
;;;215    		g_PduUART485[0].RegHold[22]++;
00005a  4809              LDR      r0,|L1.128|
00005c  380c              SUBS     r0,r0,#0xc
00005e  8f00              LDRH     r0,[r0,#0x38]
000060  1c40              ADDS     r0,r0,#1
000062  b281              UXTH     r1,r0
000064  4806              LDR      r0,|L1.128|
000066  380c              SUBS     r0,r0,#0xc
000068  8701              STRH     r1,[r0,#0x38]
;;;216    		if(g_PduUART485[0].RegHold[22] >= 1000)
00006a  8f00              LDRH     r0,[r0,#0x38]
00006c  f5b07f7a          CMP      r0,#0x3e8
000070  db03              BLT      |L1.122|
;;;217    		{
;;;218    			g_PduUART485[0].RegHold[22] = 0;
000072  2100              MOVS     r1,#0
000074  4802              LDR      r0,|L1.128|
000076  380c              SUBS     r0,r0,#0xc
000078  8701              STRH     r1,[r0,#0x38]
                  |L1.122|
;;;219    		}
;;;220    
;;;221    	}
;;;222    // 	g_PduUART485[0].RegHold[22]++;
;;;223    // 	if(g_PduUART485[0].RegHold[22] >= 1000)
;;;224    // 	{
;;;225    // 		g_PduUART485[0].RegHold[22] = 0;
;;;226    // 	}
;;;227    }
00007a  bd38              POP      {r3-r5,pc}
;;;228    
                          ENDP

                  |L1.124|
                          DCD      GPRS_Para+0x29
                  |L1.128|
                          DCD      g_PduUART485+0xc
                  |L1.132|
                          DCD      |symbol_number.42|

                          AREA ||i.Para_Change_Check||, CODE, READONLY, ALIGN=2

                  Para_Change_Check PROC
;;;22     ***************************************************************/
;;;23     void Para_Change_Check(void)
000000  b510              PUSH     {r4,lr}
;;;24     {
;;;25     	static uint32_t start_time = 0;
;;;26     	static uint16_t interval = 3000;
;;;27     				 uint8_t  sign = 0;
000002  2400              MOVS     r4,#0
;;;28     	sign = timing(start_time, interval);
000004  48c8              LDR      r0,|L2.808|
000006  8801              LDRH     r1,[r0,#0]  ; interval
000008  48c8              LDR      r0,|L2.812|
00000a  6800              LDR      r0,[r0,#0]  ; start_time
00000c  f7fffffe          BL       timing
000010  4604              MOV      r4,r0
;;;29     	if(sign)
000012  2c00              CMP      r4,#0
000014  d05d              BEQ      |L2.210|
;;;30     	{
;;;31     		start_time = bsp_GetRunTime();
000016  f7fffffe          BL       bsp_GetRunTime
00001a  49c4              LDR      r1,|L2.812|
00001c  6008              STR      r0,[r1,#0]  ; start_time
;;;32     		if(	g_PduUART485[0].RegHold[69] != g_PduUART485_bak[0].RegHold[69] || //IA
00001e  48c4              LDR      r0,|L2.816|
000020  f8b01096          LDRH     r1,[r0,#0x96]
000024  48c3              LDR      r0,|L2.820|
000026  f8b00096          LDRH     r0,[r0,#0x96]
00002a  4281              CMP      r1,r0
00002c  d127              BNE      |L2.126|
;;;33     				g_PduUART485[0].RegHold[70] != g_PduUART485_bak[0].RegHold[70] || //
00002e  48c0              LDR      r0,|L2.816|
000030  f8b01098          LDRH     r1,[r0,#0x98]
000034  48bf              LDR      r0,|L2.820|
000036  f8b00098          LDRH     r0,[r0,#0x98]
00003a  4281              CMP      r1,r0
00003c  d11f              BNE      |L2.126|
;;;34     				g_PduUART485[0].RegHold[71] != g_PduUART485_bak[0].RegHold[71] || //IB
00003e  48bc              LDR      r0,|L2.816|
000040  f8b0109a          LDRH     r1,[r0,#0x9a]
000044  48bb              LDR      r0,|L2.820|
000046  f8b0009a          LDRH     r0,[r0,#0x9a]
00004a  4281              CMP      r1,r0
00004c  d117              BNE      |L2.126|
;;;35     				g_PduUART485[0].RegHold[72] != g_PduUART485_bak[0].RegHold[72] || //
00004e  48b8              LDR      r0,|L2.816|
000050  f8b0109c          LDRH     r1,[r0,#0x9c]
000054  48b7              LDR      r0,|L2.820|
000056  f8b0009c          LDRH     r0,[r0,#0x9c]
00005a  4281              CMP      r1,r0
00005c  d10f              BNE      |L2.126|
;;;36     				g_PduUART485[0].RegHold[73] != g_PduUART485_bak[0].RegHold[73] || //IC
00005e  48b4              LDR      r0,|L2.816|
000060  f8b0109e          LDRH     r1,[r0,#0x9e]
000064  48b3              LDR      r0,|L2.820|
000066  f8b0009e          LDRH     r0,[r0,#0x9e]
00006a  4281              CMP      r1,r0
00006c  d107              BNE      |L2.126|
;;;37     				g_PduUART485[0].RegHold[74] != g_PduUART485_bak[0].RegHold[74])  
00006e  48b0              LDR      r0,|L2.816|
000070  f8b010a0          LDRH     r1,[r0,#0xa0]
000074  48af              LDR      r0,|L2.820|
000076  f8b000a0          LDRH     r0,[r0,#0xa0]
00007a  4281              CMP      r1,r0
00007c  d02a              BEQ      |L2.212|
                  |L2.126|
;;;38     		{
;;;39     				g_PduUART485_bak[0].RegHold[69] = g_PduUART485[0].RegHold[69];
00007e  48ac              LDR      r0,|L2.816|
000080  f8b01096          LDRH     r1,[r0,#0x96]
000084  48ab              LDR      r0,|L2.820|
000086  f8a01096          STRH     r1,[r0,#0x96]
;;;40     				g_PduUART485_bak[0].RegHold[70] = g_PduUART485[0].RegHold[70];
00008a  48a9              LDR      r0,|L2.816|
00008c  f8b01098          LDRH     r1,[r0,#0x98]
000090  48a8              LDR      r0,|L2.820|
000092  f8a01098          STRH     r1,[r0,#0x98]
;;;41     				g_PduUART485_bak[0].RegHold[71] = g_PduUART485[0].RegHold[71];
000096  48a6              LDR      r0,|L2.816|
000098  f8b0109a          LDRH     r1,[r0,#0x9a]
00009c  48a5              LDR      r0,|L2.820|
00009e  f8a0109a          STRH     r1,[r0,#0x9a]
;;;42     				g_PduUART485_bak[0].RegHold[72] = g_PduUART485[0].RegHold[72];
0000a2  48a3              LDR      r0,|L2.816|
0000a4  f8b0109c          LDRH     r1,[r0,#0x9c]
0000a8  48a2              LDR      r0,|L2.820|
0000aa  f8a0109c          STRH     r1,[r0,#0x9c]
;;;43     				g_PduUART485_bak[0].RegHold[73] = g_PduUART485[0].RegHold[73];
0000ae  48a0              LDR      r0,|L2.816|
0000b0  f8b0109e          LDRH     r1,[r0,#0x9e]
0000b4  489f              LDR      r0,|L2.820|
0000b6  f8a0109e          STRH     r1,[r0,#0x9e]
;;;44     				g_PduUART485_bak[0].RegHold[74] = g_PduUART485[0].RegHold[74];
0000ba  489d              LDR      r0,|L2.816|
0000bc  f8b010a0          LDRH     r1,[r0,#0xa0]
0000c0  489c              LDR      r0,|L2.820|
0000c2  f8a010a0          STRH     r1,[r0,#0xa0]
;;;45     				
;;;46     
;;;47     				GPRS_Para.ParamChangeFlag |= BIT(0);		
0000c6  489c              LDR      r0,|L2.824|
0000c8  6c80              LDR      r0,[r0,#0x48]  ; GPRS_Para
0000ca  f0400001          ORR      r0,r0,#1
0000ce  499a              LDR      r1,|L2.824|
0000d0  6488              STR      r0,[r1,#0x48]  ; GPRS_Para
                  |L2.210|
0000d2  e127              B        |L2.804|
                  |L2.212|
;;;48     				
;;;49     		}
;;;50     		else if(g_PduUART485[1].RegHold[69] != g_PduUART485_bak[1].RegHold[69] || 
0000d4  4896              LDR      r0,|L2.816|
0000d6  f8b01232          LDRH     r1,[r0,#0x232]
0000da  4896              LDR      r0,|L2.820|
0000dc  f8b00232          LDRH     r0,[r0,#0x232]
0000e0  4281              CMP      r1,r0
0000e2  d12f              BNE      |L2.324|
;;;51     				g_PduUART485[1].RegHold[70] != g_PduUART485_bak[1].RegHold[70] || 
0000e4  4892              LDR      r0,|L2.816|
0000e6  f8b01234          LDRH     r1,[r0,#0x234]
0000ea  4892              LDR      r0,|L2.820|
0000ec  f8b00234          LDRH     r0,[r0,#0x234]
0000f0  4281              CMP      r1,r0
0000f2  d127              BNE      |L2.324|
;;;52     				g_PduUART485[1].RegHold[71] != g_PduUART485_bak[1].RegHold[71] || 
0000f4  488e              LDR      r0,|L2.816|
0000f6  f8b01236          LDRH     r1,[r0,#0x236]
0000fa  488e              LDR      r0,|L2.820|
0000fc  f8b00236          LDRH     r0,[r0,#0x236]
000100  4281              CMP      r1,r0
000102  d11f              BNE      |L2.324|
;;;53     				g_PduUART485[1].RegHold[72] != g_PduUART485_bak[1].RegHold[72] || 
000104  488a              LDR      r0,|L2.816|
000106  f8b01238          LDRH     r1,[r0,#0x238]
00010a  488a              LDR      r0,|L2.820|
00010c  f8b00238          LDRH     r0,[r0,#0x238]
000110  4281              CMP      r1,r0
000112  d117              BNE      |L2.324|
;;;54     				g_PduUART485[1].RegHold[73] != g_PduUART485_bak[1].RegHold[73] || 
000114  4886              LDR      r0,|L2.816|
000116  f8b0123a          LDRH     r1,[r0,#0x23a]
00011a  4886              LDR      r0,|L2.820|
00011c  f8b0023a          LDRH     r0,[r0,#0x23a]
000120  4281              CMP      r1,r0
000122  d10f              BNE      |L2.324|
;;;55     				g_PduUART485[1].RegHold[74] != g_PduUART485_bak[1].RegHold[74] || 
000124  4882              LDR      r0,|L2.816|
000126  f8b0123c          LDRH     r1,[r0,#0x23c]
00012a  4882              LDR      r0,|L2.820|
00012c  f8b0023c          LDRH     r0,[r0,#0x23c]
000130  4281              CMP      r1,r0
000132  d107              BNE      |L2.324|
;;;56     				g_PduUART485[1].RegHold[75] != g_PduUART485_bak[1].RegHold[75])   
000134  487e              LDR      r0,|L2.816|
000136  f8b0123e          LDRH     r1,[r0,#0x23e]
00013a  487e              LDR      r0,|L2.820|
00013c  f8b0023e          LDRH     r0,[r0,#0x23e]
000140  4281              CMP      r1,r0
000142  d02a              BEQ      |L2.410|
                  |L2.324|
;;;57     		{
;;;58     				g_PduUART485_bak[1].RegHold[69] = g_PduUART485[1].RegHold[69];
000144  487a              LDR      r0,|L2.816|
000146  f8b01232          LDRH     r1,[r0,#0x232]
00014a  487a              LDR      r0,|L2.820|
00014c  f8a01232          STRH     r1,[r0,#0x232]
;;;59     				g_PduUART485_bak[1].RegHold[70] = g_PduUART485[1].RegHold[70];
000150  4877              LDR      r0,|L2.816|
000152  f8b01234          LDRH     r1,[r0,#0x234]
000156  4877              LDR      r0,|L2.820|
000158  f8a01234          STRH     r1,[r0,#0x234]
;;;60     				g_PduUART485_bak[1].RegHold[71] = g_PduUART485[1].RegHold[71];
00015c  4874              LDR      r0,|L2.816|
00015e  f8b01236          LDRH     r1,[r0,#0x236]
000162  4874              LDR      r0,|L2.820|
000164  f8a01236          STRH     r1,[r0,#0x236]
;;;61     				g_PduUART485_bak[1].RegHold[72] = g_PduUART485[1].RegHold[72];
000168  4871              LDR      r0,|L2.816|
00016a  f8b01238          LDRH     r1,[r0,#0x238]
00016e  4871              LDR      r0,|L2.820|
000170  f8a01238          STRH     r1,[r0,#0x238]
;;;62     				g_PduUART485_bak[1].RegHold[73] = g_PduUART485[1].RegHold[73];
000174  486e              LDR      r0,|L2.816|
000176  f8b0123a          LDRH     r1,[r0,#0x23a]
00017a  486e              LDR      r0,|L2.820|
00017c  f8a0123a          STRH     r1,[r0,#0x23a]
;;;63     				g_PduUART485_bak[1].RegHold[74] = g_PduUART485[1].RegHold[74];
000180  486b              LDR      r0,|L2.816|
000182  f8b0123c          LDRH     r1,[r0,#0x23c]
000186  486b              LDR      r0,|L2.820|
000188  f8a0123c          STRH     r1,[r0,#0x23c]
;;;64     				
;;;65     				GPRS_Para.ParamChangeFlag |= BIT(1);			
00018c  486a              LDR      r0,|L2.824|
00018e  6c80              LDR      r0,[r0,#0x48]  ; GPRS_Para
000190  f0400002          ORR      r0,r0,#2
000194  4968              LDR      r1,|L2.824|
000196  6488              STR      r0,[r1,#0x48]  ; GPRS_Para
000198  e0c4              B        |L2.804|
                  |L2.410|
;;;66     		}
;;;67     		else if(g_PduUART485[2].RegHold[69] != g_PduUART485_bak[2].RegHold[69] || 
00019a  4865              LDR      r0,|L2.816|
00019c  f8b013ce          LDRH     r1,[r0,#0x3ce]
0001a0  4864              LDR      r0,|L2.820|
0001a2  f8b003ce          LDRH     r0,[r0,#0x3ce]
0001a6  4281              CMP      r1,r0
0001a8  d12f              BNE      |L2.522|
;;;68     				g_PduUART485[2].RegHold[70] != g_PduUART485_bak[2].RegHold[70] || 
0001aa  4861              LDR      r0,|L2.816|
0001ac  f8b013d0          LDRH     r1,[r0,#0x3d0]
0001b0  4860              LDR      r0,|L2.820|
0001b2  f8b003d0          LDRH     r0,[r0,#0x3d0]
0001b6  4281              CMP      r1,r0
0001b8  d127              BNE      |L2.522|
;;;69     				g_PduUART485[2].RegHold[71] != g_PduUART485_bak[2].RegHold[71] || 
0001ba  485d              LDR      r0,|L2.816|
0001bc  f8b013d2          LDRH     r1,[r0,#0x3d2]
0001c0  485c              LDR      r0,|L2.820|
0001c2  f8b003d2          LDRH     r0,[r0,#0x3d2]
0001c6  4281              CMP      r1,r0
0001c8  d11f              BNE      |L2.522|
;;;70     				g_PduUART485[2].RegHold[72] != g_PduUART485_bak[2].RegHold[72] || 
0001ca  4859              LDR      r0,|L2.816|
0001cc  f8b013d4          LDRH     r1,[r0,#0x3d4]
0001d0  4858              LDR      r0,|L2.820|
0001d2  f8b003d4          LDRH     r0,[r0,#0x3d4]
0001d6  4281              CMP      r1,r0
0001d8  d117              BNE      |L2.522|
;;;71     				g_PduUART485[2].RegHold[73] != g_PduUART485_bak[2].RegHold[73] || 
0001da  4855              LDR      r0,|L2.816|
0001dc  f8b013d6          LDRH     r1,[r0,#0x3d6]
0001e0  4854              LDR      r0,|L2.820|
0001e2  f8b003d6          LDRH     r0,[r0,#0x3d6]
0001e6  4281              CMP      r1,r0
0001e8  d10f              BNE      |L2.522|
;;;72     				g_PduUART485[2].RegHold[74] != g_PduUART485_bak[2].RegHold[74] || 
0001ea  4851              LDR      r0,|L2.816|
0001ec  f8b013d8          LDRH     r1,[r0,#0x3d8]
0001f0  4850              LDR      r0,|L2.820|
0001f2  f8b003d8          LDRH     r0,[r0,#0x3d8]
0001f6  4281              CMP      r1,r0
0001f8  d107              BNE      |L2.522|
;;;73     				g_PduUART485[2].RegHold[75] != g_PduUART485_bak[2].RegHold[75])   
0001fa  484d              LDR      r0,|L2.816|
0001fc  f8b013da          LDRH     r1,[r0,#0x3da]
000200  484c              LDR      r0,|L2.820|
000202  f8b003da          LDRH     r0,[r0,#0x3da]
000206  4281              CMP      r1,r0
000208  d02a              BEQ      |L2.608|
                  |L2.522|
;;;74     		{
;;;75     				g_PduUART485_bak[2].RegHold[69] = g_PduUART485[2].RegHold[69];
00020a  4849              LDR      r0,|L2.816|
00020c  f8b013ce          LDRH     r1,[r0,#0x3ce]
000210  4848              LDR      r0,|L2.820|
000212  f8a013ce          STRH     r1,[r0,#0x3ce]
;;;76     				g_PduUART485_bak[2].RegHold[70] = g_PduUART485[2].RegHold[70];
000216  4846              LDR      r0,|L2.816|
000218  f8b013d0          LDRH     r1,[r0,#0x3d0]
00021c  4845              LDR      r0,|L2.820|
00021e  f8a013d0          STRH     r1,[r0,#0x3d0]
;;;77     				g_PduUART485_bak[2].RegHold[71] = g_PduUART485[2].RegHold[71];
000222  4843              LDR      r0,|L2.816|
000224  f8b013d2          LDRH     r1,[r0,#0x3d2]
000228  4842              LDR      r0,|L2.820|
00022a  f8a013d2          STRH     r1,[r0,#0x3d2]
;;;78     				g_PduUART485_bak[2].RegHold[72] = g_PduUART485[2].RegHold[72];
00022e  4840              LDR      r0,|L2.816|
000230  f8b013d4          LDRH     r1,[r0,#0x3d4]
000234  483f              LDR      r0,|L2.820|
000236  f8a013d4          STRH     r1,[r0,#0x3d4]
;;;79     				g_PduUART485_bak[2].RegHold[73] = g_PduUART485[2].RegHold[73];
00023a  483d              LDR      r0,|L2.816|
00023c  f8b013d6          LDRH     r1,[r0,#0x3d6]
000240  483c              LDR      r0,|L2.820|
000242  f8a013d6          STRH     r1,[r0,#0x3d6]
;;;80     				g_PduUART485_bak[2].RegHold[74] = g_PduUART485[2].RegHold[74];
000246  483a              LDR      r0,|L2.816|
000248  f8b013d8          LDRH     r1,[r0,#0x3d8]
00024c  4839              LDR      r0,|L2.820|
00024e  f8a013d8          STRH     r1,[r0,#0x3d8]
;;;81     				
;;;82     				GPRS_Para.ParamChangeFlag |= BIT(2);			
000252  4839              LDR      r0,|L2.824|
000254  6c80              LDR      r0,[r0,#0x48]  ; GPRS_Para
000256  f0400004          ORR      r0,r0,#4
00025a  4937              LDR      r1,|L2.824|
00025c  6488              STR      r0,[r1,#0x48]  ; GPRS_Para
00025e  e061              B        |L2.804|
                  |L2.608|
;;;83     		}
;;;84     		
;;;85     		else if(g_PduUART485[3].RegHold[69] != g_PduUART485_bak[3].RegHold[69] || 
000260  4833              LDR      r0,|L2.816|
000262  f8b0156a          LDRH     r1,[r0,#0x56a]
000266  4833              LDR      r0,|L2.820|
000268  f8b0056a          LDRH     r0,[r0,#0x56a]
00026c  4281              CMP      r1,r0
00026e  d12f              BNE      |L2.720|
;;;86     				g_PduUART485[3].RegHold[70] != g_PduUART485_bak[3].RegHold[70] || 
000270  482f              LDR      r0,|L2.816|
000272  f8b0156c          LDRH     r1,[r0,#0x56c]
000276  482f              LDR      r0,|L2.820|
000278  f8b0056c          LDRH     r0,[r0,#0x56c]
00027c  4281              CMP      r1,r0
00027e  d127              BNE      |L2.720|
;;;87     				g_PduUART485[3].RegHold[71] != g_PduUART485_bak[3].RegHold[71] || 
000280  482b              LDR      r0,|L2.816|
000282  f8b0156e          LDRH     r1,[r0,#0x56e]
000286  482b              LDR      r0,|L2.820|
000288  f8b0056e          LDRH     r0,[r0,#0x56e]
00028c  4281              CMP      r1,r0
00028e  d11f              BNE      |L2.720|
;;;88     				g_PduUART485[3].RegHold[72] != g_PduUART485_bak[3].RegHold[72] || 
000290  4827              LDR      r0,|L2.816|
000292  f8b01570          LDRH     r1,[r0,#0x570]
000296  4827              LDR      r0,|L2.820|
000298  f8b00570          LDRH     r0,[r0,#0x570]
00029c  4281              CMP      r1,r0
00029e  d117              BNE      |L2.720|
;;;89     				g_PduUART485[3].RegHold[73] != g_PduUART485_bak[3].RegHold[73] || 
0002a0  4823              LDR      r0,|L2.816|
0002a2  f8b01572          LDRH     r1,[r0,#0x572]
0002a6  4823              LDR      r0,|L2.820|
0002a8  f8b00572          LDRH     r0,[r0,#0x572]
0002ac  4281              CMP      r1,r0
0002ae  d10f              BNE      |L2.720|
;;;90     				g_PduUART485[3].RegHold[74] != g_PduUART485_bak[3].RegHold[74] || 
0002b0  481f              LDR      r0,|L2.816|
0002b2  f8b01574          LDRH     r1,[r0,#0x574]
0002b6  481f              LDR      r0,|L2.820|
0002b8  f8b00574          LDRH     r0,[r0,#0x574]
0002bc  4281              CMP      r1,r0
0002be  d107              BNE      |L2.720|
;;;91     				g_PduUART485[3].RegHold[75] != g_PduUART485_bak[3].RegHold[75])   
0002c0  481b              LDR      r0,|L2.816|
0002c2  f8b01576          LDRH     r1,[r0,#0x576]
0002c6  481b              LDR      r0,|L2.820|
0002c8  f8b00576          LDRH     r0,[r0,#0x576]
0002cc  4281              CMP      r1,r0
0002ce  d029              BEQ      |L2.804|
                  |L2.720|
;;;92     		{
;;;93     				g_PduUART485_bak[3].RegHold[69] = g_PduUART485[3].RegHold[69];
0002d0  4817              LDR      r0,|L2.816|
0002d2  f8b0156a          LDRH     r1,[r0,#0x56a]
0002d6  4817              LDR      r0,|L2.820|
0002d8  f8a0156a          STRH     r1,[r0,#0x56a]
;;;94     				g_PduUART485_bak[3].RegHold[70] = g_PduUART485[3].RegHold[70];
0002dc  4814              LDR      r0,|L2.816|
0002de  f8b0156c          LDRH     r1,[r0,#0x56c]
0002e2  4814              LDR      r0,|L2.820|
0002e4  f8a0156c          STRH     r1,[r0,#0x56c]
;;;95     				g_PduUART485_bak[3].RegHold[71] = g_PduUART485[3].RegHold[71];
0002e8  4811              LDR      r0,|L2.816|
0002ea  f8b0156e          LDRH     r1,[r0,#0x56e]
0002ee  4811              LDR      r0,|L2.820|
0002f0  f8a0156e          STRH     r1,[r0,#0x56e]
;;;96     				g_PduUART485_bak[3].RegHold[72] = g_PduUART485[3].RegHold[72];
0002f4  480e              LDR      r0,|L2.816|
0002f6  f8b01570          LDRH     r1,[r0,#0x570]
0002fa  480e              LDR      r0,|L2.820|
0002fc  f8a01570          STRH     r1,[r0,#0x570]
;;;97     				g_PduUART485_bak[3].RegHold[73] = g_PduUART485[3].RegHold[73];
000300  480b              LDR      r0,|L2.816|
000302  f8b01572          LDRH     r1,[r0,#0x572]
000306  480b              LDR      r0,|L2.820|
000308  f8a01572          STRH     r1,[r0,#0x572]
;;;98     				g_PduUART485_bak[3].RegHold[74] = g_PduUART485[3].RegHold[74];
00030c  4808              LDR      r0,|L2.816|
00030e  f8b01574          LDRH     r1,[r0,#0x574]
000312  4808              LDR      r0,|L2.820|
000314  f8a01574          STRH     r1,[r0,#0x574]
;;;99     				
;;;100    				GPRS_Para.ParamChangeFlag |= BIT(3);			
000318  4807              LDR      r0,|L2.824|
00031a  6c80              LDR      r0,[r0,#0x48]  ; GPRS_Para
00031c  f0400008          ORR      r0,r0,#8
000320  4905              LDR      r1,|L2.824|
000322  6488              STR      r0,[r1,#0x48]  ; GPRS_Para
                  |L2.804|
;;;101    		}
;;;102    	}
;;;103    }
000324  bd10              POP      {r4,pc}
;;;104    
                          ENDP

000326  0000              DCW      0x0000
                  |L2.808|
                          DCD      interval
                  |L2.812|
                          DCD      start_time
                  |L2.816|
                          DCD      g_PduUART485
                  |L2.820|
                          DCD      g_PduUART485_bak
                  |L2.824|
                          DCD      GPRS_Para

                          AREA ||i.UART485_Init||, CODE, READONLY, ALIGN=2

                  UART485_Init PROC
;;;236    ***************************************************************/
;;;237    void UART485_Init(void)
000000  b510              PUSH     {r4,lr}
;;;238    {	
000002  b08c              SUB      sp,sp,#0x30
;;;239    	ElemType e;
;;;240    	uint8_t  i = 0;
000004  2400              MOVS     r4,#0
;;;241    	//初始化循环队列
;;;242      InitQueue(&g_M485Cmd);
000006  4839              LDR      r0,|L3.236|
000008  f7fffffe          BL       InitQueue
;;;243    	//初始化透传队列
;;;244    	T_InitQueue(&Trans_Queue);
00000c  4838              LDR      r0,|L3.240|
00000e  f7fffffe          BL       T_InitQueue
;;;245    	
;;;246    	g_MbMtCmd485.rep        = FALSE;                  //未应答
000012  2000              MOVS     r0,#0
000014  4937              LDR      r1,|L3.244|
000016  8008              STRH     r0,[r1,#0]
;;;247    	g_MbMtCmd485.PLCCOMFlag = TRUE;		                //通讯打开
000018  2001              MOVS     r0,#1
00001a  7088              STRB     r0,[r1,#2]
;;;248    
;;;249    		
;;;250    	for(i=1;i<=GPRS_Para.MaxSlaveCnt;i++)
00001c  2401              MOVS     r4,#1
00001e  e04f              B        |L3.192|
                  |L3.32|
;;;251    	{	
;;;252    		e.slave        = i;
000020  f8ad4014          STRH     r4,[sp,#0x14]
;;;253    		e.func         = MB_REGHOLD_RD;
000024  2003              MOVS     r0,#3
000026  f8ad0016          STRH     r0,[sp,#0x16]
;;;254    		e.addr         = 69;	 	                        //保持寄存器的首地址，显示缓冲区
00002a  2045              MOVS     r0,#0x45
00002c  f8ad0018          STRH     r0,[sp,#0x18]
;;;255    		e.cnt          = 6;                             //根据从机个数确定写入的寄存器个数
000030  2006              MOVS     r0,#6
000032  f8ad001a          STRH     r0,[sp,#0x1a]
;;;256    		e.startTimeout = bsp_GetRunTime();
000036  f7fffffe          BL       bsp_GetRunTime
00003a  9007              STR      r0,[sp,#0x1c]
;;;257    		e.timeout      = 1000;	                        //命令 超时时间
00003c  f44f707a          MOV      r0,#0x3e8
000040  9008              STR      r0,[sp,#0x20]
;;;258    		e.startPeriod  = bsp_GetRunTime();
000042  f7fffffe          BL       bsp_GetRunTime
000046  9009              STR      r0,[sp,#0x24]
;;;259    		e.period       = 5*1000;	                      //命令发送周期
000048  f2413088          MOV      r0,#0x1388
00004c  900a              STR      r0,[sp,#0x28]
;;;260    		e.commCnt      = PERIOD_CNT;                    //不可删除命令
00004e  f64f70ff          MOV      r0,#0xffff
000052  f8ad002c          STRH     r0,[sp,#0x2c]
;;;261    		e.timeoutcnt   = 0;		                          //错误计数清零
000056  2000              MOVS     r0,#0
000058  f8ad002e          STRH     r0,[sp,#0x2e]
;;;262    		EnQueue(&g_M485Cmd, e);		
00005c  a808              ADD      r0,sp,#0x20
00005e  c80f              LDM      r0,{r0-r3}
000060  e88d000f          STM      sp,{r0-r3}
000064  4821              LDR      r0,|L3.236|
000066  a905              ADD      r1,sp,#0x14
000068  c90e              LDM      r1,{r1-r3}
00006a  f7fffffe          BL       EnQueue
;;;263    
;;;264    		e.slave        = i;
00006e  f8ad4014          STRH     r4,[sp,#0x14]
;;;265    		e.func         = MB_REGHOLD_RD;
000072  2003              MOVS     r0,#3
000074  f8ad0016          STRH     r0,[sp,#0x16]
;;;266    		e.addr         = 57;	 	                        //保持寄存器的首地址，显示缓冲区
000078  2039              MOVS     r0,#0x39
00007a  f8ad0018          STRH     r0,[sp,#0x18]
;;;267    		e.cnt          = 6;                             //根据从机个数确定写入的寄存器个数
00007e  2006              MOVS     r0,#6
000080  f8ad001a          STRH     r0,[sp,#0x1a]
;;;268    		e.startTimeout = bsp_GetRunTime();
000084  f7fffffe          BL       bsp_GetRunTime
000088  9007              STR      r0,[sp,#0x1c]
;;;269    		e.timeout      = 1000;	                        //命令 超时时间
00008a  f44f707a          MOV      r0,#0x3e8
00008e  9008              STR      r0,[sp,#0x20]
;;;270    		e.startPeriod  = bsp_GetRunTime();
000090  f7fffffe          BL       bsp_GetRunTime
000094  9009              STR      r0,[sp,#0x24]
;;;271    		e.period       = 5*1000;	                      //命令发送周期
000096  f2413088          MOV      r0,#0x1388
00009a  900a              STR      r0,[sp,#0x28]
;;;272    		e.commCnt      = PERIOD_CNT;                    //不可删除命令
00009c  f64f70ff          MOV      r0,#0xffff
0000a0  f8ad002c          STRH     r0,[sp,#0x2c]
;;;273    		e.timeoutcnt   = 0;		                          //错误计数清零
0000a4  2000              MOVS     r0,#0
0000a6  f8ad002e          STRH     r0,[sp,#0x2e]
;;;274    		EnQueue(&g_M485Cmd, e);
0000aa  a808              ADD      r0,sp,#0x20
0000ac  c80f              LDM      r0,{r0-r3}
0000ae  e88d000f          STM      sp,{r0-r3}
0000b2  480e              LDR      r0,|L3.236|
0000b4  a905              ADD      r1,sp,#0x14
0000b6  c90e              LDM      r1,{r1-r3}
0000b8  f7fffffe          BL       EnQueue
0000bc  1c60              ADDS     r0,r4,#1              ;250
0000be  b2c4              UXTB     r4,r0                 ;250
                  |L3.192|
0000c0  480d              LDR      r0,|L3.248|
0000c2  7a00              LDRB     r0,[r0,#8]            ;250  ; GPRS_Para
0000c4  42a0              CMP      r0,r4                 ;250
0000c6  daab              BGE      |L3.32|
;;;275    		
;;;276    		
;;;277    		
;;;278    // 		e.slave        = i;
;;;279    // 		e.func         = MB_BITCOIL_RD;                 //读取线圈
;;;280    // 		e.addr         = 10;	 	                        //保持寄存器的首地址，显示缓冲区
;;;281    // 		e.cnt          = 10;                             //根据从机个数确定写入的寄存器个数
;;;282    // 		e.startTimeout = bsp_GetRunTime();
;;;283    // 		e.timeout      = 1000;	                        //命令 超时时间
;;;284    // 		e.startPeriod  = bsp_GetRunTime();
;;;285    // 		e.period       = 5*1000;	                      //命令发送周期
;;;286    // 		e.commCnt      = PERIOD_CNT;                    //不可删除命令
;;;287    // 		e.timeoutcnt   = 0;		                          //错误计数清零
;;;288    // 		EnQueue(&g_M485Cmd, e);	
;;;289    		
;;;290      }
;;;291    	
;;;292    	//清空PDU
;;;293    	for(i=0;i<UART485_SLAVE_CNT;i++)
0000c8  2400              MOVS     r4,#0
0000ca  e00a              B        |L3.226|
                  |L3.204|
;;;294    	{
;;;295    		memset((INT16U*)&g_PduUART485[i],0,sizeof(UART485_PDU));
0000cc  2167              MOVS     r1,#0x67
0000ce  4361              MULS     r1,r4,r1
0000d0  4a0a              LDR      r2,|L3.252|
0000d2  eb020081          ADD      r0,r2,r1,LSL #2
0000d6  f44f71ce          MOV      r1,#0x19c
0000da  f7fffffe          BL       __aeabi_memclr
0000de  1c60              ADDS     r0,r4,#1              ;293
0000e0  b2c4              UXTB     r4,r0                 ;293
                  |L3.226|
0000e2  2c04              CMP      r4,#4                 ;293
0000e4  dbf2              BLT      |L3.204|
;;;296      }
;;;297    }
0000e6  b00c              ADD      sp,sp,#0x30
0000e8  bd10              POP      {r4,pc}
;;;298    
                          ENDP

0000ea  0000              DCW      0x0000
                  |L3.236|
                          DCD      g_M485Cmd
                  |L3.240|
                          DCD      Trans_Queue
                  |L3.244|
                          DCD      g_MbMtCmd485
                  |L3.248|
                          DCD      GPRS_Para
                  |L3.252|
                          DCD      g_PduUART485

                          AREA ||i.UART485_Master||, CODE, READONLY, ALIGN=2

                  UART485_Master PROC
;;;304    ***************************************************************/
;;;305    uint8_t UART485_Master(uint32_t *addr)
000000  b5f0              PUSH     {r4-r7,lr}
;;;306    {	
000002  b08b              SUB      sp,sp,#0x2c
000004  4604              MOV      r4,r0
;;;307    	ElemType e;
;;;308    	uint8_t  sign = 0;
000006  2500              MOVS     r5,#0
;;;309    	uint16_t ret = 0;
000008  2600              MOVS     r6,#0
;;;310    	uint16_t i =0;
00000a  2700              MOVS     r7,#0
;;;311    	
;;;312    	//首先判断队列中是否存在有效命令
;;;313    	if(!IsQueueEmpty(&g_M485Cmd))
00000c  4874              LDR      r0,|L4.480|
00000e  f7fffffe          BL       IsQueueEmpty
000012  2800              CMP      r0,#0
000014  d17e              BNE      |L4.276|
;;;314    	{
;;;315    		//获得队头元素
;;;316    		GetHead(&g_M485Cmd,&e);
000016  a904              ADD      r1,sp,#0x10
000018  4871              LDR      r0,|L4.480|
00001a  f7fffffe          BL       GetHead
;;;317    		
;;;318    		if(g_MbMtCmd485.rep==FALSE)
00001e  4871              LDR      r0,|L4.484|
000020  8800              LDRH     r0,[r0,#0]  ; g_MbMtCmd485
000022  2800              CMP      r0,#0
000024  d13c              BNE      |L4.160|
;;;319    		{
;;;320    			sign = timing(e.startPeriod,e.period);
000026  e9dd0108          LDRD     r0,r1,[sp,#0x20]
00002a  f7fffffe          BL       timing
00002e  4605              MOV      r5,r0
;;;321    			if(sign)												
000030  b31d              CBZ      r5,|L4.122|
;;;322    			{	
;;;323    				UART485_MbMt_req(e,&g_PduUART485[e.slave-1]);								
000032  f8bd0010          LDRH     r0,[sp,#0x10]
000036  1e40              SUBS     r0,r0,#1
000038  2167              MOVS     r1,#0x67
00003a  4348              MULS     r0,r1,r0
00003c  496a              LDR      r1,|L4.488|
00003e  eb010080          ADD      r0,r1,r0,LSL #2
000042  9003              STR      r0,[sp,#0xc]
000044  a808              ADD      r0,sp,#0x20
000046  c807              LDM      r0,{r0-r2}
000048  e88d0007          STM      sp,{r0-r2}
00004c  a804              ADD      r0,sp,#0x10
00004e  c80f              LDM      r0,{r0-r3}
000050  f7fffffe          BL       UART485_MbMt_req
;;;324    				e.startTimeout = bsp_GetRunTime();		
000054  f7fffffe          BL       bsp_GetRunTime
000058  9006              STR      r0,[sp,#0x18]
;;;325    				e.startPeriod  = bsp_GetRunTime();	
00005a  f7fffffe          BL       bsp_GetRunTime
00005e  9008              STR      r0,[sp,#0x20]
;;;326    				//修改队头元素的相关变量
;;;327    				SetHead(&g_M485Cmd,e);		
000060  a807              ADD      r0,sp,#0x1c
000062  c80f              LDM      r0,{r0-r3}
000064  e88d000f          STM      sp,{r0-r3}
000068  485d              LDR      r0,|L4.480|
00006a  a904              ADD      r1,sp,#0x10
00006c  c90e              LDM      r1,{r1-r3}
00006e  f7fffffe          BL       SetHead
;;;328    
;;;329    				g_MbMtCmd485.rep=TRUE;					
000072  2001              MOVS     r0,#1
000074  495b              LDR      r1,|L4.484|
000076  8008              STRH     r0,[r1,#0]
                  |L4.120|
000078  e0b0              B        |L4.476|
                  |L4.122|
;;;330    			}
;;;331    			else
;;;332    			{
;;;333    				//先出队，再入队，将该条命令放在后面
;;;334    				DeQueue(&g_M485Cmd,&e);	
00007a  a904              ADD      r1,sp,#0x10
00007c  4858              LDR      r0,|L4.480|
00007e  f7fffffe          BL       DeQueue
;;;335    				EnQueue(&g_M485Cmd,e);
000082  a807              ADD      r0,sp,#0x1c
000084  c80f              LDM      r0,{r0-r3}
000086  e88d000f          STM      sp,{r0-r3}
00008a  4855              LDR      r0,|L4.480|
00008c  a904              ADD      r1,sp,#0x10
00008e  c90e              LDM      r1,{r1-r3}
000090  f7fffffe          BL       EnQueue
;;;336    				BSP_OS_TimeDlyMs(100);
000094  2064              MOVS     r0,#0x64
000096  f7fffffe          BL       BSP_OS_TimeDlyMs
;;;337    				//现在无正在传输的命令
;;;338    				return 0xfe;
00009a  20fe              MOVS     r0,#0xfe
                  |L4.156|
;;;339    			}				
;;;340    		}
;;;341    		else
;;;342    		{
;;;343    			sign = timing(e.startTimeout,e.timeout);
;;;344    			if(sign)											
;;;345    			{
;;;346    				g_MbMtCmd485.rep=FALSE;	
;;;347    
;;;348    				//修改指定命令的超时计数
;;;349    				e.timeoutcnt++;	
;;;350    				//修改队头元素的相关变量
;;;351    				SetHead(&g_M485Cmd,e);	
;;;352    				
;;;353    				if(e.timeoutcnt >= 3)					   
;;;354    				{
;;;355    						e.timeoutcnt = 0;
;;;356    						//修改队头元素的相关变量
;;;357    				    SetHead(&g_M485Cmd,e);	
;;;358    						DeQueue(&g_M485Cmd,&e);	
;;;359    						EnQueue(&g_M485Cmd,e);
;;;360    						BSP_OS_TimeDlyMs(100);
;;;361    	//				g_MbMtCmd.PLCCOMFlag=OFF;	
;;;362                *addr = e.slave;					
;;;363    						return 0xff;								
;;;364    				}
;;;365    			}													    
;;;366    			else												
;;;367    			{
;;;368    					//超时成帧检查,485串口
;;;369    					if(bsp_CheckTimer(UART_485))
;;;370    					{
;;;371    						bsp_StopTimer(UART_485);
;;;372    
;;;373    						//复制到modbus消息处理缓冲区中
;;;374    						memcpy((char*)UART485RxDat,(char*)UART485_RXBUF,UART485_tUART.usRxCount);
;;;375    						
;;;376    						ret = UART485_MbMt_rep(e,&g_PduUART485[e.slave-1]);					      
;;;377    
;;;378    						//超时计数清零s
;;;379    						e.timeoutcnt=0;	
;;;380    						//修改队头元素的相关变量
;;;381    				    SetHead(&g_M485Cmd,e);
;;;382    						
;;;383    						g_MbMtCmd485.rep=FALSE;						   
;;;384    
;;;385    						//通讯次数变更
;;;386    						if((e.commCnt != PERIOD_CNT)&&(e.commCnt != 0))
;;;387    						{
;;;388    							e.commCnt--;
;;;389    							//修改队头元素的相关变量
;;;390    							SetHead(&g_M485Cmd,e);		
;;;391    						}
;;;392    						
;;;393    						//通讯次数为0时，删除该条命令
;;;394    						if(e.commCnt == 0)    
;;;395    						{
;;;396    							//删除当前命令
;;;397    							DeQueue(&g_M485Cmd,&e);						
;;;398    						}
;;;399    						
;;;400    						//清空缓冲区
;;;401    						comClearRxFifo(UART_485);	
;;;402    						
;;;403    						//复制
;;;404    // 						for(i=0;i<MAX3_REGHOLD_D16;i++)
;;;405    // 						{
;;;406    // 							g_PduGprs.RegHold[i] = g_PduUART485[0].RegHold[i];
;;;407    //             }
;;;408    // 						if(g_PduUART485[0].RegHold[271] == 0)
;;;409    // 						{
;;;410    // 							i = 0;
;;;411    // 						}
;;;412    						
;;;413    						*addr = e.slave;
;;;414    						return ret;
;;;415    					}
;;;416    			}
;;;417    		}
;;;418    	}
;;;419    	else
;;;420    	{
;;;421    		g_MbMtCmd485.PLCCOMFlag=FALSE;
;;;422    		if(g_MbMtCmd485.PLCCOMFlag==FALSE) return 0xff;
;;;423    	}
;;;424    	return 0;	
;;;425    }
00009c  b00b              ADD      sp,sp,#0x2c
00009e  bdf0              POP      {r4-r7,pc}
                  |L4.160|
0000a0  e9dd0106          LDRD     r0,r1,[sp,#0x18]      ;343
0000a4  f7fffffe          BL       timing
0000a8  4605              MOV      r5,r0                 ;343
0000aa  2d00              CMP      r5,#0                 ;344
0000ac  d038              BEQ      |L4.288|
0000ae  2000              MOVS     r0,#0                 ;346
0000b0  494c              LDR      r1,|L4.484|
0000b2  8008              STRH     r0,[r1,#0]            ;346
0000b4  f8bd002a          LDRH     r0,[sp,#0x2a]         ;349
0000b8  1c40              ADDS     r0,r0,#1              ;349
0000ba  b280              UXTH     r0,r0                 ;349
0000bc  f8ad002a          STRH     r0,[sp,#0x2a]         ;349
0000c0  a807              ADD      r0,sp,#0x1c           ;351
0000c2  c80f              LDM      r0,{r0-r3}            ;351
0000c4  e88d000f          STM      sp,{r0-r3}            ;351
0000c8  4845              LDR      r0,|L4.480|
0000ca  a904              ADD      r1,sp,#0x10           ;351
0000cc  c90e              LDM      r1,{r1-r3}            ;351
0000ce  f7fffffe          BL       SetHead
0000d2  f8bd002a          LDRH     r0,[sp,#0x2a]         ;353
0000d6  2803              CMP      r0,#3                 ;353
0000d8  dbce              BLT      |L4.120|
0000da  2000              MOVS     r0,#0                 ;355
0000dc  f8ad002a          STRH     r0,[sp,#0x2a]         ;355
0000e0  a807              ADD      r0,sp,#0x1c           ;357
0000e2  c80f              LDM      r0,{r0-r3}            ;357
0000e4  e88d000f          STM      sp,{r0-r3}            ;357
0000e8  483d              LDR      r0,|L4.480|
0000ea  a904              ADD      r1,sp,#0x10           ;357
0000ec  c90e              LDM      r1,{r1-r3}            ;357
0000ee  f7fffffe          BL       SetHead
0000f2  a904              ADD      r1,sp,#0x10           ;358
0000f4  483a              LDR      r0,|L4.480|
0000f6  f7fffffe          BL       DeQueue
0000fa  a807              ADD      r0,sp,#0x1c           ;359
0000fc  c80f              LDM      r0,{r0-r3}            ;359
0000fe  e88d000f          STM      sp,{r0-r3}            ;359
000102  4837              LDR      r0,|L4.480|
000104  a904              ADD      r1,sp,#0x10           ;359
000106  c90e              LDM      r1,{r1-r3}            ;359
000108  f7fffffe          BL       EnQueue
00010c  2064              MOVS     r0,#0x64              ;360
00010e  f7fffffe          BL       BSP_OS_TimeDlyMs
000112  e000              B        |L4.278|
                  |L4.276|
000114  e05a              B        |L4.460|
                  |L4.278|
000116  f8bd0010          LDRH     r0,[sp,#0x10]         ;362
00011a  6020              STR      r0,[r4,#0]            ;362
00011c  20ff              MOVS     r0,#0xff              ;363
00011e  e7bd              B        |L4.156|
                  |L4.288|
000120  2000              MOVS     r0,#0                 ;369
000122  f7fffffe          BL       bsp_CheckTimer
000126  2800              CMP      r0,#0                 ;369
000128  d058              BEQ      |L4.476|
00012a  2000              MOVS     r0,#0                 ;371
00012c  f7fffffe          BL       bsp_StopTimer
000130  482e              LDR      r0,|L4.492|
000132  8bc2              LDRH     r2,[r0,#0x1e]         ;374  ; g_tUart1
000134  492e              LDR      r1,|L4.496|
000136  482f              LDR      r0,|L4.500|
000138  f7fffffe          BL       __aeabi_memcpy
00013c  f8bd0010          LDRH     r0,[sp,#0x10]         ;376
000140  1e40              SUBS     r0,r0,#1              ;376
000142  2167              MOVS     r1,#0x67              ;376
000144  4348              MULS     r0,r1,r0              ;376
000146  4928              LDR      r1,|L4.488|
000148  eb010080          ADD      r0,r1,r0,LSL #2       ;376
00014c  9003              STR      r0,[sp,#0xc]          ;376
00014e  a808              ADD      r0,sp,#0x20           ;376
000150  c807              LDM      r0,{r0-r2}            ;376
000152  e88d0007          STM      sp,{r0-r2}            ;376
000156  a804              ADD      r0,sp,#0x10           ;376
000158  c80f              LDM      r0,{r0-r3}            ;376
00015a  f7fffffe          BL       UART485_MbMt_rep
00015e  4606              MOV      r6,r0                 ;376
000160  2000              MOVS     r0,#0                 ;379
000162  f8ad002a          STRH     r0,[sp,#0x2a]         ;379
000166  a807              ADD      r0,sp,#0x1c           ;381
000168  c80f              LDM      r0,{r0-r3}            ;381
00016a  e88d000f          STM      sp,{r0-r3}            ;381
00016e  481c              LDR      r0,|L4.480|
000170  a904              ADD      r1,sp,#0x10           ;381
000172  c90e              LDM      r1,{r1-r3}            ;381
000174  f7fffffe          BL       SetHead
000178  2000              MOVS     r0,#0                 ;383
00017a  491a              LDR      r1,|L4.484|
00017c  8008              STRH     r0,[r1,#0]            ;383
00017e  f8bd0028          LDRH     r0,[sp,#0x28]         ;386
000182  f5a0417f          SUB      r1,r0,#0xff00         ;386
000186  39ff              SUBS     r1,r1,#0xff           ;386
000188  d011              BEQ      |L4.430|
00018a  f8bd0028          LDRH     r0,[sp,#0x28]         ;386
00018e  b170              CBZ      r0,|L4.430|
000190  f8bd0028          LDRH     r0,[sp,#0x28]         ;388
000194  1e40              SUBS     r0,r0,#1              ;388
000196  b280              UXTH     r0,r0                 ;388
000198  f8ad0028          STRH     r0,[sp,#0x28]         ;388
00019c  a807              ADD      r0,sp,#0x1c           ;390
00019e  c80f              LDM      r0,{r0-r3}            ;390
0001a0  e88d000f          STM      sp,{r0-r3}            ;390
0001a4  480e              LDR      r0,|L4.480|
0001a6  a904              ADD      r1,sp,#0x10           ;390
0001a8  c90e              LDM      r1,{r1-r3}            ;390
0001aa  f7fffffe          BL       SetHead
                  |L4.430|
0001ae  f8bd0028          LDRH     r0,[sp,#0x28]         ;394
0001b2  b918              CBNZ     r0,|L4.444|
0001b4  a904              ADD      r1,sp,#0x10           ;397
0001b6  480a              LDR      r0,|L4.480|
0001b8  f7fffffe          BL       DeQueue
                  |L4.444|
0001bc  2000              MOVS     r0,#0                 ;401
0001be  f7fffffe          BL       comClearRxFifo
0001c2  f8bd0010          LDRH     r0,[sp,#0x10]         ;413
0001c6  6020              STR      r0,[r4,#0]            ;413
0001c8  b2f0              UXTB     r0,r6                 ;414
0001ca  e767              B        |L4.156|
                  |L4.460|
0001cc  2000              MOVS     r0,#0                 ;421
0001ce  4905              LDR      r1,|L4.484|
0001d0  7088              STRB     r0,[r1,#2]            ;421
0001d2  4608              MOV      r0,r1                 ;422
0001d4  7880              LDRB     r0,[r0,#2]            ;422  ; g_MbMtCmd485
0001d6  b908              CBNZ     r0,|L4.476|
0001d8  20ff              MOVS     r0,#0xff              ;422
0001da  e75f              B        |L4.156|
                  |L4.476|
0001dc  2000              MOVS     r0,#0                 ;424
0001de  e75d              B        |L4.156|
;;;426    
                          ENDP

                  |L4.480|
                          DCD      g_M485Cmd
                  |L4.484|
                          DCD      g_MbMtCmd485
                  |L4.488|
                          DCD      g_PduUART485
                  |L4.492|
                          DCD      g_tUart1
                  |L4.496|
                          DCD      g_RxBuf1
                  |L4.500|
                          DCD      UART485RxDat

                          AREA ||i.UART485_MbMt_rep||, CODE, READONLY, ALIGN=2

                  UART485_MbMt_rep PROC
;;;658    ***************************************************************/
;;;659    uint16_t UART485_MbMt_rep(_CMD Cmd,UART485_PDU *Pdu)
000000  b40f              PUSH     {r0-r3}
;;;660    {
000002  e92d4ff0          PUSH     {r4-r11,lr}
000006  b089              SUB      sp,sp,#0x24
000008  f8dda064          LDR      r10,[sp,#0x64]
;;;661    	uint8_t  ID_Code,FuncCode,ByteCnt;
;;;662    	uint16_t SAddr,SbytAddr,Sshft,EAddr,CRCValue;
;;;663    	uint16_t Rcnt,Counts;
;;;664    	uint32_t i,j,m,n,tmp1;
;;;665    	uDAT16   D16;
;;;666    
;;;667    	Rcnt=0;
00000c  2600              MOVS     r6,#0
;;;668    	
;;;669    	ID_Code=UART485RxDat[Rcnt++];
00000e  4631              MOV      r1,r6
000010  1c76              ADDS     r6,r6,#1
000012  48fd              LDR      r0,|L5.1032|
000014  5c40              LDRB     r0,[r0,r1]
000016  9008              STR      r0,[sp,#0x20]
;;;670    	if(ID_Code!=Cmd.slave)       
000018  f8bd1048          LDRH     r1,[sp,#0x48]
00001c  9808              LDR      r0,[sp,#0x20]
00001e  4281              CMP      r1,r0
000020  d005              BEQ      |L5.46|
;;;671    	{
;;;672    		return 1;
000022  2001              MOVS     r0,#1
                  |L5.36|
;;;673    	}
;;;674    	
;;;675    	FuncCode=UART485RxDat[Rcnt++];
;;;676    	if(FuncCode!=Cmd.func)
;;;677    	{
;;;678    		return 1;
;;;679    	}
;;;680    	switch(FuncCode)
;;;681    	{
;;;682    			case MB_BITCOIL_RD:
;;;683    				ByteCnt=UART485RxDat[Rcnt++];
;;;684    				Counts=Cmd.cnt;
;;;685    				if((Counts%8)==0)						
;;;686    				{
;;;687    					if(ByteCnt!=(Counts>>3))
;;;688    					{
;;;689    						return 1;
;;;690    					}
;;;691    				}
;;;692    				else
;;;693    				{
;;;694    					if(ByteCnt!=((Counts>>3)+1))
;;;695    					{
;;;696    						return 1;
;;;697    					}
;;;698    				}
;;;699    				SAddr=Cmd.addr;
;;;700    				SbytAddr=SAddr/D16BITNUM;
;;;701    				Sshft=SAddr%D16BITNUM;
;;;702    				EAddr=SAddr+Counts;
;;;703    
;;;704    				
;;;705    				for(i=SbytAddr,j=Sshft,n=D8BITNUM,m=SAddr;m<EAddr;j++,n++,m++)
;;;706    				{
;;;707    					if(n>=D8BITNUM)
;;;708    					{
;;;709    						n=0;
;;;710    						D16.d16=UART485RxDat[Rcnt++];
;;;711    					}
;;;712    					tmp1=D16.d16>>n;
;;;713    					if(j>=D16BITNUM)
;;;714    					{
;;;715    						i++;
;;;716    						j=0;
;;;717    					}
;;;718    					if(tmp1&0x01)
;;;719    					{
;;;720    						Pdu->BitCoil[i]|=BIT(j);
;;;721    					}
;;;722    					else
;;;723    					{
;;;724    						Pdu->BitCoil[i]&=~ BIT(j);
;;;725    					}
;;;726    				}
;;;727    				break;
;;;728    
;;;729    			case MB_BITINP_RD:
;;;730    				ByteCnt=UART485RxDat[Rcnt++];
;;;731    				Counts=Cmd.cnt;
;;;732    				if((Counts%8)==0)					
;;;733    				{
;;;734    					if(ByteCnt!=(Counts>>3))
;;;735    					{
;;;736    						return 1;
;;;737    					}
;;;738    				}
;;;739    				else
;;;740    				{
;;;741    					if(ByteCnt!=((Counts>>3)+1))
;;;742    					{
;;;743    						return 1;
;;;744    					}
;;;745    				}
;;;746    				SAddr=Cmd.addr;
;;;747    				SbytAddr=SAddr/D16BITNUM;
;;;748    				Sshft=SAddr%D16BITNUM;
;;;749    				EAddr=SAddr+Counts;
;;;750    
;;;751    				
;;;752    				for(i=SbytAddr,j=Sshft,n=D8BITNUM,m=SAddr;m<EAddr;j++,n++,m++)
;;;753    				{
;;;754    					if(n>=D8BITNUM)
;;;755    					{
;;;756    						n=0;
;;;757    						D16.d16=UART485RxDat[Rcnt++];
;;;758    					}
;;;759    					tmp1=D16.d16>>n;
;;;760    					if(j>=D16BITNUM)
;;;761    					{
;;;762    						i++;
;;;763    						j=0;
;;;764    					}
;;;765    					if(tmp1&0x01)
;;;766    					{
;;;767    						Pdu->BitInp[i]|=BIT(j);
;;;768    					}
;;;769    					else
;;;770    					{
;;;771    						Pdu->BitInp[i]&=~ BIT(j);
;;;772    					}
;;;773    				}
;;;774    				break;
;;;775    
;;;776    			case MB_REGHOLD_RD:
;;;777    				ByteCnt=UART485RxDat[Rcnt++];
;;;778    				Counts=Cmd.cnt*2;
;;;779    				if(ByteCnt!=Counts)		
;;;780    				{
;;;781    					return 1;
;;;782    				}
;;;783    				SAddr=Cmd.addr;
;;;784    				
;;;785    				for(m=0,i=SAddr;m<ByteCnt;i++)
;;;786    				{
;;;787    					D16.d8.Hi=UART485RxDat[Rcnt++];
;;;788    					m++;
;;;789    					if(m<ByteCnt)	D16.d8.Lo=UART485RxDat[Rcnt++];
;;;790    					else			    D16.d8.Lo=Pdu->RegHold[i];
;;;791    					m++;
;;;792    					Pdu->RegHold[i]=D16.d16;
;;;793    				}
;;;794    				break;
;;;795    
;;;796    			case MB_REGINP_RD:		
;;;797    				ByteCnt=UART485RxDat[Rcnt++];
;;;798    				Counts=Cmd.cnt*2;
;;;799    				if(ByteCnt!=Counts)
;;;800    				{
;;;801    					return 1;
;;;802    				}
;;;803    				SAddr=Cmd.addr;
;;;804    				
;;;805    				for(m=0,i=SAddr;m<ByteCnt;i++)
;;;806    				{
;;;807    					D16.d8.Hi=UART485RxDat[Rcnt++];
;;;808    					m++;
;;;809    					if(m<ByteCnt)	D16.d8.Lo=UART485RxDat[Rcnt++];
;;;810    					else			    D16.d8.Lo=Pdu->RegInp[i];
;;;811    					m++;
;;;812    					Pdu->RegInp[i]=D16.d16;
;;;813    				}
;;;814    				break;
;;;815    
;;;816    			case MB_BITCOIL_WT:
;;;817    				D16.d8.Hi=UART485RxDat[Rcnt++];
;;;818    				D16.d8.Lo=UART485RxDat[Rcnt++];
;;;819    				SAddr=D16.d16-UART485_BITCOIL_BADDR;
;;;820    				if(SAddr!=Cmd.addr)		
;;;821    				{
;;;822    					return 1;
;;;823    				}
;;;824    				
;;;825    				D16.d8.Hi=UART485RxDat[Rcnt++];
;;;826    				D16.d8.Lo=UART485RxDat[Rcnt++];
;;;827    				if(D16.d16!=Cmd.cnt)
;;;828    				{
;;;829    					return 1;
;;;830    				}
;;;831    				break;
;;;832    
;;;833    			case MB_REGHOLD_WT:
;;;834    				D16.d8.Hi=UART485RxDat[Rcnt++];
;;;835    				D16.d8.Lo=UART485RxDat[Rcnt++];
;;;836    				SAddr=D16.d16-UART485_REGHOLD_BADDR;
;;;837    				if(SAddr!=Cmd.addr)		
;;;838    				{
;;;839    					return 1;
;;;840    				}
;;;841    				
;;;842    				D16.d8.Hi=UART485RxDat[Rcnt++];
;;;843    				D16.d8.Lo=UART485RxDat[Rcnt++];
;;;844    				break;
;;;845    
;;;846    			case MB_MULTICOIL_WT:
;;;847    				D16.d8.Hi=UART485RxDat[Rcnt++];
;;;848    				D16.d8.Lo=UART485RxDat[Rcnt++];
;;;849    				SAddr=D16.d16-UART485_BITCOIL_BADDR;
;;;850    				if(SAddr!=Cmd.addr)			
;;;851    				{
;;;852    					return 1;
;;;853    				}
;;;854    				
;;;855    				D16.d8.Hi=UART485RxDat[Rcnt++];
;;;856    				D16.d8.Lo=UART485RxDat[Rcnt++];
;;;857    				if(D16.d16!=Cmd.cnt)
;;;858    				{
;;;859    					return 1;
;;;860    				}
;;;861    				break;
;;;862    
;;;863    			case MB_MULTIREG_WT:
;;;864    				D16.d8.Hi=UART485RxDat[Rcnt++];
;;;865    				D16.d8.Lo=UART485RxDat[Rcnt++];
;;;866    				SAddr=D16.d16-UART485_REGHOLD_BADDR;
;;;867    				if(SAddr!=Cmd.addr)	
;;;868    				{
;;;869    					return 1;
;;;870    				}
;;;871    				
;;;872    				D16.d8.Hi=UART485RxDat[Rcnt++];
;;;873    				D16.d8.Lo=UART485RxDat[Rcnt++];
;;;874    				if(D16.d16!=Cmd.cnt)
;;;875    				{
;;;876    					return 1;
;;;877    				}
;;;878    				break;
;;;879    			default:
;;;880    				return FuncCode;
;;;881    	}
;;;882    	CRCValue=calCRC16_modbus(UART485RxDat, Rcnt);	
;;;883    	D16.d8.Hi=UART485RxDat[Rcnt++];
;;;884    	D16.d8.Lo=UART485RxDat[Rcnt++];
;;;885    	if(CRCValue!=D16.d16)		
;;;886    	{
;;;887    	   return 1;
;;;888    	}
;;;889    	return FuncCode;	
;;;890    }
000024  b009              ADD      sp,sp,#0x24
000026  e8bd0ff0          POP      {r4-r11}
00002a  f85dfb14          LDR      pc,[sp],#0x14
                  |L5.46|
00002e  4631              MOV      r1,r6                 ;675
000030  1c76              ADDS     r6,r6,#1              ;675
000032  48f5              LDR      r0,|L5.1032|
000034  5c40              LDRB     r0,[r0,r1]            ;675
000036  9007              STR      r0,[sp,#0x1c]         ;675
000038  f8bd104a          LDRH     r1,[sp,#0x4a]         ;676
00003c  9807              LDR      r0,[sp,#0x1c]         ;676
00003e  4281              CMP      r1,r0                 ;676
000040  d001              BEQ      |L5.70|
000042  2001              MOVS     r0,#1                 ;678
000044  e7ee              B        |L5.36|
                  |L5.70|
000046  9807              LDR      r0,[sp,#0x1c]         ;680
000048  2805              CMP      r0,#5                 ;680
00004a  d070              BEQ      |L5.302|
00004c  dc08              BGT      |L5.96|
00004e  2801              CMP      r0,#1                 ;680
000050  d00d              BEQ      |L5.110|
000052  2802              CMP      r0,#2                 ;680
000054  d06c              BEQ      |L5.304|
000056  2803              CMP      r0,#3                 ;680
000058  d06b              BEQ      |L5.306|
00005a  2804              CMP      r0,#4                 ;680
                  |L5.92|
00005c  d16a              BNE      |L5.308|
00005e  e126              B        |L5.686|
                  |L5.96|
000060  2806              CMP      r0,#6                 ;680
000062  d068              BEQ      |L5.310|
000064  280f              CMP      r0,#0xf               ;680
000066  d067              BEQ      |L5.312|
000068  2810              CMP      r0,#0x10              ;680
00006a  d1f7              BNE      |L5.92|
00006c  e1cf              B        |L5.1038|
                  |L5.110|
00006e  4631              MOV      r1,r6                 ;683
000070  1c76              ADDS     r6,r6,#1              ;683
000072  48e5              LDR      r0,|L5.1032|
000074  f8109001          LDRB     r9,[r0,r1]            ;683
000078  f8bd804e          LDRH     r8,[sp,#0x4e]         ;684
00007c  ea4f71e8          ASR      r1,r8,#31             ;685
000080  eb087151          ADD      r1,r8,r1,LSR #29      ;685
000084  10c9              ASRS     r1,r1,#3              ;685
000086  ebb801c1          SUBS     r1,r8,r1,LSL #3       ;685
00008a  d104              BNE      |L5.150|
00008c  ebb90fe8          CMP      r9,r8,ASR #3          ;687
000090  d008              BEQ      |L5.164|
000092  2001              MOVS     r0,#1                 ;689
000094  e7c6              B        |L5.36|
                  |L5.150|
000096  2001              MOVS     r0,#1                 ;694
000098  eb0000e8          ADD      r0,r0,r8,ASR #3       ;694
00009c  4548              CMP      r0,r9                 ;694
00009e  d001              BEQ      |L5.164|
0000a0  2001              MOVS     r0,#1                 ;696
0000a2  e7bf              B        |L5.36|
                  |L5.164|
0000a4  f8bd504c          LDRH     r5,[sp,#0x4c]         ;699
0000a8  4628              MOV      r0,r5                 ;700
0000aa  17e9              ASRS     r1,r5,#31             ;700
0000ac  eb057111          ADD      r1,r5,r1,LSR #28      ;700
0000b0  110f              ASRS     r7,r1,#4              ;700
0000b2  9706              STR      r7,[sp,#0x18]         ;700
0000b4  17e9              ASRS     r1,r5,#31             ;701
0000b6  eb057111          ADD      r1,r5,r1,LSR #28      ;701
0000ba  1109              ASRS     r1,r1,#4              ;701
0000bc  eba51101          SUB      r1,r5,r1,LSL #4       ;701
0000c0  fa1ffb81          UXTH     r11,r1                ;701
0000c4  f8cdb014          STR      r11,[sp,#0x14]        ;701
0000c8  eb050008          ADD      r0,r5,r8              ;702
0000cc  b280              UXTH     r0,r0                 ;702
0000ce  9004              STR      r0,[sp,#0x10]         ;702
0000d0  9f06              LDR      r7,[sp,#0x18]         ;705
0000d2  f8ddb014          LDR      r11,[sp,#0x14]        ;705
0000d6  2008              MOVS     r0,#8                 ;705
0000d8  9002              STR      r0,[sp,#8]            ;705
0000da  462c              MOV      r4,r5                 ;705
0000dc  e03f              B        |L5.350|
                  |L5.222|
0000de  9802              LDR      r0,[sp,#8]            ;707
0000e0  2808              CMP      r0,#8                 ;707
0000e2  d307              BCC      |L5.244|
0000e4  2000              MOVS     r0,#0                 ;709
0000e6  9002              STR      r0,[sp,#8]            ;709
0000e8  4630              MOV      r0,r6                 ;710
0000ea  1c71              ADDS     r1,r6,#1              ;710
0000ec  b28e              UXTH     r6,r1                 ;710
0000ee  49c6              LDR      r1,|L5.1032|
0000f0  5c08              LDRB     r0,[r1,r0]            ;710
0000f2  9000              STR      r0,[sp,#0]            ;710
                  |L5.244|
0000f4  f8bd0000          LDRH     r0,[sp,#0]            ;712
0000f8  9902              LDR      r1,[sp,#8]            ;712
0000fa  4108              ASRS     r0,r0,r1              ;712
0000fc  9001              STR      r0,[sp,#4]            ;712
0000fe  f1bb0f10          CMP      r11,#0x10             ;713
000102  d302              BCC      |L5.266|
000104  1c7f              ADDS     r7,r7,#1              ;715
000106  f04f0b00          MOV      r11,#0                ;716
                  |L5.266|
00010a  9801              LDR      r0,[sp,#4]            ;718
00010c  f0100f01          TST      r0,#1                 ;718
000110  d013              BEQ      |L5.314|
000112  f10a0004          ADD      r0,r10,#4             ;720
000116  f8300017          LDRH     r0,[r0,r7,LSL #1]     ;720
00011a  2101              MOVS     r1,#1                 ;720
00011c  fa01f10b          LSL      r1,r1,r11             ;720
000120  4308              ORRS     r0,r0,r1              ;720
000122  b281              UXTH     r1,r0                 ;720
000124  f10a0004          ADD      r0,r10,#4             ;720
000128  f8201017          STRH     r1,[r0,r7,LSL #1]     ;720
00012c  e011              B        |L5.338|
                  |L5.302|
00012e  e0f5              B        |L5.796|
                  |L5.304|
000130  e019              B        |L5.358|
                  |L5.306|
000132  e085              B        |L5.576|
                  |L5.308|
000134  e195              B        |L5.1122|
                  |L5.310|
000136  e11b              B        |L5.880|
                  |L5.312|
000138  e13c              B        |L5.948|
                  |L5.314|
00013a  f10a0004          ADD      r0,r10,#4             ;724
00013e  f8300017          LDRH     r0,[r0,r7,LSL #1]     ;724
000142  2101              MOVS     r1,#1                 ;724
000144  fa01f10b          LSL      r1,r1,r11             ;724
000148  4388              BICS     r0,r0,r1              ;724
00014a  f10a0104          ADD      r1,r10,#4             ;724
00014e  f8210017          STRH     r0,[r1,r7,LSL #1]     ;724
                  |L5.338|
000152  f10b0b01          ADD      r11,r11,#1            ;705
000156  9802              LDR      r0,[sp,#8]            ;705
000158  1c40              ADDS     r0,r0,#1              ;705
00015a  9002              STR      r0,[sp,#8]            ;705
00015c  1c64              ADDS     r4,r4,#1              ;705
                  |L5.350|
00015e  9804              LDR      r0,[sp,#0x10]         ;705
000160  4284              CMP      r4,r0                 ;705
000162  d3bc              BCC      |L5.222|
000164  e17f              B        |L5.1126|
                  |L5.358|
000166  4631              MOV      r1,r6                 ;730
000168  1c76              ADDS     r6,r6,#1              ;730
00016a  48a7              LDR      r0,|L5.1032|
00016c  f8109001          LDRB     r9,[r0,r1]            ;730
000170  f8bd804e          LDRH     r8,[sp,#0x4e]         ;731
000174  ea4f71e8          ASR      r1,r8,#31             ;732
000178  eb087151          ADD      r1,r8,r1,LSR #29      ;732
00017c  10c9              ASRS     r1,r1,#3              ;732
00017e  ebb801c1          SUBS     r1,r8,r1,LSL #3       ;732
000182  d104              BNE      |L5.398|
000184  ebb90fe8          CMP      r9,r8,ASR #3          ;734
000188  d008              BEQ      |L5.412|
00018a  2001              MOVS     r0,#1                 ;736
00018c  e74a              B        |L5.36|
                  |L5.398|
00018e  2001              MOVS     r0,#1                 ;741
000190  eb0000e8          ADD      r0,r0,r8,ASR #3       ;741
000194  4548              CMP      r0,r9                 ;741
000196  d001              BEQ      |L5.412|
000198  2001              MOVS     r0,#1                 ;743
00019a  e743              B        |L5.36|
                  |L5.412|
00019c  f8bd504c          LDRH     r5,[sp,#0x4c]         ;746
0001a0  4628              MOV      r0,r5                 ;747
0001a2  17e9              ASRS     r1,r5,#31             ;747
0001a4  eb057111          ADD      r1,r5,r1,LSR #28      ;747
0001a8  110f              ASRS     r7,r1,#4              ;747
0001aa  9706              STR      r7,[sp,#0x18]         ;747
0001ac  17e9              ASRS     r1,r5,#31             ;748
0001ae  eb057111          ADD      r1,r5,r1,LSR #28      ;748
0001b2  1109              ASRS     r1,r1,#4              ;748
0001b4  eba51101          SUB      r1,r5,r1,LSL #4       ;748
0001b8  fa1ffb81          UXTH     r11,r1                ;748
0001bc  f8cdb014          STR      r11,[sp,#0x14]        ;748
0001c0  eb050008          ADD      r0,r5,r8              ;749
0001c4  b280              UXTH     r0,r0                 ;749
0001c6  9004              STR      r0,[sp,#0x10]         ;749
0001c8  9f06              LDR      r7,[sp,#0x18]         ;752
0001ca  f8ddb014          LDR      r11,[sp,#0x14]        ;752
0001ce  2008              MOVS     r0,#8                 ;752
0001d0  9002              STR      r0,[sp,#8]            ;752
0001d2  462c              MOV      r4,r5                 ;752
0001d4  e030              B        |L5.568|
                  |L5.470|
0001d6  9802              LDR      r0,[sp,#8]            ;754
0001d8  2808              CMP      r0,#8                 ;754
0001da  d307              BCC      |L5.492|
0001dc  2000              MOVS     r0,#0                 ;756
0001de  9002              STR      r0,[sp,#8]            ;756
0001e0  4630              MOV      r0,r6                 ;757
0001e2  1c71              ADDS     r1,r6,#1              ;757
0001e4  b28e              UXTH     r6,r1                 ;757
0001e6  4988              LDR      r1,|L5.1032|
0001e8  5c08              LDRB     r0,[r1,r0]            ;757
0001ea  9000              STR      r0,[sp,#0]            ;757
                  |L5.492|
0001ec  f8bd0000          LDRH     r0,[sp,#0]            ;759
0001f0  9902              LDR      r1,[sp,#8]            ;759
0001f2  4108              ASRS     r0,r0,r1              ;759
0001f4  9001              STR      r0,[sp,#4]            ;759
0001f6  f1bb0f10          CMP      r11,#0x10             ;760
0001fa  d302              BCC      |L5.514|
0001fc  1c7f              ADDS     r7,r7,#1              ;762
0001fe  f04f0b00          MOV      r11,#0                ;763
                  |L5.514|
000202  9801              LDR      r0,[sp,#4]            ;765
000204  f0100f01          TST      r0,#1                 ;765
000208  d008              BEQ      |L5.540|
00020a  f83a0017          LDRH     r0,[r10,r7,LSL #1]    ;767
00020e  2101              MOVS     r1,#1                 ;767
000210  fa01f10b          LSL      r1,r1,r11             ;767
000214  4308              ORRS     r0,r0,r1              ;767
000216  f82a0017          STRH     r0,[r10,r7,LSL #1]    ;767
00021a  e007              B        |L5.556|
                  |L5.540|
00021c  f83a0017          LDRH     r0,[r10,r7,LSL #1]    ;771
000220  2101              MOVS     r1,#1                 ;771
000222  fa01f10b          LSL      r1,r1,r11             ;771
000226  4388              BICS     r0,r0,r1              ;771
000228  f82a0017          STRH     r0,[r10,r7,LSL #1]    ;771
                  |L5.556|
00022c  f10b0b01          ADD      r11,r11,#1            ;752
000230  9802              LDR      r0,[sp,#8]            ;752
000232  1c40              ADDS     r0,r0,#1              ;752
000234  9002              STR      r0,[sp,#8]            ;752
000236  1c64              ADDS     r4,r4,#1              ;752
                  |L5.568|
000238  9804              LDR      r0,[sp,#0x10]         ;752
00023a  4284              CMP      r4,r0                 ;752
00023c  d3cb              BCC      |L5.470|
00023e  e112              B        |L5.1126|
                  |L5.576|
000240  4631              MOV      r1,r6                 ;777
000242  1c76              ADDS     r6,r6,#1              ;777
000244  4870              LDR      r0,|L5.1032|
000246  f8109001          LDRB     r9,[r0,r1]            ;777
00024a  f8bd004e          LDRH     r0,[sp,#0x4e]         ;778
00024e  f64f71ff          MOV      r1,#0xffff            ;778
000252  ea010840          AND      r8,r1,r0,LSL #1       ;778
000256  45c1              CMP      r9,r8                 ;779
000258  d001              BEQ      |L5.606|
00025a  2001              MOVS     r0,#1                 ;781
00025c  e6e2              B        |L5.36|
                  |L5.606|
00025e  f8bd504c          LDRH     r5,[sp,#0x4c]         ;783
000262  2400              MOVS     r4,#0                 ;785
000264  462f              MOV      r7,r5                 ;785
000266  e01f              B        |L5.680|
                  |L5.616|
000268  4630              MOV      r0,r6                 ;787
00026a  1c71              ADDS     r1,r6,#1              ;787
00026c  b28e              UXTH     r6,r1                 ;787
00026e  4966              LDR      r1,|L5.1032|
000270  5c08              LDRB     r0,[r1,r0]            ;787
000272  f88d0001          STRB     r0,[sp,#1]            ;787
000276  1c64              ADDS     r4,r4,#1              ;788
000278  454c              CMP      r4,r9                 ;789
00027a  d207              BCS      |L5.652|
00027c  4630              MOV      r0,r6                 ;789
00027e  1c71              ADDS     r1,r6,#1              ;789
000280  b28e              UXTH     r6,r1                 ;789
000282  4961              LDR      r1,|L5.1032|
000284  5c08              LDRB     r0,[r1,r0]            ;789
000286  f88d0000          STRB     r0,[sp,#0]            ;789
00028a  e005              B        |L5.664|
                  |L5.652|
00028c  f10a000c          ADD      r0,r10,#0xc           ;790
000290  f8100017          LDRB     r0,[r0,r7,LSL #1]     ;790
000294  f88d0000          STRB     r0,[sp,#0]            ;790
                  |L5.664|
000298  1c64              ADDS     r4,r4,#1              ;791
00029a  f8bd1000          LDRH     r1,[sp,#0]            ;792
00029e  f10a000c          ADD      r0,r10,#0xc           ;792
0002a2  f8201017          STRH     r1,[r0,r7,LSL #1]     ;792
0002a6  1c7f              ADDS     r7,r7,#1              ;785
                  |L5.680|
0002a8  454c              CMP      r4,r9                 ;785
0002aa  d3dd              BCC      |L5.616|
0002ac  e0db              B        |L5.1126|
                  |L5.686|
0002ae  4631              MOV      r1,r6                 ;797
0002b0  1c76              ADDS     r6,r6,#1              ;797
0002b2  4855              LDR      r0,|L5.1032|
0002b4  f8109001          LDRB     r9,[r0,r1]            ;797
0002b8  f8bd004e          LDRH     r0,[sp,#0x4e]         ;798
0002bc  f64f71ff          MOV      r1,#0xffff            ;798
0002c0  ea010840          AND      r8,r1,r0,LSL #1       ;798
0002c4  45c1              CMP      r9,r8                 ;799
0002c6  d001              BEQ      |L5.716|
0002c8  2001              MOVS     r0,#1                 ;801
0002ca  e6ab              B        |L5.36|
                  |L5.716|
0002cc  f8bd504c          LDRH     r5,[sp,#0x4c]         ;803
0002d0  2400              MOVS     r4,#0                 ;805
0002d2  462f              MOV      r7,r5                 ;805
0002d4  e01f              B        |L5.790|
                  |L5.726|
0002d6  4630              MOV      r0,r6                 ;807
0002d8  1c71              ADDS     r1,r6,#1              ;807
0002da  b28e              UXTH     r6,r1                 ;807
0002dc  494a              LDR      r1,|L5.1032|
0002de  5c08              LDRB     r0,[r1,r0]            ;807
0002e0  f88d0001          STRB     r0,[sp,#1]            ;807
0002e4  1c64              ADDS     r4,r4,#1              ;808
0002e6  454c              CMP      r4,r9                 ;809
0002e8  d207              BCS      |L5.762|
0002ea  4630              MOV      r0,r6                 ;809
0002ec  1c71              ADDS     r1,r6,#1              ;809
0002ee  b28e              UXTH     r6,r1                 ;809
0002f0  4945              LDR      r1,|L5.1032|
0002f2  5c08              LDRB     r0,[r1,r0]            ;809
0002f4  f88d0000          STRB     r0,[sp,#0]            ;809
0002f8  e005              B        |L5.774|
                  |L5.762|
0002fa  f10a0008          ADD      r0,r10,#8             ;810
0002fe  f8100017          LDRB     r0,[r0,r7,LSL #1]     ;810
000302  f88d0000          STRB     r0,[sp,#0]            ;810
                  |L5.774|
000306  1c64              ADDS     r4,r4,#1              ;811
000308  f8bd1000          LDRH     r1,[sp,#0]            ;812
00030c  f10a0008          ADD      r0,r10,#8             ;812
000310  f8201017          STRH     r1,[r0,r7,LSL #1]     ;812
000314  1c7f              ADDS     r7,r7,#1              ;805
                  |L5.790|
000316  454c              CMP      r4,r9                 ;805
000318  d3dd              BCC      |L5.726|
00031a  e0a4              B        |L5.1126|
                  |L5.796|
00031c  4631              MOV      r1,r6                 ;817
00031e  1c76              ADDS     r6,r6,#1              ;817
000320  4839              LDR      r0,|L5.1032|
000322  5c40              LDRB     r0,[r0,r1]            ;817
000324  f88d0001          STRB     r0,[sp,#1]            ;817
000328  4631              MOV      r1,r6                 ;818
00032a  1c76              ADDS     r6,r6,#1              ;818
00032c  4836              LDR      r0,|L5.1032|
00032e  5c40              LDRB     r0,[r0,r1]            ;818
000330  f88d0000          STRB     r0,[sp,#0]            ;818
000334  f8bd0000          LDRH     r0,[sp,#0]            ;819
000338  b285              UXTH     r5,r0                 ;819
00033a  f8bd004c          LDRH     r0,[sp,#0x4c]         ;820
00033e  42a8              CMP      r0,r5                 ;820
000340  d001              BEQ      |L5.838|
000342  2001              MOVS     r0,#1                 ;822
000344  e66e              B        |L5.36|
                  |L5.838|
000346  4631              MOV      r1,r6                 ;825
000348  1c76              ADDS     r6,r6,#1              ;825
00034a  482f              LDR      r0,|L5.1032|
00034c  5c40              LDRB     r0,[r0,r1]            ;825
00034e  f88d0001          STRB     r0,[sp,#1]            ;825
000352  4631              MOV      r1,r6                 ;826
000354  1c76              ADDS     r6,r6,#1              ;826
000356  482c              LDR      r0,|L5.1032|
000358  5c40              LDRB     r0,[r0,r1]            ;826
00035a  f88d0000          STRB     r0,[sp,#0]            ;826
00035e  f8bd0000          LDRH     r0,[sp,#0]            ;827
000362  f8bd104e          LDRH     r1,[sp,#0x4e]         ;827
000366  4288              CMP      r0,r1                 ;827
000368  d001              BEQ      |L5.878|
00036a  2001              MOVS     r0,#1                 ;829
00036c  e65a              B        |L5.36|
                  |L5.878|
00036e  e07a              B        |L5.1126|
                  |L5.880|
000370  4631              MOV      r1,r6                 ;834
000372  1c76              ADDS     r6,r6,#1              ;834
000374  4824              LDR      r0,|L5.1032|
000376  5c40              LDRB     r0,[r0,r1]            ;834
000378  f88d0001          STRB     r0,[sp,#1]            ;834
00037c  4631              MOV      r1,r6                 ;835
00037e  1c76              ADDS     r6,r6,#1              ;835
000380  4821              LDR      r0,|L5.1032|
000382  5c40              LDRB     r0,[r0,r1]            ;835
000384  f88d0000          STRB     r0,[sp,#0]            ;835
000388  f8bd0000          LDRH     r0,[sp,#0]            ;836
00038c  b285              UXTH     r5,r0                 ;836
00038e  f8bd004c          LDRH     r0,[sp,#0x4c]         ;837
000392  42a8              CMP      r0,r5                 ;837
000394  d001              BEQ      |L5.922|
000396  2001              MOVS     r0,#1                 ;839
000398  e644              B        |L5.36|
                  |L5.922|
00039a  4631              MOV      r1,r6                 ;842
00039c  1c76              ADDS     r6,r6,#1              ;842
00039e  481a              LDR      r0,|L5.1032|
0003a0  5c40              LDRB     r0,[r0,r1]            ;842
0003a2  f88d0001          STRB     r0,[sp,#1]            ;842
0003a6  4631              MOV      r1,r6                 ;843
0003a8  1c76              ADDS     r6,r6,#1              ;843
0003aa  4817              LDR      r0,|L5.1032|
0003ac  5c40              LDRB     r0,[r0,r1]            ;843
0003ae  f88d0000          STRB     r0,[sp,#0]            ;843
0003b2  e058              B        |L5.1126|
                  |L5.948|
0003b4  4631              MOV      r1,r6                 ;847
0003b6  1c76              ADDS     r6,r6,#1              ;847
0003b8  4813              LDR      r0,|L5.1032|
0003ba  5c40              LDRB     r0,[r0,r1]            ;847
0003bc  f88d0001          STRB     r0,[sp,#1]            ;847
0003c0  4631              MOV      r1,r6                 ;848
0003c2  1c76              ADDS     r6,r6,#1              ;848
0003c4  4810              LDR      r0,|L5.1032|
0003c6  5c40              LDRB     r0,[r0,r1]            ;848
0003c8  f88d0000          STRB     r0,[sp,#0]            ;848
0003cc  f8bd0000          LDRH     r0,[sp,#0]            ;849
0003d0  b285              UXTH     r5,r0                 ;849
0003d2  f8bd004c          LDRH     r0,[sp,#0x4c]         ;850
0003d6  42a8              CMP      r0,r5                 ;850
0003d8  d001              BEQ      |L5.990|
0003da  2001              MOVS     r0,#1                 ;852
0003dc  e622              B        |L5.36|
                  |L5.990|
0003de  4631              MOV      r1,r6                 ;855
0003e0  1c76              ADDS     r6,r6,#1              ;855
0003e2  4809              LDR      r0,|L5.1032|
0003e4  5c40              LDRB     r0,[r0,r1]            ;855
0003e6  f88d0001          STRB     r0,[sp,#1]            ;855
0003ea  4631              MOV      r1,r6                 ;856
0003ec  1c76              ADDS     r6,r6,#1              ;856
0003ee  4806              LDR      r0,|L5.1032|
0003f0  5c40              LDRB     r0,[r0,r1]            ;856
0003f2  f88d0000          STRB     r0,[sp,#0]            ;856
0003f6  f8bd0000          LDRH     r0,[sp,#0]            ;857
0003fa  f8bd104e          LDRH     r1,[sp,#0x4e]         ;857
0003fe  4288              CMP      r0,r1                 ;857
000400  d004              BEQ      |L5.1036|
000402  2001              MOVS     r0,#1                 ;859
000404  e60e              B        |L5.36|
000406  0000              DCW      0x0000
                  |L5.1032|
                          DCD      UART485RxDat
                  |L5.1036|
00040c  e02b              B        |L5.1126|
                  |L5.1038|
00040e  4631              MOV      r1,r6                 ;864
000410  1c76              ADDS     r6,r6,#1              ;864
000412  4823              LDR      r0,|L5.1184|
000414  5c40              LDRB     r0,[r0,r1]            ;864
000416  f88d0001          STRB     r0,[sp,#1]            ;864
00041a  4631              MOV      r1,r6                 ;865
00041c  1c76              ADDS     r6,r6,#1              ;865
00041e  4820              LDR      r0,|L5.1184|
000420  5c40              LDRB     r0,[r0,r1]            ;865
000422  f88d0000          STRB     r0,[sp,#0]            ;865
000426  f8bd0000          LDRH     r0,[sp,#0]            ;866
00042a  b285              UXTH     r5,r0                 ;866
00042c  f8bd004c          LDRH     r0,[sp,#0x4c]         ;867
000430  42a8              CMP      r0,r5                 ;867
000432  d001              BEQ      |L5.1080|
000434  2001              MOVS     r0,#1                 ;869
000436  e5f5              B        |L5.36|
                  |L5.1080|
000438  4631              MOV      r1,r6                 ;872
00043a  1c76              ADDS     r6,r6,#1              ;872
00043c  4818              LDR      r0,|L5.1184|
00043e  5c40              LDRB     r0,[r0,r1]            ;872
000440  f88d0001          STRB     r0,[sp,#1]            ;872
000444  4631              MOV      r1,r6                 ;873
000446  1c76              ADDS     r6,r6,#1              ;873
000448  4815              LDR      r0,|L5.1184|
00044a  5c40              LDRB     r0,[r0,r1]            ;873
00044c  f88d0000          STRB     r0,[sp,#0]            ;873
000450  f8bd0000          LDRH     r0,[sp,#0]            ;874
000454  f8bd104e          LDRH     r1,[sp,#0x4e]         ;874
000458  4288              CMP      r0,r1                 ;874
00045a  d001              BEQ      |L5.1120|
00045c  2001              MOVS     r0,#1                 ;876
00045e  e5e1              B        |L5.36|
                  |L5.1120|
000460  e001              B        |L5.1126|
                  |L5.1122|
000462  9807              LDR      r0,[sp,#0x1c]         ;880
000464  e5de              B        |L5.36|
                  |L5.1126|
000466  bf00              NOP                            ;727
000468  4631              MOV      r1,r6                 ;882
00046a  480d              LDR      r0,|L5.1184|
00046c  f7fffffe          BL       calCRC16_modbus
000470  9003              STR      r0,[sp,#0xc]          ;882
000472  4630              MOV      r0,r6                 ;883
000474  1c71              ADDS     r1,r6,#1              ;883
000476  b28e              UXTH     r6,r1                 ;883
000478  4909              LDR      r1,|L5.1184|
00047a  5c08              LDRB     r0,[r1,r0]            ;883
00047c  f88d0001          STRB     r0,[sp,#1]            ;883
000480  4630              MOV      r0,r6                 ;884
000482  1c71              ADDS     r1,r6,#1              ;884
000484  b28e              UXTH     r6,r1                 ;884
000486  4906              LDR      r1,|L5.1184|
000488  5c08              LDRB     r0,[r1,r0]            ;884
00048a  f88d0000          STRB     r0,[sp,#0]            ;884
00048e  f8bd1000          LDRH     r1,[sp,#0]            ;885
000492  9803              LDR      r0,[sp,#0xc]          ;885
000494  4281              CMP      r1,r0                 ;885
000496  d001              BEQ      |L5.1180|
000498  2001              MOVS     r0,#1                 ;887
00049a  e5c3              B        |L5.36|
                  |L5.1180|
00049c  9807              LDR      r0,[sp,#0x1c]         ;889
00049e  e5c1              B        |L5.36|
;;;891    
                          ENDP

                  |L5.1184|
                          DCD      UART485RxDat

                          AREA ||i.UART485_MbMt_req||, CODE, READONLY, ALIGN=2

                  UART485_MbMt_req PROC
;;;496    ***************************************************************/
;;;497    uint16_t UART485_MbMt_req(_CMD Cmd,UART485_PDU *Pdu)
000000  b40f              PUSH     {r0-r3}
;;;498    {
000002  e92d4ff0          PUSH     {r4-r11,lr}
000006  b085              SUB      sp,sp,#0x14
000008  f8dd9054          LDR      r9,[sp,#0x54]
;;;499    	uint8_t ID_Code,FuncCode,chr;
;;;500    	uint16_t SbytAddr,Sshft,EAddr,Eshft;
;;;501    	uint16_t Tcnt;
;;;502    	uint32_t i,m;
;;;503    	uDAT16 D16;
;;;504    	uDAT32 D32;
;;;505    
;;;506    	memset(UART485Sentdat,0,UART485_RXBUFLEN);
00000c  f44f7100          MOV      r1,#0x200
000010  48fe              LDR      r0,|L6.1036|
000012  f7fffffe          BL       __aeabi_memclr
;;;507    	Tcnt=0;						
000016  2400              MOVS     r4,#0
;;;508    	ID_Code=Cmd.slave;               
000018  f8bd0038          LDRH     r0,[sp,#0x38]
00001c  b2c0              UXTB     r0,r0
00001e  9004              STR      r0,[sp,#0x10]
;;;509    	UART485Sentdat[Tcnt++]=ID_Code;
000020  4622              MOV      r2,r4
000022  1c64              ADDS     r4,r4,#1
000024  48f9              LDR      r0,|L6.1036|
000026  9904              LDR      r1,[sp,#0x10]
000028  5481              STRB     r1,[r0,r2]
;;;510    	FuncCode=Cmd.func;                
00002a  f8bd003a          LDRH     r0,[sp,#0x3a]
00002e  b2c0              UXTB     r0,r0
000030  9003              STR      r0,[sp,#0xc]
;;;511    	UART485Sentdat[Tcnt++]=FuncCode;
000032  4622              MOV      r2,r4
000034  1c64              ADDS     r4,r4,#1
000036  48f5              LDR      r0,|L6.1036|
000038  9903              LDR      r1,[sp,#0xc]
00003a  5481              STRB     r1,[r0,r2]
;;;512    	
;;;513    	switch(FuncCode)
00003c  9803              LDR      r0,[sp,#0xc]
00003e  2805              CMP      r0,#5
000040  d07e              BEQ      |L6.320|
000042  dc08              BGT      |L6.86|
000044  2801              CMP      r0,#1
000046  d00d              BEQ      |L6.100|
000048  2802              CMP      r0,#2
00004a  d028              BEQ      |L6.158|
00004c  2803              CMP      r0,#3
00004e  d043              BEQ      |L6.216|
000050  2804              CMP      r0,#4
                  |L6.82|
000052  d176              BNE      |L6.322|
000054  e05d              B        |L6.274|
                  |L6.86|
000056  2806              CMP      r0,#6
000058  d074              BEQ      |L6.324|
00005a  280f              CMP      r0,#0xf
00005c  d073              BEQ      |L6.326|
00005e  2810              CMP      r0,#0x10
000060  d1f7              BNE      |L6.82|
000062  e172              B        |L6.842|
                  |L6.100|
;;;514    	{
;;;515    			case MB_BITCOIL_RD:
;;;516    				D16.d16=Cmd.addr+UART485_BITCOIL_BADDR;
000064  f8bd003c          LDRH     r0,[sp,#0x3c]
000068  9001              STR      r0,[sp,#4]
;;;517    				UART485Sentdat[Tcnt++]=D16.d8.Hi;
00006a  f89d2005          LDRB     r2,[sp,#5]
00006e  4621              MOV      r1,r4
000070  1c64              ADDS     r4,r4,#1
000072  48e6              LDR      r0,|L6.1036|
000074  5442              STRB     r2,[r0,r1]
;;;518    				UART485Sentdat[Tcnt++]=D16.d8.Lo;
000076  f89d2004          LDRB     r2,[sp,#4]
00007a  4621              MOV      r1,r4
00007c  1c64              ADDS     r4,r4,#1
00007e  5442              STRB     r2,[r0,r1]
;;;519    				D16.d16=Cmd.cnt;
000080  f8bd003e          LDRH     r0,[sp,#0x3e]
000084  9001              STR      r0,[sp,#4]
;;;520    				UART485Sentdat[Tcnt++]=D16.d8.Hi;
000086  f89d2005          LDRB     r2,[sp,#5]
00008a  4621              MOV      r1,r4
00008c  1c64              ADDS     r4,r4,#1
00008e  48df              LDR      r0,|L6.1036|
000090  5442              STRB     r2,[r0,r1]
;;;521    				UART485Sentdat[Tcnt++]=D16.d8.Lo;
000092  f89d2004          LDRB     r2,[sp,#4]
000096  4621              MOV      r1,r4
000098  1c64              ADDS     r4,r4,#1
00009a  5442              STRB     r2,[r0,r1]
;;;522    				break;
00009c  e19a              B        |L6.980|
                  |L6.158|
;;;523    
;;;524    			case MB_BITINP_RD:
;;;525    				D16.d16=Cmd.addr+UART485_BITINP_BADDR;
00009e  f8bd003c          LDRH     r0,[sp,#0x3c]
0000a2  9001              STR      r0,[sp,#4]
;;;526    				UART485Sentdat[Tcnt++]=D16.d8.Hi;
0000a4  f89d2005          LDRB     r2,[sp,#5]
0000a8  4621              MOV      r1,r4
0000aa  1c64              ADDS     r4,r4,#1
0000ac  48d7              LDR      r0,|L6.1036|
0000ae  5442              STRB     r2,[r0,r1]
;;;527    				UART485Sentdat[Tcnt++]=D16.d8.Lo;
0000b0  f89d2004          LDRB     r2,[sp,#4]
0000b4  4621              MOV      r1,r4
0000b6  1c64              ADDS     r4,r4,#1
0000b8  5442              STRB     r2,[r0,r1]
;;;528    				D16.d16=Cmd.cnt;
0000ba  f8bd003e          LDRH     r0,[sp,#0x3e]
0000be  9001              STR      r0,[sp,#4]
;;;529    				UART485Sentdat[Tcnt++]=D16.d8.Hi;
0000c0  f89d2005          LDRB     r2,[sp,#5]
0000c4  4621              MOV      r1,r4
0000c6  1c64              ADDS     r4,r4,#1
0000c8  48d0              LDR      r0,|L6.1036|
0000ca  5442              STRB     r2,[r0,r1]
;;;530    				UART485Sentdat[Tcnt++]=D16.d8.Lo;
0000cc  f89d2004          LDRB     r2,[sp,#4]
0000d0  4621              MOV      r1,r4
0000d2  1c64              ADDS     r4,r4,#1
0000d4  5442              STRB     r2,[r0,r1]
;;;531    				break;
0000d6  e17d              B        |L6.980|
                  |L6.216|
;;;532    
;;;533    			case MB_REGHOLD_RD:
;;;534    				D16.d16=Cmd.addr+UART485_REGHOLD_BADDR;
0000d8  f8bd003c          LDRH     r0,[sp,#0x3c]
0000dc  9001              STR      r0,[sp,#4]
;;;535    				UART485Sentdat[Tcnt++]=D16.d8.Hi;
0000de  f89d2005          LDRB     r2,[sp,#5]
0000e2  4621              MOV      r1,r4
0000e4  1c64              ADDS     r4,r4,#1
0000e6  48c9              LDR      r0,|L6.1036|
0000e8  5442              STRB     r2,[r0,r1]
;;;536    				UART485Sentdat[Tcnt++]=D16.d8.Lo;
0000ea  f89d2004          LDRB     r2,[sp,#4]
0000ee  4621              MOV      r1,r4
0000f0  1c64              ADDS     r4,r4,#1
0000f2  5442              STRB     r2,[r0,r1]
;;;537    				D16.d16=Cmd.cnt;
0000f4  f8bd003e          LDRH     r0,[sp,#0x3e]
0000f8  9001              STR      r0,[sp,#4]
;;;538    				UART485Sentdat[Tcnt++]=D16.d8.Hi;
0000fa  f89d2005          LDRB     r2,[sp,#5]
0000fe  4621              MOV      r1,r4
000100  1c64              ADDS     r4,r4,#1
000102  48c2              LDR      r0,|L6.1036|
000104  5442              STRB     r2,[r0,r1]
;;;539    				UART485Sentdat[Tcnt++]=D16.d8.Lo;
000106  f89d2004          LDRB     r2,[sp,#4]
00010a  4621              MOV      r1,r4
00010c  1c64              ADDS     r4,r4,#1
00010e  5442              STRB     r2,[r0,r1]
;;;540    				break;
000110  e160              B        |L6.980|
                  |L6.274|
;;;541    
;;;542    			case MB_REGINP_RD:
;;;543    				D16.d16=Cmd.addr+UART485_REGINP_BADDR;
000112  f8bd003c          LDRH     r0,[sp,#0x3c]
000116  9001              STR      r0,[sp,#4]
;;;544    				UART485Sentdat[Tcnt++]=D16.d8.Hi;
000118  f89d2005          LDRB     r2,[sp,#5]
00011c  4621              MOV      r1,r4
00011e  1c64              ADDS     r4,r4,#1
000120  48ba              LDR      r0,|L6.1036|
000122  5442              STRB     r2,[r0,r1]
;;;545    				UART485Sentdat[Tcnt++]=D16.d8.Lo;
000124  f89d2004          LDRB     r2,[sp,#4]
000128  4621              MOV      r1,r4
00012a  1c64              ADDS     r4,r4,#1
00012c  5442              STRB     r2,[r0,r1]
;;;546    				D16.d16=Cmd.cnt;
00012e  f8bd003e          LDRH     r0,[sp,#0x3e]
000132  9001              STR      r0,[sp,#4]
;;;547    				UART485Sentdat[Tcnt++]=D16.d8.Hi;
000134  f89d2005          LDRB     r2,[sp,#5]
000138  4621              MOV      r1,r4
00013a  1c64              ADDS     r4,r4,#1
00013c  48b3              LDR      r0,|L6.1036|
00013e  e003              B        |L6.328|
                  |L6.320|
000140  e009              B        |L6.342|
                  |L6.322|
000142  e146              B        |L6.978|
                  |L6.324|
000144  e043              B        |L6.462|
                  |L6.326|
000146  e063              B        |L6.528|
                  |L6.328|
000148  5442              STRB     r2,[r0,r1]
;;;548    				UART485Sentdat[Tcnt++]=D16.d8.Lo;
00014a  f89d2004          LDRB     r2,[sp,#4]
00014e  4621              MOV      r1,r4
000150  1c64              ADDS     r4,r4,#1
000152  5442              STRB     r2,[r0,r1]
;;;549    				break;
000154  e13e              B        |L6.980|
                  |L6.342|
;;;550    
;;;551    			case MB_BITCOIL_WT:
;;;552    				D16.d16=Cmd.addr+UART485_BITCOIL_BADDR;
000156  f8bd003c          LDRH     r0,[sp,#0x3c]
00015a  9001              STR      r0,[sp,#4]
;;;553    				UART485Sentdat[Tcnt++]=D16.d8.Hi;
00015c  f89d2005          LDRB     r2,[sp,#5]
000160  4621              MOV      r1,r4
000162  1c64              ADDS     r4,r4,#1
000164  48a9              LDR      r0,|L6.1036|
000166  5442              STRB     r2,[r0,r1]
;;;554    				UART485Sentdat[Tcnt++]=D16.d8.Lo;
000168  f89d2004          LDRB     r2,[sp,#4]
00016c  4621              MOV      r1,r4
00016e  1c64              ADDS     r4,r4,#1
000170  5442              STRB     r2,[r0,r1]
;;;555    				SbytAddr=Cmd.addr/D16BITNUM;
000172  f8bd003c          LDRH     r0,[sp,#0x3c]
000176  17c1              ASRS     r1,r0,#31
000178  eb007111          ADD      r1,r0,r1,LSR #28
00017c  110f              ASRS     r7,r1,#4
;;;556    				Sshft=Cmd.addr%D16BITNUM;
00017e  f8bd003c          LDRH     r0,[sp,#0x3c]
000182  17c1              ASRS     r1,r0,#31
000184  eb007111          ADD      r1,r0,r1,LSR #28
000188  1109              ASRS     r1,r1,#4
00018a  eba01101          SUB      r1,r0,r1,LSL #4
00018e  fa1ffa81          UXTH     r10,r1
;;;557    				D16.d16=0xFFFF;
000192  f64f70ff          MOV      r0,#0xffff
000196  9001              STR      r0,[sp,#4]
;;;558    				if(Pdu->BitCoil[SbytAddr]&BIT(Sshft))
000198  f1090004          ADD      r0,r9,#4
00019c  f8300017          LDRH     r0,[r0,r7,LSL #1]
0001a0  2101              MOVS     r1,#1
0001a2  fa01f10a          LSL      r1,r1,r10
0001a6  4208              TST      r0,r1
0001a8  d003              BEQ      |L6.434|
;;;559    				{
;;;560    					D16.d16=0xFF00; 
0001aa  f44f407f          MOV      r0,#0xff00
0001ae  9001              STR      r0,[sp,#4]
0001b0  e001              B        |L6.438|
                  |L6.434|
;;;561    				}
;;;562    				else
;;;563    				{
;;;564    					D16.d16=0x0000; 
0001b2  2000              MOVS     r0,#0
0001b4  9001              STR      r0,[sp,#4]
                  |L6.438|
;;;565    				}
;;;566    				UART485Sentdat[Tcnt++]=D16.d8.Hi;
0001b6  f89d2005          LDRB     r2,[sp,#5]
0001ba  4621              MOV      r1,r4
0001bc  1c64              ADDS     r4,r4,#1
0001be  4893              LDR      r0,|L6.1036|
0001c0  5442              STRB     r2,[r0,r1]
;;;567    				UART485Sentdat[Tcnt++]=D16.d8.Lo;
0001c2  f89d2004          LDRB     r2,[sp,#4]
0001c6  4621              MOV      r1,r4
0001c8  1c64              ADDS     r4,r4,#1
0001ca  5442              STRB     r2,[r0,r1]
;;;568    				break;
0001cc  e102              B        |L6.980|
                  |L6.462|
;;;569    
;;;570    			case MB_REGHOLD_WT:
;;;571    				D16.d16=Cmd.addr+UART485_REGHOLD_BADDR;
0001ce  f8bd003c          LDRH     r0,[sp,#0x3c]
0001d2  9001              STR      r0,[sp,#4]
;;;572    				UART485Sentdat[Tcnt++]=D16.d8.Hi;
0001d4  f89d2005          LDRB     r2,[sp,#5]
0001d8  4621              MOV      r1,r4
0001da  1c64              ADDS     r4,r4,#1
0001dc  488b              LDR      r0,|L6.1036|
0001de  5442              STRB     r2,[r0,r1]
;;;573    				UART485Sentdat[Tcnt++]=D16.d8.Lo;
0001e0  f89d2004          LDRB     r2,[sp,#4]
0001e4  4621              MOV      r1,r4
0001e6  1c64              ADDS     r4,r4,#1
0001e8  5442              STRB     r2,[r0,r1]
;;;574    				//D16.d16=Counts;
;;;575    				D16.d16=Pdu->RegHold[Cmd.addr];
0001ea  f8bd103c          LDRH     r1,[sp,#0x3c]
0001ee  f109000c          ADD      r0,r9,#0xc
0001f2  f8300011          LDRH     r0,[r0,r1,LSL #1]
0001f6  9001              STR      r0,[sp,#4]
;;;576    				UART485Sentdat[Tcnt++]=D16.d8.Hi;
0001f8  f89d2005          LDRB     r2,[sp,#5]
0001fc  4621              MOV      r1,r4
0001fe  1c64              ADDS     r4,r4,#1
000200  4882              LDR      r0,|L6.1036|
000202  5442              STRB     r2,[r0,r1]
;;;577    				UART485Sentdat[Tcnt++]=D16.d8.Lo;
000204  f89d2004          LDRB     r2,[sp,#4]
000208  4621              MOV      r1,r4
00020a  1c64              ADDS     r4,r4,#1
00020c  5442              STRB     r2,[r0,r1]
;;;578    				break;
00020e  e0e1              B        |L6.980|
                  |L6.528|
;;;579    
;;;580    			case MB_MULTICOIL_WT:
;;;581    				D16.d16=Cmd.addr+UART485_BITCOIL_BADDR;
000210  f8bd003c          LDRH     r0,[sp,#0x3c]
000214  9001              STR      r0,[sp,#4]
;;;582    				UART485Sentdat[Tcnt++]=D16.d8.Hi;
000216  f89d2005          LDRB     r2,[sp,#5]
00021a  4621              MOV      r1,r4
00021c  1c64              ADDS     r4,r4,#1
00021e  487b              LDR      r0,|L6.1036|
000220  5442              STRB     r2,[r0,r1]
;;;583    				UART485Sentdat[Tcnt++]=D16.d8.Lo;
000222  f89d2004          LDRB     r2,[sp,#4]
000226  4621              MOV      r1,r4
000228  1c64              ADDS     r4,r4,#1
00022a  5442              STRB     r2,[r0,r1]
;;;584    				D16.d16=Cmd.cnt;
00022c  f8bd003e          LDRH     r0,[sp,#0x3e]
000230  9001              STR      r0,[sp,#4]
;;;585    				UART485Sentdat[Tcnt++]=D16.d8.Hi;
000232  f89d2005          LDRB     r2,[sp,#5]
000236  4621              MOV      r1,r4
000238  1c64              ADDS     r4,r4,#1
00023a  4874              LDR      r0,|L6.1036|
00023c  5442              STRB     r2,[r0,r1]
;;;586    				UART485Sentdat[Tcnt++]=D16.d8.Lo;
00023e  f89d2004          LDRB     r2,[sp,#4]
000242  4621              MOV      r1,r4
000244  1c64              ADDS     r4,r4,#1
000246  5442              STRB     r2,[r0,r1]
;;;587    				
;;;588    				if((Cmd.cnt%8)==0)				
000248  f8bd003e          LDRH     r0,[sp,#0x3e]
00024c  17c1              ASRS     r1,r0,#31
00024e  eb007151          ADD      r1,r0,r1,LSR #29
000252  10c9              ASRS     r1,r1,#3
000254  ebb001c1          SUBS     r1,r0,r1,LSL #3
000258  d108              BNE      |L6.620|
;;;589    				{
;;;590    					UART485Sentdat[Tcnt++]=(Cmd.cnt>>3);
00025a  f8bd003e          LDRH     r0,[sp,#0x3e]
00025e  f3c002c7          UBFX     r2,r0,#3,#8
000262  4621              MOV      r1,r4
000264  1c64              ADDS     r4,r4,#1
000266  4869              LDR      r0,|L6.1036|
000268  5442              STRB     r2,[r0,r1]
00026a  e009              B        |L6.640|
                  |L6.620|
;;;591    				}
;;;592    				else
;;;593    				{
;;;594    					UART485Sentdat[Tcnt++]=(Cmd.cnt>>3)+1;
00026c  f8bd003e          LDRH     r0,[sp,#0x3e]
000270  2101              MOVS     r1,#1
000272  eb0100e0          ADD      r0,r1,r0,ASR #3
000276  b2c2              UXTB     r2,r0
000278  4621              MOV      r1,r4
00027a  1c64              ADDS     r4,r4,#1
00027c  4863              LDR      r0,|L6.1036|
00027e  5442              STRB     r2,[r0,r1]
                  |L6.640|
;;;595    				}
;;;596    				
;;;597    				EAddr=Cmd.addr+Cmd.cnt;
000280  f8bd003c          LDRH     r0,[sp,#0x3c]
000284  f8bd103e          LDRH     r1,[sp,#0x3e]
000288  4408              ADD      r0,r0,r1
00028a  b285              UXTH     r5,r0
;;;598    				
;;;599    				SbytAddr=Cmd.addr/D16BITNUM;
00028c  f8bd003c          LDRH     r0,[sp,#0x3c]
000290  17c1              ASRS     r1,r0,#31
000292  eb007111          ADD      r1,r0,r1,LSR #28
000296  110f              ASRS     r7,r1,#4
;;;600    				Sshft=Cmd.addr%D16BITNUM;
000298  f8bd003c          LDRH     r0,[sp,#0x3c]
00029c  17c1              ASRS     r1,r0,#31
00029e  eb007111          ADD      r1,r0,r1,LSR #28
0002a2  1109              ASRS     r1,r1,#4
0002a4  eba01101          SUB      r1,r0,r1,LSL #4
0002a8  fa1ffa81          UXTH     r10,r1
;;;601    				
;;;602    				Eshft=EAddr%D8BITNUM;
0002ac  4628              MOV      r0,r5
0002ae  17e9              ASRS     r1,r5,#31
0002b0  eb057151          ADD      r1,r5,r1,LSR #29
0002b4  10c9              ASRS     r1,r1,#3
0002b6  eba501c1          SUB      r1,r5,r1,LSL #3
0002ba  fa1ffb81          UXTH     r11,r1
;;;603    				for(i=SbytAddr,m=Cmd.addr;m<EAddr;i++)
0002be  463e              MOV      r6,r7
0002c0  f8bd803c          LDRH     r8,[sp,#0x3c]
0002c4  e029              B        |L6.794|
                  |L6.710|
;;;604    				{
;;;605    					D32.d16[0].d16=Pdu->BitCoil[i];
0002c6  f1090004          ADD      r0,r9,#4
0002ca  f8300016          LDRH     r0,[r0,r6,LSL #1]
0002ce  f8ad0000          STRH     r0,[sp,#0]
;;;606    					D32.d16[1].d16=Pdu->BitCoil[i+1];
0002d2  f1090004          ADD      r0,r9,#4
0002d6  1c71              ADDS     r1,r6,#1
0002d8  f8300011          LDRH     r0,[r0,r1,LSL #1]
0002dc  f8ad0002          STRH     r0,[sp,#2]
;;;607    					D32.d32=D32.d32>>Sshft;
0002e0  9800              LDR      r0,[sp,#0]
0002e2  fa20f00a          LSR      r0,r0,r10
0002e6  9000              STR      r0,[sp,#0]
;;;608    					UART485Sentdat[Tcnt++]=D32.d16[0].d8.Hi;
0002e8  f89d2001          LDRB     r2,[sp,#1]
0002ec  4620              MOV      r0,r4
0002ee  1c61              ADDS     r1,r4,#1
0002f0  b28c              UXTH     r4,r1
0002f2  4946              LDR      r1,|L6.1036|
0002f4  540a              STRB     r2,[r1,r0]
;;;609    					m+=8;
0002f6  f1080808          ADD      r8,r8,#8
;;;610    					if(m>=EAddr) break;
0002fa  45a8              CMP      r8,r5
0002fc  d300              BCC      |L6.768|
0002fe  e00e              B        |L6.798|
                  |L6.768|
;;;611    					UART485Sentdat[Tcnt++]=D32.d16[0].d8.Lo;
000300  f89d2000          LDRB     r2,[sp,#0]
000304  4620              MOV      r0,r4
000306  1c61              ADDS     r1,r4,#1
000308  b28c              UXTH     r4,r1
00030a  4940              LDR      r1,|L6.1036|
00030c  540a              STRB     r2,[r1,r0]
;;;612    					m+=8;
00030e  f1080808          ADD      r8,r8,#8
;;;613    					if(m>=EAddr) break;
000312  45a8              CMP      r8,r5
000314  d300              BCC      |L6.792|
000316  e002              B        |L6.798|
                  |L6.792|
000318  1c76              ADDS     r6,r6,#1              ;603
                  |L6.794|
00031a  45a8              CMP      r8,r5                 ;603
00031c  d3d3              BCC      |L6.710|
                  |L6.798|
00031e  bf00              NOP                            ;610
;;;614    				}
;;;615    				if(Eshft!=0)
000320  f1bb0f00          CMP      r11,#0
000324  d010              BEQ      |L6.840|
;;;616    				{
;;;617    					chr=(UART485Sentdat[Tcnt-1]&0xFF)<<(D8BITNUM-Eshft);
000326  1e60              SUBS     r0,r4,#1
000328  4938              LDR      r1,|L6.1036|
00032a  5c08              LDRB     r0,[r1,r0]
00032c  f1cb0108          RSB      r1,r11,#8
000330  4088              LSLS     r0,r0,r1
000332  b2c0              UXTB     r0,r0
000334  9002              STR      r0,[sp,#8]
;;;618    					chr=(chr&0xFF)>>(D8BITNUM-Eshft);
000336  f1cb0108          RSB      r1,r11,#8
00033a  9802              LDR      r0,[sp,#8]
00033c  4108              ASRS     r0,r0,r1
00033e  9002              STR      r0,[sp,#8]
;;;619    					UART485Sentdat[Tcnt-1]=chr;
000340  1e61              SUBS     r1,r4,#1
000342  4a32              LDR      r2,|L6.1036|
000344  9802              LDR      r0,[sp,#8]
000346  5450              STRB     r0,[r2,r1]
                  |L6.840|
;;;620    				}
;;;621    				break;
000348  e044              B        |L6.980|
                  |L6.842|
;;;622    
;;;623    			case MB_MULTIREG_WT:
;;;624    				D16.d16=Cmd.addr+UART485_REGHOLD_BADDR;
00034a  f8bd003c          LDRH     r0,[sp,#0x3c]
00034e  9001              STR      r0,[sp,#4]
;;;625    				UART485Sentdat[Tcnt++]=D16.d8.Hi;
000350  f89d2005          LDRB     r2,[sp,#5]
000354  4621              MOV      r1,r4
000356  1c64              ADDS     r4,r4,#1
000358  482c              LDR      r0,|L6.1036|
00035a  5442              STRB     r2,[r0,r1]
;;;626    				UART485Sentdat[Tcnt++]=D16.d8.Lo;
00035c  f89d2004          LDRB     r2,[sp,#4]
000360  4621              MOV      r1,r4
000362  1c64              ADDS     r4,r4,#1
000364  5442              STRB     r2,[r0,r1]
;;;627    				D16.d16=Cmd.cnt;
000366  f8bd003e          LDRH     r0,[sp,#0x3e]
00036a  9001              STR      r0,[sp,#4]
;;;628    				UART485Sentdat[Tcnt++]=D16.d8.Hi;
00036c  f89d2005          LDRB     r2,[sp,#5]
000370  4621              MOV      r1,r4
000372  1c64              ADDS     r4,r4,#1
000374  4825              LDR      r0,|L6.1036|
000376  5442              STRB     r2,[r0,r1]
;;;629    				UART485Sentdat[Tcnt++]=D16.d8.Lo;
000378  f89d2004          LDRB     r2,[sp,#4]
00037c  4621              MOV      r1,r4
00037e  1c64              ADDS     r4,r4,#1
000380  5442              STRB     r2,[r0,r1]
;;;630    				UART485Sentdat[Tcnt++]=Cmd.cnt*2;
000382  f8bd003e          LDRH     r0,[sp,#0x3e]
000386  0640              LSLS     r0,r0,#25
000388  0e02              LSRS     r2,r0,#24
00038a  4621              MOV      r1,r4
00038c  1c64              ADDS     r4,r4,#1
00038e  481f              LDR      r0,|L6.1036|
000390  5442              STRB     r2,[r0,r1]
;;;631    
;;;632    				EAddr=Cmd.addr+Cmd.cnt;
000392  f8bd003c          LDRH     r0,[sp,#0x3c]
000396  f8bd103e          LDRH     r1,[sp,#0x3e]
00039a  4408              ADD      r0,r0,r1
00039c  b285              UXTH     r5,r0
;;;633    
;;;634    				for(i=Cmd.addr;i<EAddr;i++)
00039e  f8bd603c          LDRH     r6,[sp,#0x3c]
0003a2  e013              B        |L6.972|
                  |L6.932|
;;;635    				{
;;;636    					D16.d16=Pdu->RegHold[i];
0003a4  f109000c          ADD      r0,r9,#0xc
0003a8  f8300016          LDRH     r0,[r0,r6,LSL #1]
0003ac  9001              STR      r0,[sp,#4]
;;;637    					UART485Sentdat[Tcnt++]=D16.d8.Hi;
0003ae  f89d2005          LDRB     r2,[sp,#5]
0003b2  4620              MOV      r0,r4
0003b4  1c61              ADDS     r1,r4,#1
0003b6  b28c              UXTH     r4,r1
0003b8  4914              LDR      r1,|L6.1036|
0003ba  540a              STRB     r2,[r1,r0]
;;;638    					UART485Sentdat[Tcnt++]=D16.d8.Lo;
0003bc  f89d2004          LDRB     r2,[sp,#4]
0003c0  4620              MOV      r0,r4
0003c2  1c61              ADDS     r1,r4,#1
0003c4  b28c              UXTH     r4,r1
0003c6  4911              LDR      r1,|L6.1036|
0003c8  540a              STRB     r2,[r1,r0]
0003ca  1c76              ADDS     r6,r6,#1              ;634
                  |L6.972|
0003cc  42ae              CMP      r6,r5                 ;634
0003ce  d3e9              BCC      |L6.932|
;;;639    				}
;;;640    				break;
0003d0  e000              B        |L6.980|
                  |L6.978|
;;;641    			default:
;;;642    				break;
0003d2  bf00              NOP      
                  |L6.980|
0003d4  bf00              NOP                            ;522
;;;643    	}
;;;644    	D16.d16=calCRC16_modbus(UART485Sentdat,Tcnt);
0003d6  4621              MOV      r1,r4
0003d8  480c              LDR      r0,|L6.1036|
0003da  f7fffffe          BL       calCRC16_modbus
0003de  9001              STR      r0,[sp,#4]
;;;645    	UART485Sentdat[Tcnt++]=D16.d8.Hi;
0003e0  f89d2005          LDRB     r2,[sp,#5]
0003e4  4620              MOV      r0,r4
0003e6  1c61              ADDS     r1,r4,#1
0003e8  b28c              UXTH     r4,r1
0003ea  4908              LDR      r1,|L6.1036|
0003ec  540a              STRB     r2,[r1,r0]
;;;646    	UART485Sentdat[Tcnt++]=D16.d8.Lo;
0003ee  f89d2004          LDRB     r2,[sp,#4]
0003f2  4620              MOV      r0,r4
0003f4  1c61              ADDS     r1,r4,#1
0003f6  b28c              UXTH     r4,r1
0003f8  4904              LDR      r1,|L6.1036|
0003fa  540a              STRB     r2,[r1,r0]
;;;647    
;;;648    	UART485_SEND(UART485Sentdat,Tcnt)
0003fc  4622              MOV      r2,r4
0003fe  2000              MOVS     r0,#0
000400  f7fffffe          BL       comSendBuf
;;;649    	
;;;650    	return FuncCode;
000404  9803              LDR      r0,[sp,#0xc]
;;;651    }
000406  b005              ADD      sp,sp,#0x14
000408  e002              B        |L6.1040|
00040a  0000              DCW      0x0000
                  |L6.1036|
                          DCD      UART485Sentdat
                  |L6.1040|
000410  e8bd0ff0          POP      {r4-r11}
000414  f85dfb14          LDR      pc,[sp],#0x14
;;;652    
                          ENDP


                          AREA ||i.UART485_MbSl_rep||, CODE, READONLY, ALIGN=2

                  UART485_MbSl_rep PROC
;;;897    ***************************************************************/
;;;898    uint16_t UART485_MbSl_rep(_CMD Cmd,UART485_PDU *Pdu)
000000  b40f              PUSH     {r0-r3}
;;;899    {
000002  e92d4ff0          PUSH     {r4-r11,lr}
000006  b08f              SUB      sp,sp,#0x3c
000008  f8ddb07c          LDR      r11,[sp,#0x7c]
;;;900    	uint8_t    ID_Code,FuncCode,ErrCode,chr;
;;;901    	uint16_t   SAddr,SbytAddr,Sshft,EAddr,Eshft,ByteCnt,CRCValue;
;;;902    	uint16_t   Rcnt,Tcnt,Counts;
;;;903    	uint32_t   i,j,m,n,tmp1,tmp2;
;;;904    	uDAT16   	 D16;
;;;905    	uDAT32   	 D32;
;;;906    
;;;907      memset(UART485Sentdat,0,UART485_TXBUFLEN);
00000c  f44f7100          MOV      r1,#0x200
000010  48fe              LDR      r0,|L7.1036|
000012  f7fffffe          BL       __aeabi_memclr
;;;908    	Rcnt=Tcnt=0;
000016  2000              MOVS     r0,#0
000018  4605              MOV      r5,r0
00001a  4606              MOV      r6,r0
;;;909    	ErrCode=0;
00001c  900c              STR      r0,[sp,#0x30]
;;;910    	
;;;911    	ID_Code=UART485RxDat[Rcnt++];
00001e  4635              MOV      r5,r6
000020  1c76              ADDS     r6,r6,#1
000022  48fb              LDR      r0,|L7.1040|
000024  5d40              LDRB     r0,[r0,r5]
000026  900e              STR      r0,[sp,#0x38]
;;;912    	//广播地址为0xff
;;;913    	if((ID_Code!=Cmd.slave)&&(ID_Code != 0xff))	return 0;
000028  f8bd1060          LDRH     r1,[sp,#0x60]
00002c  980e              LDR      r0,[sp,#0x38]
00002e  4281              CMP      r1,r0
000030  d008              BEQ      |L7.68|
000032  980e              LDR      r0,[sp,#0x38]
000034  28ff              CMP      r0,#0xff
000036  d005              BEQ      |L7.68|
000038  2000              MOVS     r0,#0
                  |L7.58|
;;;914    	else				UART485Sentdat[Tcnt++]=ID_Code;
;;;915    	
;;;916    	FuncCode=UART485RxDat[Rcnt++];
;;;917    	UART485Sentdat[Tcnt++]=FuncCode;                 
;;;918    	
;;;919    	switch(FuncCode)
;;;920    	{
;;;921    			case MB_BITCOIL_RD:
;;;922    				D16.d8.Hi=UART485RxDat[Rcnt++];
;;;923    				D16.d8.Lo=UART485RxDat[Rcnt++];
;;;924    				SAddr=D16.d16;
;;;925    				if(SAddr>MAX3_BITCOIL)		 
;;;926    				{
;;;927    					ErrCode=0x02;
;;;928    					break;
;;;929    				}
;;;930    				D16.d8.Hi=UART485RxDat[Rcnt++];
;;;931    				D16.d8.Lo=UART485RxDat[Rcnt++];
;;;932    				Counts=D16.d16;
;;;933    				if(Counts>MBMAX_BITCOIL_RD)	
;;;934    				{
;;;935    					ErrCode=0x03;
;;;936    					break;
;;;937    				}
;;;938    				tmp1=Counts>>3;
;;;939    				tmp2=Counts-(tmp1<<3);
;;;940    				if(tmp2==0)
;;;941    				{
;;;942    					UART485Sentdat[Tcnt++]=tmp1;
;;;943    				}
;;;944    				else
;;;945    				{
;;;946    					UART485Sentdat[Tcnt++]=tmp1+1;
;;;947    				}
;;;948    				
;;;949    				EAddr=SAddr+Counts;
;;;950    				if(EAddr>MAX3_BITCOIL)				
;;;951    				{
;;;952    					ErrCode=0x02;
;;;953    					break;
;;;954    				}
;;;955    				
;;;956    				SbytAddr=SAddr/D16BITNUM;
;;;957    				Sshft=SAddr%D16BITNUM;
;;;958    
;;;959    				Eshft=EAddr%D8BITNUM;
;;;960    				for(i=SbytAddr,m=SAddr;m<EAddr;i++)
;;;961    				{
;;;962    					D32.d16[0].d16=Pdu->BitCoil[i];
;;;963    					D32.d16[1].d16=Pdu->BitCoil[i+1];
;;;964    					D32.d32=D32.d32>>Sshft;
;;;965    					UART485Sentdat[Tcnt++]=D32.d16[0].d8.Lo;
;;;966    					m+=8;
;;;967    					if(m>=EAddr) break;
;;;968    					UART485Sentdat[Tcnt++]=D32.d16[0].d8.Hi;
;;;969    					m+=8;
;;;970    					if(m>=EAddr) break;
;;;971    				}
;;;972    
;;;973    				chr=(UART485Sentdat[Tcnt-1]&0xFF)<<(D8BITNUM-Eshft);
;;;974    				chr=(chr&0xFF)>>(D8BITNUM-Eshft);
;;;975    				UART485Sentdat[Tcnt-1]=chr;
;;;976    				break;
;;;977    
;;;978    			case MB_BITINP_RD:
;;;979    				D16.d8.Hi=UART485RxDat[Rcnt++];
;;;980    				D16.d8.Lo=UART485RxDat[Rcnt++];
;;;981    				SAddr=D16.d16;
;;;982    				if(SAddr>MAX3_BITINP)			
;;;983    				{
;;;984    					ErrCode=0x02;
;;;985    					break;
;;;986    				}
;;;987    				D16.d8.Hi=UART485RxDat[Rcnt++];
;;;988    				D16.d8.Lo=UART485RxDat[Rcnt++];
;;;989    				Counts=D16.d16;
;;;990    				if(Counts>MBMAX_BITINP_RD)		
;;;991    				{
;;;992    					ErrCode=0x03;
;;;993    					break;
;;;994    				}
;;;995    				tmp1=Counts>>3;
;;;996    				tmp2=Counts-(tmp1<<3);
;;;997    				if(tmp2==0)
;;;998    				{
;;;999    					UART485Sentdat[Tcnt++]=tmp1;
;;;1000   				}
;;;1001   				else
;;;1002   				{
;;;1003   					UART485Sentdat[Tcnt++]=tmp1+1;
;;;1004   				}
;;;1005   				EAddr=SAddr+Counts;
;;;1006   				if(EAddr>MAX3_BITINP)					
;;;1007   				{
;;;1008   					ErrCode=0x02;
;;;1009   					break;
;;;1010   				}
;;;1011   				
;;;1012   				SbytAddr=SAddr/D16BITNUM;
;;;1013   				Sshft=SAddr%D16BITNUM;
;;;1014   				
;;;1015   				
;;;1016   				Eshft=EAddr%D8BITNUM;
;;;1017   				for(i=SbytAddr,m=SAddr;m<EAddr;i++)
;;;1018   				{
;;;1019   					D32.d16[0].d16=Pdu->BitInp[i];
;;;1020   					D32.d16[1].d16=Pdu->BitInp[i+1];
;;;1021   					D32.d32=D32.d32>>Sshft;
;;;1022   					UART485Sentdat[Tcnt++]=D32.d16[0].d8.Lo;
;;;1023   					m+=8;
;;;1024   					if(m>=EAddr) break;
;;;1025   					UART485Sentdat[Tcnt++]=D32.d16[0].d8.Hi;
;;;1026   					m+=8;
;;;1027   					if(m>=EAddr) break;
;;;1028   				}
;;;1029   				chr=(UART485Sentdat[Tcnt-1]&0xFF)<<(D8BITNUM-Eshft);
;;;1030   				chr=(chr&0xFF)>>(D8BITNUM-Eshft);
;;;1031   				UART485Sentdat[Tcnt-1]=chr;
;;;1032   				break;
;;;1033   			case MB_REGHOLD_RD:
;;;1034   				D16.d8.Hi=UART485RxDat[Rcnt++];
;;;1035   				D16.d8.Lo=UART485RxDat[Rcnt++];
;;;1036   				SAddr=D16.d16;
;;;1037   				if(SAddr>MAX3_REGHOLD)					  
;;;1038   				{
;;;1039   					ErrCode=0x02;
;;;1040   					break;
;;;1041   				}
;;;1042   				D16.d8.Hi=UART485RxDat[Rcnt++];
;;;1043   				D16.d8.Lo=UART485RxDat[Rcnt++];
;;;1044   				Counts=D16.d16;
;;;1045   				if(Counts>MBMAX_REGHOLD_RD)		
;;;1046   				{
;;;1047   					ErrCode=0x03;
;;;1048   					break;
;;;1049   				}
;;;1050   				UART485Sentdat[Tcnt++]=Counts*2;		
;;;1051   				EAddr=SAddr+Counts;
;;;1052   				if(EAddr>MAX3_REGHOLD)				
;;;1053   				{
;;;1054   					ErrCode=0x02;
;;;1055   					break;
;;;1056   				}
;;;1057   				for(i=SAddr;i<EAddr;i++)
;;;1058   				{
;;;1059   					D16.d16=Pdu->RegHold[i];
;;;1060   				  UART485Sentdat[Tcnt++]=D16.d8.Hi;
;;;1061   					UART485Sentdat[Tcnt++]=D16.d8.Lo;
;;;1062   				}
;;;1063   				break;
;;;1064   			case MB_REGINP_RD:
;;;1065   				D16.d8.Hi=UART485RxDat[Rcnt++];
;;;1066   				D16.d8.Lo=UART485RxDat[Rcnt++];
;;;1067   				SAddr=D16.d16;
;;;1068   				if(SAddr>MAX3_REGINP)				
;;;1069   				{
;;;1070   					ErrCode=0x02;
;;;1071   					break;
;;;1072   				}
;;;1073   				D16.d8.Hi=UART485RxDat[Rcnt++];
;;;1074   				D16.d8.Lo=UART485RxDat[Rcnt++];
;;;1075   				Counts=D16.d16;
;;;1076   				if(Counts>MBMAX_REGINP_RD)		
;;;1077   				{
;;;1078   					ErrCode=0x03;
;;;1079   					break;
;;;1080   				}
;;;1081   				UART485Sentdat[Tcnt++]=Counts*2;				
;;;1082   				EAddr=SAddr+Counts;
;;;1083   				if(EAddr>MAX3_REGINP)			
;;;1084   				{
;;;1085   					ErrCode=0x02;
;;;1086   					break;
;;;1087   				}
;;;1088   				for(i=SAddr;i<EAddr;i++)
;;;1089   				{
;;;1090   					D16.d16=Pdu->RegInp[i];
;;;1091   				  UART485Sentdat[Tcnt++]=D16.d8.Hi;
;;;1092   					UART485Sentdat[Tcnt++]=D16.d8.Lo;
;;;1093   				
;;;1094   				}
;;;1095   				break;
;;;1096   			case MB_BITCOIL_WT:
;;;1097   				D16.d8.Hi=UART485RxDat[Rcnt++];
;;;1098   				D16.d8.Lo=UART485RxDat[Rcnt++];
;;;1099   				SAddr=D16.d16;
;;;1100   				if(SAddr>MAX3_BITCOIL)				
;;;1101   				{
;;;1102   					ErrCode=0x02;
;;;1103   					break;
;;;1104   				}
;;;1105   				UART485Sentdat[Tcnt++]=D16.d8.Hi;
;;;1106   				UART485Sentdat[Tcnt++]=D16.d8.Lo;
;;;1107   				
;;;1108   				SbytAddr=SAddr/D16BITNUM;
;;;1109   				Sshft=SAddr%D16BITNUM;
;;;1110   
;;;1111   				D16.d8.Hi=UART485RxDat[Rcnt++];
;;;1112   				D16.d8.Lo=UART485RxDat[Rcnt++];
;;;1113   				if(D16.d16==MB_OFF)
;;;1114   				{
;;;1115   					Pdu->BitCoil[SbytAddr]&=~ BIT(Sshft);
;;;1116   				}
;;;1117   				else if(D16.d16==MB_ON)
;;;1118   				{
;;;1119   					Pdu->BitCoil[SbytAddr]|=BIT(Sshft);
;;;1120   				}
;;;1121   				else	
;;;1122   				{
;;;1123   					ErrCode=0x03;
;;;1124   					break;
;;;1125   				}
;;;1126   				UART485Sentdat[Tcnt++]=D16.d8.Hi;
;;;1127   				UART485Sentdat[Tcnt++]=D16.d8.Lo;
;;;1128   				
;;;1129   				break;
;;;1130   			case MB_REGHOLD_WT:
;;;1131   				D16.d8.Hi=UART485RxDat[Rcnt++];
;;;1132   				D16.d8.Lo=UART485RxDat[Rcnt++];
;;;1133   				SAddr=D16.d16;
;;;1134   				if(SAddr>MAX3_REGHOLD)				
;;;1135   				{
;;;1136   					ErrCode=0x02;
;;;1137   					break;
;;;1138   				}
;;;1139   				UART485Sentdat[Tcnt++]=D16.d8.Hi;
;;;1140   				UART485Sentdat[Tcnt++]=D16.d8.Lo;
;;;1141   				
;;;1142   				D16.d8.Hi=UART485RxDat[Rcnt++];
;;;1143   				D16.d8.Lo=UART485RxDat[Rcnt++];
;;;1144   				Pdu->RegHold[SAddr]=D16.d16;
;;;1145   
;;;1146   				UART485Sentdat[Tcnt++]=D16.d8.Hi;
;;;1147   				UART485Sentdat[Tcnt++]=D16.d8.Lo;
;;;1148   				
;;;1149   				break;
;;;1150   			case MB_MULTICOIL_WT:
;;;1151   				D16.d8.Hi=UART485RxDat[Rcnt++];
;;;1152   				D16.d8.Lo=UART485RxDat[Rcnt++];
;;;1153   				SAddr=D16.d16;
;;;1154   				if(SAddr>MAX3_BITCOIL)					
;;;1155   				{
;;;1156   					ErrCode=0x02;
;;;1157   					break;
;;;1158   				}
;;;1159   				UART485Sentdat[Tcnt++]=D16.d8.Hi;
;;;1160   				UART485Sentdat[Tcnt++]=D16.d8.Lo;
;;;1161   				
;;;1162   				D16.d8.Hi=UART485RxDat[Rcnt++];
;;;1163   				D16.d8.Lo=UART485RxDat[Rcnt++];
;;;1164   				Counts=D16.d16;
;;;1165   				if(Counts>MBMAX_BITCOIL_WT)			
;;;1166   				{
;;;1167   					ErrCode=0x03;
;;;1168   					break;
;;;1169   				}
;;;1170   				UART485Sentdat[Tcnt++]=D16.d8.Hi;
;;;1171   				UART485Sentdat[Tcnt++]=D16.d8.Lo;
;;;1172   				
;;;1173   				EAddr=SAddr+Counts;
;;;1174   				if(EAddr>MAX3_BITCOIL)				
;;;1175   				{
;;;1176   					ErrCode=0x02;
;;;1177   					break;
;;;1178   				}
;;;1179   				
;;;1180   				SbytAddr=SAddr/D16BITNUM;
;;;1181   				Sshft=SAddr%D16BITNUM;
;;;1182   				
;;;1183   				Eshft=EAddr%D8BITNUM;
;;;1184   
;;;1185   				ByteCnt=UART485RxDat[Rcnt++];
;;;1186   				if((Counts%8)==0)						
;;;1187   				{
;;;1188   					if(ByteCnt!=(Counts>>3))
;;;1189   
;;;1190   					{
;;;1191   						ErrCode=0x03;
;;;1192   						break;
;;;1193   					}
;;;1194   				}
;;;1195   				else
;;;1196   				{
;;;1197   					if(ByteCnt!=((Counts>>3)+1))
;;;1198   					{
;;;1199   						ErrCode=0x03;
;;;1200   						break;
;;;1201   					}
;;;1202   				}
;;;1203   				for(i=SbytAddr,j=Sshft,n=D8BITNUM,m=SAddr;m<EAddr;j++,n++,m++)
;;;1204   				{
;;;1205   					if(n>=D8BITNUM)
;;;1206   					{
;;;1207   						n=0;
;;;1208   						D16.d16=UART485RxDat[Rcnt++];
;;;1209   					}
;;;1210   					tmp1=D16.d16>>n;
;;;1211   					if(j>=D16BITNUM)
;;;1212   					{
;;;1213   						i++;
;;;1214   						j=0;
;;;1215   					}
;;;1216   					if(tmp1&0x01)
;;;1217   					{
;;;1218   						Pdu->BitCoil[i]|=BIT(j);
;;;1219   					}
;;;1220   					else
;;;1221   					{
;;;1222   						Pdu->BitCoil[i]&=~ BIT(j);
;;;1223   					}
;;;1224   				}
;;;1225   				break;
;;;1226   			case MB_MULTIREG_WT:
;;;1227   				D16.d8.Hi=UART485RxDat[Rcnt++];
;;;1228   				D16.d8.Lo=UART485RxDat[Rcnt++];
;;;1229   				SAddr=D16.d16;
;;;1230   				if(SAddr>MAX3_REGHOLD)					
;;;1231   				{
;;;1232   					ErrCode=0x02;
;;;1233   					break;
;;;1234   				}
;;;1235   				UART485Sentdat[Tcnt++]=D16.d8.Hi;
;;;1236   				UART485Sentdat[Tcnt++]=D16.d8.Lo;
;;;1237   
;;;1238   				D16.d8.Hi=UART485RxDat[Rcnt++];
;;;1239   				D16.d8.Lo=UART485RxDat[Rcnt++];
;;;1240   				Counts=D16.d16;
;;;1241   				if(Counts>MBMAX_REGHOLD_WT)		
;;;1242   				{
;;;1243   					ErrCode=0x03;
;;;1244   					break;
;;;1245   				}
;;;1246   				UART485Sentdat[Tcnt++]=D16.d8.Hi;
;;;1247   				UART485Sentdat[Tcnt++]=D16.d8.Lo;
;;;1248   				
;;;1249   				EAddr=SAddr+Counts;
;;;1250   				if(EAddr>MAX3_REGHOLD)			
;;;1251   				{
;;;1252   					ErrCode=0x02;
;;;1253   					break;
;;;1254   				}
;;;1255   				
;;;1256   				ByteCnt=UART485RxDat[Rcnt++];
;;;1257   				if(ByteCnt!=Counts*2)					
;;;1258   				{
;;;1259   					ErrCode=0x03;
;;;1260   					break;
;;;1261   				}			
;;;1262   				for(i=SAddr;i<EAddr;i++)
;;;1263   				{
;;;1264   				  D16.d8.Hi=UART485RxDat[Rcnt++];
;;;1265   					D16.d8.Lo=UART485RxDat[Rcnt++];
;;;1266   					Pdu->RegHold[i]=D16.d16;
;;;1267   				}
;;;1268   				break;
;;;1269   			  default:
;;;1270   					ErrCode=MB_ERR_FUNCODE;
;;;1271   				break;
;;;1272   	}
;;;1273   	CRCValue=calCRC16_modbus(UART485RxDat, Rcnt);	
;;;1274   	D16.d8.Hi=UART485RxDat[Rcnt++];
;;;1275   	D16.d8.Lo=UART485RxDat[Rcnt++];
;;;1276   	memset(UART485RxDat,0,Rcnt);
;;;1277   	if(CRCValue!=D16.d16)				
;;;1278   	{
;;;1279   	   return 0;
;;;1280   	}
;;;1281   		
;;;1282   	if(ErrCode!=0)	                  
;;;1283   	{
;;;1284   		UART485Sentdat[1]+=0x80;
;;;1285   		UART485Sentdat[Tcnt++]=ErrCode;
;;;1286   	}
;;;1287   	D16.d16=calCRC16_modbus(UART485Sentdat,Tcnt);
;;;1288   	UART485Sentdat[Tcnt++]=D16.d8.Hi;
;;;1289   	UART485Sentdat[Tcnt++]=D16.d8.Lo;
;;;1290   	
;;;1291   	UART485_SEND(UART485Sentdat,Tcnt)
;;;1292   	
;;;1293   	if(ErrCode!=0)	                   
;;;1294   	{
;;;1295   	  return 0;
;;;1296   	}
;;;1297   	else
;;;1298   	{
;;;1299   	 return FuncCode;
;;;1300   	}	
;;;1301   }
00003a  b00f              ADD      sp,sp,#0x3c
00003c  e8bd0ff0          POP      {r4-r11}
000040  f85dfb14          LDR      pc,[sp],#0x14
                  |L7.68|
000044  462a              MOV      r2,r5                 ;914
000046  1c6d              ADDS     r5,r5,#1              ;914
000048  48f0              LDR      r0,|L7.1036|
00004a  990e              LDR      r1,[sp,#0x38]         ;914
00004c  5481              STRB     r1,[r0,r2]            ;914
00004e  4631              MOV      r1,r6                 ;916
000050  1c76              ADDS     r6,r6,#1              ;916
000052  48ef              LDR      r0,|L7.1040|
000054  5c40              LDRB     r0,[r0,r1]            ;916
000056  900d              STR      r0,[sp,#0x34]         ;916
000058  462a              MOV      r2,r5                 ;917
00005a  1c6d              ADDS     r5,r5,#1              ;917
00005c  49eb              LDR      r1,|L7.1036|
00005e  980d              LDR      r0,[sp,#0x34]         ;917
000060  5488              STRB     r0,[r1,r2]            ;917
000062  980d              LDR      r0,[sp,#0x34]         ;919
000064  2805              CMP      r0,#5                 ;919
000066  d073              BEQ      |L7.336|
000068  dc08              BGT      |L7.124|
00006a  2801              CMP      r0,#1                 ;919
00006c  d00d              BEQ      |L7.138|
00006e  2802              CMP      r0,#2                 ;919
000070  d06f              BEQ      |L7.338|
000072  2803              CMP      r0,#3                 ;919
000074  d06e              BEQ      |L7.340|
000076  2804              CMP      r0,#4                 ;919
                  |L7.120|
000078  d16d              BNE      |L7.342|
00007a  e1a4              B        |L7.966|
                  |L7.124|
00007c  2806              CMP      r0,#6                 ;919
00007e  d06b              BEQ      |L7.344|
000080  280f              CMP      r0,#0xf               ;919
000082  d06a              BEQ      |L7.346|
000084  2810              CMP      r0,#0x10              ;919
000086  d1f7              BNE      |L7.120|
000088  e35e              B        |L7.1864|
                  |L7.138|
00008a  4631              MOV      r1,r6                 ;922
00008c  1c76              ADDS     r6,r6,#1              ;922
00008e  48e0              LDR      r0,|L7.1040|
000090  5c40              LDRB     r0,[r0,r1]            ;922
000092  f88d0005          STRB     r0,[sp,#5]            ;922
000096  4631              MOV      r1,r6                 ;923
000098  1c76              ADDS     r6,r6,#1              ;923
00009a  48dd              LDR      r0,|L7.1040|
00009c  5c40              LDRB     r0,[r0,r1]            ;923
00009e  f88d0004          STRB     r0,[sp,#4]            ;923
0000a2  f8bd4004          LDRH     r4,[sp,#4]            ;924
0000a6  2c20              CMP      r4,#0x20              ;925
0000a8  dd02              BLE      |L7.176|
0000aa  2002              MOVS     r0,#2                 ;927
0000ac  900c              STR      r0,[sp,#0x30]         ;927
0000ae  e3be              B        |L7.2094|
                  |L7.176|
0000b0  4631              MOV      r1,r6                 ;930
0000b2  1c76              ADDS     r6,r6,#1              ;930
0000b4  48d6              LDR      r0,|L7.1040|
0000b6  5c40              LDRB     r0,[r0,r1]            ;930
0000b8  f88d0005          STRB     r0,[sp,#5]            ;930
0000bc  4631              MOV      r1,r6                 ;931
0000be  1c76              ADDS     r6,r6,#1              ;931
0000c0  48d3              LDR      r0,|L7.1040|
0000c2  5c40              LDRB     r0,[r0,r1]            ;931
0000c4  f88d0004          STRB     r0,[sp,#4]            ;931
0000c8  f8bd8004          LDRH     r8,[sp,#4]            ;932
0000cc  f5b86ffa          CMP      r8,#0x7d0             ;933
0000d0  dd02              BLE      |L7.216|
0000d2  2003              MOVS     r0,#3                 ;935
0000d4  900c              STR      r0,[sp,#0x30]         ;935
0000d6  e3aa              B        |L7.2094|
                  |L7.216|
0000d8  ea4f00e8          ASR      r0,r8,#3              ;938
0000dc  9003              STR      r0,[sp,#0xc]          ;938
0000de  9803              LDR      r0,[sp,#0xc]          ;939
0000e0  eba800c0          SUB      r0,r8,r0,LSL #3       ;939
0000e4  9002              STR      r0,[sp,#8]            ;939
0000e6  9802              LDR      r0,[sp,#8]            ;940
0000e8  b930              CBNZ     r0,|L7.248|
0000ea  9803              LDR      r0,[sp,#0xc]          ;942
0000ec  b2c2              UXTB     r2,r0                 ;942
0000ee  4629              MOV      r1,r5                 ;942
0000f0  1c6d              ADDS     r5,r5,#1              ;942
0000f2  48c6              LDR      r0,|L7.1036|
0000f4  5442              STRB     r2,[r0,r1]            ;942
0000f6  e006              B        |L7.262|
                  |L7.248|
0000f8  9803              LDR      r0,[sp,#0xc]          ;946
0000fa  1c40              ADDS     r0,r0,#1              ;946
0000fc  b2c2              UXTB     r2,r0                 ;946
0000fe  4629              MOV      r1,r5                 ;946
000100  1c6d              ADDS     r5,r5,#1              ;946
000102  48c2              LDR      r0,|L7.1036|
000104  5442              STRB     r2,[r0,r1]            ;946
                  |L7.262|
000106  eb040008          ADD      r0,r4,r8              ;949
00010a  b287              UXTH     r7,r0                 ;949
00010c  2f20              CMP      r7,#0x20              ;950
00010e  dd02              BLE      |L7.278|
000110  2002              MOVS     r0,#2                 ;952
000112  900c              STR      r0,[sp,#0x30]         ;952
000114  e38b              B        |L7.2094|
                  |L7.278|
000116  4620              MOV      r0,r4                 ;956
000118  17e1              ASRS     r1,r4,#31             ;956
00011a  eb047111          ADD      r1,r4,r1,LSR #28      ;956
00011e  ea4f1921          ASR      r9,r1,#4              ;956
000122  f8cd9028          STR      r9,[sp,#0x28]         ;956
000126  17e1              ASRS     r1,r4,#31             ;957
000128  eb047111          ADD      r1,r4,r1,LSR #28      ;957
00012c  1109              ASRS     r1,r1,#4              ;957
00012e  eba41101          SUB      r1,r4,r1,LSL #4       ;957
000132  b289              UXTH     r1,r1                 ;957
000134  9109              STR      r1,[sp,#0x24]         ;957
000136  4638              MOV      r0,r7                 ;959
000138  17f9              ASRS     r1,r7,#31             ;959
00013a  eb077151          ADD      r1,r7,r1,LSR #29      ;959
00013e  10c9              ASRS     r1,r1,#3              ;959
000140  eba701c1          SUB      r1,r7,r1,LSL #3       ;959
000144  b289              UXTH     r1,r1                 ;959
000146  9108              STR      r1,[sp,#0x20]         ;959
000148  f8dd9028          LDR      r9,[sp,#0x28]         ;960
00014c  46a2              MOV      r10,r4                ;960
00014e  e031              B        |L7.436|
                  |L7.336|
000150  e18f              B        |L7.1138|
                  |L7.338|
000152  e046              B        |L7.482|
                  |L7.340|
000154  e0e7              B        |L7.806|
                  |L7.342|
000156  e367              B        |L7.2088|
                  |L7.344|
000158  e1f9              B        |L7.1358|
                  |L7.346|
00015a  e234              B        |L7.1478|
                  |L7.348|
00015c  f10b0004          ADD      r0,r11,#4             ;962
000160  f8300019          LDRH     r0,[r0,r9,LSL #1]     ;962
000164  f8ad0000          STRH     r0,[sp,#0]            ;962
000168  f10b0004          ADD      r0,r11,#4             ;963
00016c  f1090101          ADD      r1,r9,#1              ;963
000170  f8300011          LDRH     r0,[r0,r1,LSL #1]     ;963
000174  f8ad0002          STRH     r0,[sp,#2]            ;963
000178  9909              LDR      r1,[sp,#0x24]         ;964
00017a  9800              LDR      r0,[sp,#0]            ;964
00017c  40c8              LSRS     r0,r0,r1              ;964
00017e  9000              STR      r0,[sp,#0]            ;964
000180  f89d2000          LDRB     r2,[sp,#0]            ;965
000184  4628              MOV      r0,r5                 ;965
000186  1c69              ADDS     r1,r5,#1              ;965
000188  b28d              UXTH     r5,r1                 ;965
00018a  49a0              LDR      r1,|L7.1036|
00018c  540a              STRB     r2,[r1,r0]            ;965
00018e  f10a0a08          ADD      r10,r10,#8            ;966
000192  45ba              CMP      r10,r7                ;967
000194  d300              BCC      |L7.408|
000196  e00f              B        |L7.440|
                  |L7.408|
000198  f89d2001          LDRB     r2,[sp,#1]            ;968
00019c  4628              MOV      r0,r5                 ;968
00019e  1c69              ADDS     r1,r5,#1              ;968
0001a0  b28d              UXTH     r5,r1                 ;968
0001a2  499a              LDR      r1,|L7.1036|
0001a4  540a              STRB     r2,[r1,r0]            ;968
0001a6  f10a0a08          ADD      r10,r10,#8            ;969
0001aa  45ba              CMP      r10,r7                ;970
0001ac  d300              BCC      |L7.432|
0001ae  e003              B        |L7.440|
                  |L7.432|
0001b0  f1090901          ADD      r9,r9,#1              ;960
                  |L7.436|
0001b4  45ba              CMP      r10,r7                ;960
0001b6  d3d1              BCC      |L7.348|
                  |L7.440|
0001b8  bf00              NOP                            ;967
0001ba  1e68              SUBS     r0,r5,#1              ;973
0001bc  4993              LDR      r1,|L7.1036|
0001be  5c08              LDRB     r0,[r1,r0]            ;973
0001c0  9908              LDR      r1,[sp,#0x20]         ;973
0001c2  f1c10108          RSB      r1,r1,#8              ;973
0001c6  4088              LSLS     r0,r0,r1              ;973
0001c8  b2c0              UXTB     r0,r0                 ;973
0001ca  900b              STR      r0,[sp,#0x2c]         ;973
0001cc  9908              LDR      r1,[sp,#0x20]         ;974
0001ce  f1c10108          RSB      r1,r1,#8              ;974
0001d2  980b              LDR      r0,[sp,#0x2c]         ;974
0001d4  4108              ASRS     r0,r0,r1              ;974
0001d6  900b              STR      r0,[sp,#0x2c]         ;974
0001d8  1e69              SUBS     r1,r5,#1              ;975
0001da  4a8c              LDR      r2,|L7.1036|
0001dc  980b              LDR      r0,[sp,#0x2c]         ;975
0001de  5450              STRB     r0,[r2,r1]            ;975
0001e0  e325              B        |L7.2094|
                  |L7.482|
0001e2  4631              MOV      r1,r6                 ;979
0001e4  1c76              ADDS     r6,r6,#1              ;979
0001e6  488a              LDR      r0,|L7.1040|
0001e8  5c40              LDRB     r0,[r0,r1]            ;979
0001ea  f88d0005          STRB     r0,[sp,#5]            ;979
0001ee  4631              MOV      r1,r6                 ;980
0001f0  1c76              ADDS     r6,r6,#1              ;980
0001f2  4887              LDR      r0,|L7.1040|
0001f4  5c40              LDRB     r0,[r0,r1]            ;980
0001f6  f88d0004          STRB     r0,[sp,#4]            ;980
0001fa  f8bd4004          LDRH     r4,[sp,#4]            ;981
0001fe  2c20              CMP      r4,#0x20              ;982
000200  dd02              BLE      |L7.520|
000202  2002              MOVS     r0,#2                 ;984
000204  900c              STR      r0,[sp,#0x30]         ;984
000206  e312              B        |L7.2094|
                  |L7.520|
000208  4631              MOV      r1,r6                 ;987
00020a  1c76              ADDS     r6,r6,#1              ;987
00020c  4880              LDR      r0,|L7.1040|
00020e  5c40              LDRB     r0,[r0,r1]            ;987
000210  f88d0005          STRB     r0,[sp,#5]            ;987
000214  4631              MOV      r1,r6                 ;988
000216  1c76              ADDS     r6,r6,#1              ;988
000218  487d              LDR      r0,|L7.1040|
00021a  5c40              LDRB     r0,[r0,r1]            ;988
00021c  f88d0004          STRB     r0,[sp,#4]            ;988
000220  f8bd8004          LDRH     r8,[sp,#4]            ;989
000224  f5b86ffa          CMP      r8,#0x7d0             ;990
000228  dd02              BLE      |L7.560|
00022a  2003              MOVS     r0,#3                 ;992
00022c  900c              STR      r0,[sp,#0x30]         ;992
00022e  e2fe              B        |L7.2094|
                  |L7.560|
000230  ea4f00e8          ASR      r0,r8,#3              ;995
000234  9003              STR      r0,[sp,#0xc]          ;995
000236  9803              LDR      r0,[sp,#0xc]          ;996
000238  eba800c0          SUB      r0,r8,r0,LSL #3       ;996
00023c  9002              STR      r0,[sp,#8]            ;996
00023e  9802              LDR      r0,[sp,#8]            ;997
000240  b930              CBNZ     r0,|L7.592|
000242  9803              LDR      r0,[sp,#0xc]          ;999
000244  b2c2              UXTB     r2,r0                 ;999
000246  4629              MOV      r1,r5                 ;999
000248  1c6d              ADDS     r5,r5,#1              ;999
00024a  4870              LDR      r0,|L7.1036|
00024c  5442              STRB     r2,[r0,r1]            ;999
00024e  e006              B        |L7.606|
                  |L7.592|
000250  9803              LDR      r0,[sp,#0xc]          ;1003
000252  1c40              ADDS     r0,r0,#1              ;1003
000254  b2c2              UXTB     r2,r0                 ;1003
000256  4629              MOV      r1,r5                 ;1003
000258  1c6d              ADDS     r5,r5,#1              ;1003
00025a  486c              LDR      r0,|L7.1036|
00025c  5442              STRB     r2,[r0,r1]            ;1003
                  |L7.606|
00025e  eb040008          ADD      r0,r4,r8              ;1005
000262  b287              UXTH     r7,r0                 ;1005
000264  2f20              CMP      r7,#0x20              ;1006
000266  dd02              BLE      |L7.622|
000268  2002              MOVS     r0,#2                 ;1008
00026a  900c              STR      r0,[sp,#0x30]         ;1008
00026c  e2df              B        |L7.2094|
                  |L7.622|
00026e  4620              MOV      r0,r4                 ;1012
000270  17e1              ASRS     r1,r4,#31             ;1012
000272  eb047111          ADD      r1,r4,r1,LSR #28      ;1012
000276  ea4f1921          ASR      r9,r1,#4              ;1012
00027a  f8cd9028          STR      r9,[sp,#0x28]         ;1012
00027e  17e1              ASRS     r1,r4,#31             ;1013
000280  eb047111          ADD      r1,r4,r1,LSR #28      ;1013
000284  1109              ASRS     r1,r1,#4              ;1013
000286  eba41101          SUB      r1,r4,r1,LSL #4       ;1013
00028a  b289              UXTH     r1,r1                 ;1013
00028c  9109              STR      r1,[sp,#0x24]         ;1013
00028e  4638              MOV      r0,r7                 ;1016
000290  17f9              ASRS     r1,r7,#31             ;1016
000292  eb077151          ADD      r1,r7,r1,LSR #29      ;1016
000296  10c9              ASRS     r1,r1,#3              ;1016
000298  eba701c1          SUB      r1,r7,r1,LSL #3       ;1016
00029c  b289              UXTH     r1,r1                 ;1016
00029e  9108              STR      r1,[sp,#0x20]         ;1016
0002a0  f8dd9028          LDR      r9,[sp,#0x28]         ;1017
0002a4  46a2              MOV      r10,r4                ;1017
0002a6  e027              B        |L7.760|
                  |L7.680|
0002a8  f83b0019          LDRH     r0,[r11,r9,LSL #1]    ;1019
0002ac  f8ad0000          STRH     r0,[sp,#0]            ;1019
0002b0  f1090001          ADD      r0,r9,#1              ;1020
0002b4  f83b0010          LDRH     r0,[r11,r0,LSL #1]    ;1020
0002b8  f8ad0002          STRH     r0,[sp,#2]            ;1020
0002bc  9909              LDR      r1,[sp,#0x24]         ;1021
0002be  9800              LDR      r0,[sp,#0]            ;1021
0002c0  40c8              LSRS     r0,r0,r1              ;1021
0002c2  9000              STR      r0,[sp,#0]            ;1021
0002c4  f89d2000          LDRB     r2,[sp,#0]            ;1022
0002c8  4628              MOV      r0,r5                 ;1022
0002ca  1c69              ADDS     r1,r5,#1              ;1022
0002cc  b28d              UXTH     r5,r1                 ;1022
0002ce  494f              LDR      r1,|L7.1036|
0002d0  540a              STRB     r2,[r1,r0]            ;1022
0002d2  f10a0a08          ADD      r10,r10,#8            ;1023
0002d6  45ba              CMP      r10,r7                ;1024
0002d8  d300              BCC      |L7.732|
0002da  e00f              B        |L7.764|
                  |L7.732|
0002dc  f89d2001          LDRB     r2,[sp,#1]            ;1025
0002e0  4628              MOV      r0,r5                 ;1025
0002e2  1c69              ADDS     r1,r5,#1              ;1025
0002e4  b28d              UXTH     r5,r1                 ;1025
0002e6  4949              LDR      r1,|L7.1036|
0002e8  540a              STRB     r2,[r1,r0]            ;1025
0002ea  f10a0a08          ADD      r10,r10,#8            ;1026
0002ee  45ba              CMP      r10,r7                ;1027
0002f0  d300              BCC      |L7.756|
0002f2  e003              B        |L7.764|
                  |L7.756|
0002f4  f1090901          ADD      r9,r9,#1              ;1017
                  |L7.760|
0002f8  45ba              CMP      r10,r7                ;1017
0002fa  d3d5              BCC      |L7.680|
                  |L7.764|
0002fc  bf00              NOP                            ;1024
0002fe  1e68              SUBS     r0,r5,#1              ;1029
000300  4942              LDR      r1,|L7.1036|
000302  5c08              LDRB     r0,[r1,r0]            ;1029
000304  9908              LDR      r1,[sp,#0x20]         ;1029
000306  f1c10108          RSB      r1,r1,#8              ;1029
00030a  4088              LSLS     r0,r0,r1              ;1029
00030c  b2c0              UXTB     r0,r0                 ;1029
00030e  900b              STR      r0,[sp,#0x2c]         ;1029
000310  9908              LDR      r1,[sp,#0x20]         ;1030
000312  f1c10108          RSB      r1,r1,#8              ;1030
000316  980b              LDR      r0,[sp,#0x2c]         ;1030
000318  4108              ASRS     r0,r0,r1              ;1030
00031a  900b              STR      r0,[sp,#0x2c]         ;1030
00031c  1e69              SUBS     r1,r5,#1              ;1031
00031e  4a3b              LDR      r2,|L7.1036|
000320  980b              LDR      r0,[sp,#0x2c]         ;1031
000322  5450              STRB     r0,[r2,r1]            ;1031
000324  e283              B        |L7.2094|
                  |L7.806|
000326  4631              MOV      r1,r6                 ;1034
000328  1c76              ADDS     r6,r6,#1              ;1034
00032a  4839              LDR      r0,|L7.1040|
00032c  5c40              LDRB     r0,[r0,r1]            ;1034
00032e  f88d0005          STRB     r0,[sp,#5]            ;1034
000332  4631              MOV      r1,r6                 ;1035
000334  1c76              ADDS     r6,r6,#1              ;1035
000336  4836              LDR      r0,|L7.1040|
000338  5c40              LDRB     r0,[r0,r1]            ;1035
00033a  f88d0004          STRB     r0,[sp,#4]            ;1035
00033e  f8bd4004          LDRH     r4,[sp,#4]            ;1036
000342  2cc8              CMP      r4,#0xc8              ;1037
000344  dd02              BLE      |L7.844|
000346  2002              MOVS     r0,#2                 ;1039
000348  900c              STR      r0,[sp,#0x30]         ;1039
00034a  e270              B        |L7.2094|
                  |L7.844|
00034c  4631              MOV      r1,r6                 ;1042
00034e  1c76              ADDS     r6,r6,#1              ;1042
000350  482f              LDR      r0,|L7.1040|
000352  5c40              LDRB     r0,[r0,r1]            ;1042
000354  f88d0005          STRB     r0,[sp,#5]            ;1042
000358  4631              MOV      r1,r6                 ;1043
00035a  1c76              ADDS     r6,r6,#1              ;1043
00035c  482c              LDR      r0,|L7.1040|
00035e  5c40              LDRB     r0,[r0,r1]            ;1043
000360  f88d0004          STRB     r0,[sp,#4]            ;1043
000364  f8bd8004          LDRH     r8,[sp,#4]            ;1044
000368  f5b87f00          CMP      r8,#0x200             ;1045
00036c  dd02              BLE      |L7.884|
00036e  2003              MOVS     r0,#3                 ;1047
000370  900c              STR      r0,[sp,#0x30]         ;1047
000372  e25c              B        |L7.2094|
                  |L7.884|
000374  ea4f6048          LSL      r0,r8,#25             ;1050
000378  0e02              LSRS     r2,r0,#24             ;1050
00037a  4629              MOV      r1,r5                 ;1050
00037c  1c6d              ADDS     r5,r5,#1              ;1050
00037e  4823              LDR      r0,|L7.1036|
000380  5442              STRB     r2,[r0,r1]            ;1050
000382  eb040008          ADD      r0,r4,r8              ;1051
000386  b287              UXTH     r7,r0                 ;1051
000388  2fc8              CMP      r7,#0xc8              ;1052
00038a  dd02              BLE      |L7.914|
00038c  2002              MOVS     r0,#2                 ;1054
00038e  900c              STR      r0,[sp,#0x30]         ;1054
000390  e24d              B        |L7.2094|
                  |L7.914|
000392  46a1              MOV      r9,r4                 ;1057
000394  e014              B        |L7.960|
                  |L7.918|
000396  f10b000c          ADD      r0,r11,#0xc           ;1059
00039a  f8300019          LDRH     r0,[r0,r9,LSL #1]     ;1059
00039e  9001              STR      r0,[sp,#4]            ;1059
0003a0  f89d2005          LDRB     r2,[sp,#5]            ;1060
0003a4  4628              MOV      r0,r5                 ;1060
0003a6  1c69              ADDS     r1,r5,#1              ;1060
0003a8  b28d              UXTH     r5,r1                 ;1060
0003aa  4918              LDR      r1,|L7.1036|
0003ac  540a              STRB     r2,[r1,r0]            ;1060
0003ae  f89d2004          LDRB     r2,[sp,#4]            ;1061
0003b2  4628              MOV      r0,r5                 ;1061
0003b4  1c69              ADDS     r1,r5,#1              ;1061
0003b6  b28d              UXTH     r5,r1                 ;1061
0003b8  4914              LDR      r1,|L7.1036|
0003ba  540a              STRB     r2,[r1,r0]            ;1061
0003bc  f1090901          ADD      r9,r9,#1              ;1057
                  |L7.960|
0003c0  45b9              CMP      r9,r7                 ;1057
0003c2  d3e8              BCC      |L7.918|
0003c4  e233              B        |L7.2094|
                  |L7.966|
0003c6  4631              MOV      r1,r6                 ;1065
0003c8  1c76              ADDS     r6,r6,#1              ;1065
0003ca  4811              LDR      r0,|L7.1040|
0003cc  5c40              LDRB     r0,[r0,r1]            ;1065
0003ce  f88d0005          STRB     r0,[sp,#5]            ;1065
0003d2  4631              MOV      r1,r6                 ;1066
0003d4  1c76              ADDS     r6,r6,#1              ;1066
0003d6  480e              LDR      r0,|L7.1040|
0003d8  5c40              LDRB     r0,[r0,r1]            ;1066
0003da  f88d0004          STRB     r0,[sp,#4]            ;1066
0003de  f8bd4004          LDRH     r4,[sp,#4]            ;1067
0003e2  2c02              CMP      r4,#2                 ;1068
0003e4  dd02              BLE      |L7.1004|
0003e6  2002              MOVS     r0,#2                 ;1070
0003e8  900c              STR      r0,[sp,#0x30]         ;1070
0003ea  e220              B        |L7.2094|
                  |L7.1004|
0003ec  4631              MOV      r1,r6                 ;1073
0003ee  1c76              ADDS     r6,r6,#1              ;1073
0003f0  4807              LDR      r0,|L7.1040|
0003f2  5c40              LDRB     r0,[r0,r1]            ;1073
0003f4  f88d0005          STRB     r0,[sp,#5]            ;1073
0003f8  4631              MOV      r1,r6                 ;1074
0003fa  1c76              ADDS     r6,r6,#1              ;1074
0003fc  4804              LDR      r0,|L7.1040|
0003fe  5c40              LDRB     r0,[r0,r1]            ;1074
000400  f88d0004          STRB     r0,[sp,#4]            ;1074
000404  f8bd8004          LDRH     r8,[sp,#4]            ;1075
000408  e004              B        |L7.1044|
00040a  0000              DCW      0x0000
                  |L7.1036|
                          DCD      UART485Sentdat
                  |L7.1040|
                          DCD      UART485RxDat
                  |L7.1044|
000414  f5b87f00          CMP      r8,#0x200             ;1076
000418  dd02              BLE      |L7.1056|
00041a  2003              MOVS     r0,#3                 ;1078
00041c  900c              STR      r0,[sp,#0x30]         ;1078
00041e  e206              B        |L7.2094|
                  |L7.1056|
000420  ea4f6048          LSL      r0,r8,#25             ;1081
000424  0e02              LSRS     r2,r0,#24             ;1081
000426  4629              MOV      r1,r5                 ;1081
000428  1c6d              ADDS     r5,r5,#1              ;1081
00042a  48fd              LDR      r0,|L7.2080|
00042c  5442              STRB     r2,[r0,r1]            ;1081
00042e  eb040008          ADD      r0,r4,r8              ;1082
000432  b287              UXTH     r7,r0                 ;1082
000434  2f02              CMP      r7,#2                 ;1083
000436  dd02              BLE      |L7.1086|
000438  2002              MOVS     r0,#2                 ;1085
00043a  900c              STR      r0,[sp,#0x30]         ;1085
00043c  e1f7              B        |L7.2094|
                  |L7.1086|
00043e  46a1              MOV      r9,r4                 ;1088
000440  e014              B        |L7.1132|
                  |L7.1090|
000442  f10b0008          ADD      r0,r11,#8             ;1090
000446  f8300019          LDRH     r0,[r0,r9,LSL #1]     ;1090
00044a  9001              STR      r0,[sp,#4]            ;1090
00044c  f89d2005          LDRB     r2,[sp,#5]            ;1091
000450  4629              MOV      r1,r5                 ;1091
000452  1c68              ADDS     r0,r5,#1              ;1091
000454  b285              UXTH     r5,r0                 ;1091
000456  48f2              LDR      r0,|L7.2080|
000458  5442              STRB     r2,[r0,r1]            ;1091
00045a  f89d2004          LDRB     r2,[sp,#4]            ;1092
00045e  4628              MOV      r0,r5                 ;1092
000460  1c69              ADDS     r1,r5,#1              ;1092
000462  b28d              UXTH     r5,r1                 ;1092
000464  49ee              LDR      r1,|L7.2080|
000466  540a              STRB     r2,[r1,r0]            ;1092
000468  f1090901          ADD      r9,r9,#1              ;1088
                  |L7.1132|
00046c  45b9              CMP      r9,r7                 ;1088
00046e  d3e8              BCC      |L7.1090|
000470  e1dd              B        |L7.2094|
                  |L7.1138|
000472  4631              MOV      r1,r6                 ;1097
000474  1c76              ADDS     r6,r6,#1              ;1097
000476  48eb              LDR      r0,|L7.2084|
000478  5c40              LDRB     r0,[r0,r1]            ;1097
00047a  f88d0005          STRB     r0,[sp,#5]            ;1097
00047e  4631              MOV      r1,r6                 ;1098
000480  1c76              ADDS     r6,r6,#1              ;1098
000482  48e8              LDR      r0,|L7.2084|
000484  5c40              LDRB     r0,[r0,r1]            ;1098
000486  f88d0004          STRB     r0,[sp,#4]            ;1098
00048a  f8bd4004          LDRH     r4,[sp,#4]            ;1099
00048e  2c20              CMP      r4,#0x20              ;1100
000490  dd02              BLE      |L7.1176|
000492  2002              MOVS     r0,#2                 ;1102
000494  900c              STR      r0,[sp,#0x30]         ;1102
000496  e1ca              B        |L7.2094|
                  |L7.1176|
000498  f89d2005          LDRB     r2,[sp,#5]            ;1105
00049c  4629              MOV      r1,r5                 ;1105
00049e  1c6d              ADDS     r5,r5,#1              ;1105
0004a0  48df              LDR      r0,|L7.2080|
0004a2  5442              STRB     r2,[r0,r1]            ;1105
0004a4  f89d2004          LDRB     r2,[sp,#4]            ;1106
0004a8  4629              MOV      r1,r5                 ;1106
0004aa  1c6d              ADDS     r5,r5,#1              ;1106
0004ac  5442              STRB     r2,[r0,r1]            ;1106
0004ae  4620              MOV      r0,r4                 ;1108
0004b0  17e1              ASRS     r1,r4,#31             ;1108
0004b2  eb047111          ADD      r1,r4,r1,LSR #28      ;1108
0004b6  1109              ASRS     r1,r1,#4              ;1108
0004b8  910a              STR      r1,[sp,#0x28]         ;1108
0004ba  17e1              ASRS     r1,r4,#31             ;1109
0004bc  eb047111          ADD      r1,r4,r1,LSR #28      ;1109
0004c0  1109              ASRS     r1,r1,#4              ;1109
0004c2  eba41101          SUB      r1,r4,r1,LSL #4       ;1109
0004c6  b289              UXTH     r1,r1                 ;1109
0004c8  9109              STR      r1,[sp,#0x24]         ;1109
0004ca  4631              MOV      r1,r6                 ;1111
0004cc  1c76              ADDS     r6,r6,#1              ;1111
0004ce  48d5              LDR      r0,|L7.2084|
0004d0  5c40              LDRB     r0,[r0,r1]            ;1111
0004d2  f88d0005          STRB     r0,[sp,#5]            ;1111
0004d6  4631              MOV      r1,r6                 ;1112
0004d8  1c76              ADDS     r6,r6,#1              ;1112
0004da  48d2              LDR      r0,|L7.2084|
0004dc  5c40              LDRB     r0,[r0,r1]            ;1112
0004de  f88d0004          STRB     r0,[sp,#4]            ;1112
0004e2  f8bd0004          LDRH     r0,[sp,#4]            ;1113
0004e6  b970              CBNZ     r0,|L7.1286|
0004e8  f10b0004          ADD      r0,r11,#4             ;1115
0004ec  990a              LDR      r1,[sp,#0x28]         ;1115
0004ee  f8300011          LDRH     r0,[r0,r1,LSL #1]     ;1115
0004f2  2201              MOVS     r2,#1                 ;1115
0004f4  9909              LDR      r1,[sp,#0x24]         ;1115
0004f6  408a              LSLS     r2,r2,r1              ;1115
0004f8  4390              BICS     r0,r0,r2              ;1115
0004fa  f10b0104          ADD      r1,r11,#4             ;1115
0004fe  9a0a              LDR      r2,[sp,#0x28]         ;1115
000500  f8210012          STRH     r0,[r1,r2,LSL #1]     ;1115
000504  e017              B        |L7.1334|
                  |L7.1286|
000506  f8bd0004          LDRH     r0,[sp,#4]            ;1117
00050a  f5b04f7f          CMP      r0,#0xff00            ;1117
00050e  d10f              BNE      |L7.1328|
000510  f10b0004          ADD      r0,r11,#4             ;1119
000514  990a              LDR      r1,[sp,#0x28]         ;1119
000516  f8300011          LDRH     r0,[r0,r1,LSL #1]     ;1119
00051a  2201              MOVS     r2,#1                 ;1119
00051c  9909              LDR      r1,[sp,#0x24]         ;1119
00051e  408a              LSLS     r2,r2,r1              ;1119
000520  4310              ORRS     r0,r0,r2              ;1119
000522  b282              UXTH     r2,r0                 ;1119
000524  f10b0104          ADD      r1,r11,#4             ;1119
000528  980a              LDR      r0,[sp,#0x28]         ;1119
00052a  f8212010          STRH     r2,[r1,r0,LSL #1]     ;1119
00052e  e002              B        |L7.1334|
                  |L7.1328|
000530  2003              MOVS     r0,#3                 ;1123
000532  900c              STR      r0,[sp,#0x30]         ;1123
000534  e17b              B        |L7.2094|
                  |L7.1334|
000536  f89d2005          LDRB     r2,[sp,#5]            ;1126
00053a  4629              MOV      r1,r5                 ;1126
00053c  1c6d              ADDS     r5,r5,#1              ;1126
00053e  48b8              LDR      r0,|L7.2080|
000540  5442              STRB     r2,[r0,r1]            ;1126
000542  f89d2004          LDRB     r2,[sp,#4]            ;1127
000546  4629              MOV      r1,r5                 ;1127
000548  1c6d              ADDS     r5,r5,#1              ;1127
00054a  5442              STRB     r2,[r0,r1]            ;1127
00054c  e16f              B        |L7.2094|
                  |L7.1358|
00054e  4631              MOV      r1,r6                 ;1131
000550  1c76              ADDS     r6,r6,#1              ;1131
000552  48b4              LDR      r0,|L7.2084|
000554  5c40              LDRB     r0,[r0,r1]            ;1131
000556  f88d0005          STRB     r0,[sp,#5]            ;1131
00055a  4631              MOV      r1,r6                 ;1132
00055c  1c76              ADDS     r6,r6,#1              ;1132
00055e  48b1              LDR      r0,|L7.2084|
000560  5c40              LDRB     r0,[r0,r1]            ;1132
000562  f88d0004          STRB     r0,[sp,#4]            ;1132
000566  f8bd4004          LDRH     r4,[sp,#4]            ;1133
00056a  2cc8              CMP      r4,#0xc8              ;1134
00056c  dd02              BLE      |L7.1396|
00056e  2002              MOVS     r0,#2                 ;1136
000570  900c              STR      r0,[sp,#0x30]         ;1136
000572  e15c              B        |L7.2094|
                  |L7.1396|
000574  f89d2005          LDRB     r2,[sp,#5]            ;1139
000578  4629              MOV      r1,r5                 ;1139
00057a  1c6d              ADDS     r5,r5,#1              ;1139
00057c  48a8              LDR      r0,|L7.2080|
00057e  5442              STRB     r2,[r0,r1]            ;1139
000580  f89d2004          LDRB     r2,[sp,#4]            ;1140
000584  4629              MOV      r1,r5                 ;1140
000586  1c6d              ADDS     r5,r5,#1              ;1140
000588  5442              STRB     r2,[r0,r1]            ;1140
00058a  4631              MOV      r1,r6                 ;1142
00058c  1c76              ADDS     r6,r6,#1              ;1142
00058e  48a5              LDR      r0,|L7.2084|
000590  5c40              LDRB     r0,[r0,r1]            ;1142
000592  f88d0005          STRB     r0,[sp,#5]            ;1142
000596  4631              MOV      r1,r6                 ;1143
000598  1c76              ADDS     r6,r6,#1              ;1143
00059a  48a2              LDR      r0,|L7.2084|
00059c  5c40              LDRB     r0,[r0,r1]            ;1143
00059e  f88d0004          STRB     r0,[sp,#4]            ;1143
0005a2  f8bd1004          LDRH     r1,[sp,#4]            ;1144
0005a6  f10b000c          ADD      r0,r11,#0xc           ;1144
0005aa  f8201014          STRH     r1,[r0,r4,LSL #1]     ;1144
0005ae  f89d2005          LDRB     r2,[sp,#5]            ;1146
0005b2  4629              MOV      r1,r5                 ;1146
0005b4  1c6d              ADDS     r5,r5,#1              ;1146
0005b6  489a              LDR      r0,|L7.2080|
0005b8  5442              STRB     r2,[r0,r1]            ;1146
0005ba  f89d2004          LDRB     r2,[sp,#4]            ;1147
0005be  4629              MOV      r1,r5                 ;1147
0005c0  1c6d              ADDS     r5,r5,#1              ;1147
0005c2  5442              STRB     r2,[r0,r1]            ;1147
0005c4  e133              B        |L7.2094|
                  |L7.1478|
0005c6  4631              MOV      r1,r6                 ;1151
0005c8  1c76              ADDS     r6,r6,#1              ;1151
0005ca  4896              LDR      r0,|L7.2084|
0005cc  5c40              LDRB     r0,[r0,r1]            ;1151
0005ce  f88d0005          STRB     r0,[sp,#5]            ;1151
0005d2  4631              MOV      r1,r6                 ;1152
0005d4  1c76              ADDS     r6,r6,#1              ;1152
0005d6  4893              LDR      r0,|L7.2084|
0005d8  5c40              LDRB     r0,[r0,r1]            ;1152
0005da  f88d0004          STRB     r0,[sp,#4]            ;1152
0005de  f8bd4004          LDRH     r4,[sp,#4]            ;1153
0005e2  2c20              CMP      r4,#0x20              ;1154
0005e4  dd02              BLE      |L7.1516|
0005e6  2002              MOVS     r0,#2                 ;1156
0005e8  900c              STR      r0,[sp,#0x30]         ;1156
0005ea  e120              B        |L7.2094|
                  |L7.1516|
0005ec  f89d2005          LDRB     r2,[sp,#5]            ;1159
0005f0  4629              MOV      r1,r5                 ;1159
0005f2  1c6d              ADDS     r5,r5,#1              ;1159
0005f4  488a              LDR      r0,|L7.2080|
0005f6  5442              STRB     r2,[r0,r1]            ;1159
0005f8  f89d2004          LDRB     r2,[sp,#4]            ;1160
0005fc  4629              MOV      r1,r5                 ;1160
0005fe  1c6d              ADDS     r5,r5,#1              ;1160
000600  5442              STRB     r2,[r0,r1]            ;1160
000602  4631              MOV      r1,r6                 ;1162
000604  1c76              ADDS     r6,r6,#1              ;1162
000606  4887              LDR      r0,|L7.2084|
000608  5c40              LDRB     r0,[r0,r1]            ;1162
00060a  f88d0005          STRB     r0,[sp,#5]            ;1162
00060e  4631              MOV      r1,r6                 ;1163
000610  1c76              ADDS     r6,r6,#1              ;1163
000612  4884              LDR      r0,|L7.2084|
000614  5c40              LDRB     r0,[r0,r1]            ;1163
000616  f88d0004          STRB     r0,[sp,#4]            ;1163
00061a  f8bd8004          LDRH     r8,[sp,#4]            ;1164
00061e  f5b86ffa          CMP      r8,#0x7d0             ;1165
000622  dd02              BLE      |L7.1578|
000624  2003              MOVS     r0,#3                 ;1167
000626  900c              STR      r0,[sp,#0x30]         ;1167
000628  e101              B        |L7.2094|
                  |L7.1578|
00062a  f89d2005          LDRB     r2,[sp,#5]            ;1170
00062e  4629              MOV      r1,r5                 ;1170
000630  1c6d              ADDS     r5,r5,#1              ;1170
000632  487b              LDR      r0,|L7.2080|
000634  5442              STRB     r2,[r0,r1]            ;1170
000636  f89d2004          LDRB     r2,[sp,#4]            ;1171
00063a  4629              MOV      r1,r5                 ;1171
00063c  1c6d              ADDS     r5,r5,#1              ;1171
00063e  5442              STRB     r2,[r0,r1]            ;1171
000640  eb040008          ADD      r0,r4,r8              ;1173
000644  b287              UXTH     r7,r0                 ;1173
000646  2f20              CMP      r7,#0x20              ;1174
000648  dd02              BLE      |L7.1616|
00064a  2002              MOVS     r0,#2                 ;1176
00064c  900c              STR      r0,[sp,#0x30]         ;1176
00064e  e0ee              B        |L7.2094|
                  |L7.1616|
000650  4620              MOV      r0,r4                 ;1180
000652  17e1              ASRS     r1,r4,#31             ;1180
000654  eb047111          ADD      r1,r4,r1,LSR #28      ;1180
000658  1109              ASRS     r1,r1,#4              ;1180
00065a  910a              STR      r1,[sp,#0x28]         ;1180
00065c  17e1              ASRS     r1,r4,#31             ;1181
00065e  eb047111          ADD      r1,r4,r1,LSR #28      ;1181
000662  1109              ASRS     r1,r1,#4              ;1181
000664  eba41101          SUB      r1,r4,r1,LSL #4       ;1181
000668  b289              UXTH     r1,r1                 ;1181
00066a  9109              STR      r1,[sp,#0x24]         ;1181
00066c  4638              MOV      r0,r7                 ;1183
00066e  17f9              ASRS     r1,r7,#31             ;1183
000670  eb077151          ADD      r1,r7,r1,LSR #29      ;1183
000674  10c9              ASRS     r1,r1,#3              ;1183
000676  eba701c1          SUB      r1,r7,r1,LSL #3       ;1183
00067a  b289              UXTH     r1,r1                 ;1183
00067c  9108              STR      r1,[sp,#0x20]         ;1183
00067e  4631              MOV      r1,r6                 ;1185
000680  1c76              ADDS     r6,r6,#1              ;1185
000682  4868              LDR      r0,|L7.2084|
000684  5c40              LDRB     r0,[r0,r1]            ;1185
000686  9007              STR      r0,[sp,#0x1c]         ;1185
000688  ea4f71e8          ASR      r1,r8,#31             ;1186
00068c  eb087151          ADD      r1,r8,r1,LSR #29      ;1186
000690  10c9              ASRS     r1,r1,#3              ;1186
000692  ebb801c1          SUBS     r1,r8,r1,LSL #3       ;1186
000696  d106              BNE      |L7.1702|
000698  9807              LDR      r0,[sp,#0x1c]         ;1188
00069a  ebb00fe8          CMP      r0,r8,ASR #3          ;1188
00069e  d00b              BEQ      |L7.1720|
0006a0  2003              MOVS     r0,#3                 ;1191
0006a2  900c              STR      r0,[sp,#0x30]         ;1191
0006a4  e0c3              B        |L7.2094|
                  |L7.1702|
0006a6  2001              MOVS     r0,#1                 ;1197
0006a8  eb0001e8          ADD      r1,r0,r8,ASR #3       ;1197
0006ac  9807              LDR      r0,[sp,#0x1c]         ;1197
0006ae  4281              CMP      r1,r0                 ;1197
0006b0  d002              BEQ      |L7.1720|
0006b2  2003              MOVS     r0,#3                 ;1199
0006b4  900c              STR      r0,[sp,#0x30]         ;1199
0006b6  e0ba              B        |L7.2094|
                  |L7.1720|
0006b8  f8dd9028          LDR      r9,[sp,#0x28]         ;1203
0006bc  9809              LDR      r0,[sp,#0x24]         ;1203
0006be  9005              STR      r0,[sp,#0x14]         ;1203
0006c0  2008              MOVS     r0,#8                 ;1203
0006c2  9004              STR      r0,[sp,#0x10]         ;1203
0006c4  46a2              MOV      r10,r4                ;1203
0006c6  e03c              B        |L7.1858|
                  |L7.1736|
0006c8  9804              LDR      r0,[sp,#0x10]         ;1205
0006ca  2808              CMP      r0,#8                 ;1205
0006cc  d307              BCC      |L7.1758|
0006ce  2000              MOVS     r0,#0                 ;1207
0006d0  9004              STR      r0,[sp,#0x10]         ;1207
0006d2  4630              MOV      r0,r6                 ;1208
0006d4  1c71              ADDS     r1,r6,#1              ;1208
0006d6  b28e              UXTH     r6,r1                 ;1208
0006d8  4952              LDR      r1,|L7.2084|
0006da  5c08              LDRB     r0,[r1,r0]            ;1208
0006dc  9001              STR      r0,[sp,#4]            ;1208
                  |L7.1758|
0006de  f8bd0004          LDRH     r0,[sp,#4]            ;1210
0006e2  9904              LDR      r1,[sp,#0x10]         ;1210
0006e4  4108              ASRS     r0,r0,r1              ;1210
0006e6  9003              STR      r0,[sp,#0xc]          ;1210
0006e8  9805              LDR      r0,[sp,#0x14]         ;1211
0006ea  2810              CMP      r0,#0x10              ;1211
0006ec  d303              BCC      |L7.1782|
0006ee  f1090901          ADD      r9,r9,#1              ;1213
0006f2  2000              MOVS     r0,#0                 ;1214
0006f4  9005              STR      r0,[sp,#0x14]         ;1214
                  |L7.1782|
0006f6  9803              LDR      r0,[sp,#0xc]          ;1216
0006f8  f0100f01          TST      r0,#1                 ;1216
0006fc  d00d              BEQ      |L7.1818|
0006fe  f10b0004          ADD      r0,r11,#4             ;1218
000702  f8300019          LDRH     r0,[r0,r9,LSL #1]     ;1218
000706  2201              MOVS     r2,#1                 ;1218
000708  9905              LDR      r1,[sp,#0x14]         ;1218
00070a  408a              LSLS     r2,r2,r1              ;1218
00070c  4310              ORRS     r0,r0,r2              ;1218
00070e  b281              UXTH     r1,r0                 ;1218
000710  f10b0004          ADD      r0,r11,#4             ;1218
000714  f8201019          STRH     r1,[r0,r9,LSL #1]     ;1218
000718  e00b              B        |L7.1842|
                  |L7.1818|
00071a  f10b0004          ADD      r0,r11,#4             ;1222
00071e  f8300019          LDRH     r0,[r0,r9,LSL #1]     ;1222
000722  2201              MOVS     r2,#1                 ;1222
000724  9905              LDR      r1,[sp,#0x14]         ;1222
000726  408a              LSLS     r2,r2,r1              ;1222
000728  4390              BICS     r0,r0,r2              ;1222
00072a  f10b0104          ADD      r1,r11,#4             ;1222
00072e  f8210019          STRH     r0,[r1,r9,LSL #1]     ;1222
                  |L7.1842|
000732  9805              LDR      r0,[sp,#0x14]         ;1203
000734  1c40              ADDS     r0,r0,#1              ;1203
000736  9005              STR      r0,[sp,#0x14]         ;1203
000738  9804              LDR      r0,[sp,#0x10]         ;1203
00073a  1c40              ADDS     r0,r0,#1              ;1203
00073c  9004              STR      r0,[sp,#0x10]         ;1203
00073e  f10a0a01          ADD      r10,r10,#1            ;1203
                  |L7.1858|
000742  45ba              CMP      r10,r7                ;1203
000744  d3c0              BCC      |L7.1736|
000746  e072              B        |L7.2094|
                  |L7.1864|
000748  4631              MOV      r1,r6                 ;1227
00074a  1c76              ADDS     r6,r6,#1              ;1227
00074c  4835              LDR      r0,|L7.2084|
00074e  5c40              LDRB     r0,[r0,r1]            ;1227
000750  f88d0005          STRB     r0,[sp,#5]            ;1227
000754  4631              MOV      r1,r6                 ;1228
000756  1c76              ADDS     r6,r6,#1              ;1228
000758  4832              LDR      r0,|L7.2084|
00075a  5c40              LDRB     r0,[r0,r1]            ;1228
00075c  f88d0004          STRB     r0,[sp,#4]            ;1228
000760  f8bd4004          LDRH     r4,[sp,#4]            ;1229
000764  2cc8              CMP      r4,#0xc8              ;1230
000766  dd02              BLE      |L7.1902|
000768  2002              MOVS     r0,#2                 ;1232
00076a  900c              STR      r0,[sp,#0x30]         ;1232
00076c  e05f              B        |L7.2094|
                  |L7.1902|
00076e  f89d2005          LDRB     r2,[sp,#5]            ;1235
000772  4629              MOV      r1,r5                 ;1235
000774  1c6d              ADDS     r5,r5,#1              ;1235
000776  482a              LDR      r0,|L7.2080|
000778  5442              STRB     r2,[r0,r1]            ;1235
00077a  f89d2004          LDRB     r2,[sp,#4]            ;1236
00077e  4629              MOV      r1,r5                 ;1236
000780  1c6d              ADDS     r5,r5,#1              ;1236
000782  5442              STRB     r2,[r0,r1]            ;1236
000784  4631              MOV      r1,r6                 ;1238
000786  1c76              ADDS     r6,r6,#1              ;1238
000788  4826              LDR      r0,|L7.2084|
00078a  5c40              LDRB     r0,[r0,r1]            ;1238
00078c  f88d0005          STRB     r0,[sp,#5]            ;1238
000790  4631              MOV      r1,r6                 ;1239
000792  1c76              ADDS     r6,r6,#1              ;1239
000794  4823              LDR      r0,|L7.2084|
000796  5c40              LDRB     r0,[r0,r1]            ;1239
000798  f88d0004          STRB     r0,[sp,#4]            ;1239
00079c  f8bd8004          LDRH     r8,[sp,#4]            ;1240
0007a0  f5b87f00          CMP      r8,#0x200             ;1241
0007a4  dd02              BLE      |L7.1964|
0007a6  2003              MOVS     r0,#3                 ;1243
0007a8  900c              STR      r0,[sp,#0x30]         ;1243
0007aa  e040              B        |L7.2094|
                  |L7.1964|
0007ac  f89d2005          LDRB     r2,[sp,#5]            ;1246
0007b0  4629              MOV      r1,r5                 ;1246
0007b2  1c6d              ADDS     r5,r5,#1              ;1246
0007b4  481a              LDR      r0,|L7.2080|
0007b6  5442              STRB     r2,[r0,r1]            ;1246
0007b8  f89d2004          LDRB     r2,[sp,#4]            ;1247
0007bc  4629              MOV      r1,r5                 ;1247
0007be  1c6d              ADDS     r5,r5,#1              ;1247
0007c0  5442              STRB     r2,[r0,r1]            ;1247
0007c2  eb040008          ADD      r0,r4,r8              ;1249
0007c6  b287              UXTH     r7,r0                 ;1249
0007c8  2fc8              CMP      r7,#0xc8              ;1250
0007ca  dd02              BLE      |L7.2002|
0007cc  2002              MOVS     r0,#2                 ;1252
0007ce  900c              STR      r0,[sp,#0x30]         ;1252
0007d0  e02d              B        |L7.2094|
                  |L7.2002|
0007d2  4631              MOV      r1,r6                 ;1256
0007d4  1c76              ADDS     r6,r6,#1              ;1256
0007d6  4813              LDR      r0,|L7.2084|
0007d8  5c40              LDRB     r0,[r0,r1]            ;1256
0007da  9007              STR      r0,[sp,#0x1c]         ;1256
0007dc  9807              LDR      r0,[sp,#0x1c]         ;1257
0007de  ebb00f48          CMP      r0,r8,LSL #1          ;1257
0007e2  d002              BEQ      |L7.2026|
0007e4  2003              MOVS     r0,#3                 ;1259
0007e6  900c              STR      r0,[sp,#0x30]         ;1259
0007e8  e021              B        |L7.2094|
                  |L7.2026|
0007ea  46a1              MOV      r9,r4                 ;1262
0007ec  e015              B        |L7.2074|
                  |L7.2030|
0007ee  4630              MOV      r0,r6                 ;1264
0007f0  1c71              ADDS     r1,r6,#1              ;1264
0007f2  b28e              UXTH     r6,r1                 ;1264
0007f4  490b              LDR      r1,|L7.2084|
0007f6  5c08              LDRB     r0,[r1,r0]            ;1264
0007f8  f88d0005          STRB     r0,[sp,#5]            ;1264
0007fc  4630              MOV      r0,r6                 ;1265
0007fe  1c71              ADDS     r1,r6,#1              ;1265
000800  b28e              UXTH     r6,r1                 ;1265
000802  4908              LDR      r1,|L7.2084|
000804  5c08              LDRB     r0,[r1,r0]            ;1265
000806  f88d0004          STRB     r0,[sp,#4]            ;1265
00080a  f8bd1004          LDRH     r1,[sp,#4]            ;1266
00080e  f10b000c          ADD      r0,r11,#0xc           ;1266
000812  f8201019          STRH     r1,[r0,r9,LSL #1]     ;1266
000816  f1090901          ADD      r9,r9,#1              ;1262
                  |L7.2074|
00081a  45b9              CMP      r9,r7                 ;1262
00081c  d3e7              BCC      |L7.2030|
00081e  e006              B        |L7.2094|
                  |L7.2080|
                          DCD      UART485Sentdat
                  |L7.2084|
                          DCD      UART485RxDat
                  |L7.2088|
000828  2001              MOVS     r0,#1                 ;1270
00082a  900c              STR      r0,[sp,#0x30]         ;1270
00082c  bf00              NOP                            ;1271
                  |L7.2094|
00082e  bf00              NOP                            ;928
000830  4631              MOV      r1,r6                 ;1273
000832  4824              LDR      r0,|L7.2244|
000834  f7fffffe          BL       calCRC16_modbus
000838  9006              STR      r0,[sp,#0x18]         ;1273
00083a  4630              MOV      r0,r6                 ;1274
00083c  1c71              ADDS     r1,r6,#1              ;1274
00083e  b28e              UXTH     r6,r1                 ;1274
000840  4920              LDR      r1,|L7.2244|
000842  5c08              LDRB     r0,[r1,r0]            ;1274
000844  f88d0005          STRB     r0,[sp,#5]            ;1274
000848  4630              MOV      r0,r6                 ;1275
00084a  1c71              ADDS     r1,r6,#1              ;1275
00084c  b28e              UXTH     r6,r1                 ;1275
00084e  491d              LDR      r1,|L7.2244|
000850  5c08              LDRB     r0,[r1,r0]            ;1275
000852  f88d0004          STRB     r0,[sp,#4]            ;1275
000856  4631              MOV      r1,r6                 ;1276
000858  481a              LDR      r0,|L7.2244|
00085a  f7fffffe          BL       __aeabi_memclr
00085e  f8bd1004          LDRH     r1,[sp,#4]            ;1277
000862  9806              LDR      r0,[sp,#0x18]         ;1277
000864  4281              CMP      r1,r0                 ;1277
000866  d002              BEQ      |L7.2158|
000868  2000              MOVS     r0,#0                 ;1279
                  |L7.2154|
00086a  f7ffbbe6          B        |L7.58|
                  |L7.2158|
00086e  980c              LDR      r0,[sp,#0x30]         ;1282
000870  b150              CBZ      r0,|L7.2184|
000872  4815              LDR      r0,|L7.2248|
000874  7840              LDRB     r0,[r0,#1]            ;1284  ; UART485Sentdat
000876  3080              ADDS     r0,r0,#0x80           ;1284
000878  4913              LDR      r1,|L7.2248|
00087a  7048              STRB     r0,[r1,#1]            ;1284
00087c  4629              MOV      r1,r5                 ;1285
00087e  1c6a              ADDS     r2,r5,#1              ;1285
000880  b295              UXTH     r5,r2                 ;1285
000882  4a11              LDR      r2,|L7.2248|
000884  980c              LDR      r0,[sp,#0x30]         ;1285
000886  5450              STRB     r0,[r2,r1]            ;1285
                  |L7.2184|
000888  4629              MOV      r1,r5                 ;1287
00088a  480f              LDR      r0,|L7.2248|
00088c  f7fffffe          BL       calCRC16_modbus
000890  9001              STR      r0,[sp,#4]            ;1287
000892  f89d2005          LDRB     r2,[sp,#5]            ;1288
000896  4628              MOV      r0,r5                 ;1288
000898  1c69              ADDS     r1,r5,#1              ;1288
00089a  b28d              UXTH     r5,r1                 ;1288
00089c  490a              LDR      r1,|L7.2248|
00089e  540a              STRB     r2,[r1,r0]            ;1288
0008a0  f89d2004          LDRB     r2,[sp,#4]            ;1289
0008a4  4628              MOV      r0,r5                 ;1289
0008a6  1c69              ADDS     r1,r5,#1              ;1289
0008a8  b28d              UXTH     r5,r1                 ;1289
0008aa  4907              LDR      r1,|L7.2248|
0008ac  540a              STRB     r2,[r1,r0]            ;1289
0008ae  462a              MOV      r2,r5                 ;1291
0008b0  2000              MOVS     r0,#0                 ;1291
0008b2  f7fffffe          BL       comSendBuf
0008b6  980c              LDR      r0,[sp,#0x30]         ;1293
0008b8  b108              CBZ      r0,|L7.2238|
0008ba  2000              MOVS     r0,#0                 ;1295
0008bc  e7d5              B        |L7.2154|
                  |L7.2238|
0008be  980d              LDR      r0,[sp,#0x34]         ;1299
0008c0  e7d3              B        |L7.2154|
                          ENDP

0008c2  0000              DCW      0x0000
                  |L7.2244|
                          DCD      UART485RxDat
                  |L7.2248|
                          DCD      UART485Sentdat

                          AREA ||i.UART485_Slave||, CODE, READONLY, ALIGN=2

                  UART485_Slave PROC
;;;433    ***************************************************************/
;;;434    uint16_t UART485_Slave(void)
000000  b510              PUSH     {r4,lr}
;;;435    {
000002  b08c              SUB      sp,sp,#0x30
;;;436    	_CMD     Cmd;
;;;437    	uint16_t ret = 0;
000004  2400              MOVS     r4,#0
;;;438    
;;;439    	//当作为从机时,固定为1，组态屏为主站
;;;440    	Cmd.slave = 1;
000006  2001              MOVS     r0,#1
000008  f8ad0014          STRH     r0,[sp,#0x14]
;;;441    	
;;;442    	//超时成帧检查,485串口
;;;443    	if(bsp_CheckTimer(UART_485))
00000c  2000              MOVS     r0,#0
00000e  f7fffffe          BL       bsp_CheckTimer
000012  2800              CMP      r0,#0
000014  d035              BEQ      |L8.130|
;;;444    	{
;;;445    		bsp_StopTimer(UART_485);
000016  2000              MOVS     r0,#0
000018  f7fffffe          BL       bsp_StopTimer
;;;446    
;;;447    	  //复制到modbus消息处理缓冲区中
;;;448    	  memcpy((char*)UART485RxDat,(char*)UART485_RXBUF,UART485_tUART.usRxCount);
00001c  4823              LDR      r0,|L8.172|
00001e  8bc2              LDRH     r2,[r0,#0x1e]  ; g_tUart1
000020  4923              LDR      r1,|L8.176|
000022  4824              LDR      r0,|L8.180|
000024  f7fffffe          BL       __aeabi_memcpy
;;;449    		
;;;450    		//寄存器地址
;;;451    		Cmd.addr = ((uint16_t)UART485RxDat[2]<<8)|UART485RxDat[3];
000028  4822              LDR      r0,|L8.180|
00002a  78c0              LDRB     r0,[r0,#3]  ; UART485RxDat
00002c  4921              LDR      r1,|L8.180|
00002e  7889              LDRB     r1,[r1,#2]  ; UART485RxDat
000030  ea402001          ORR      r0,r0,r1,LSL #8
000034  f8ad0018          STRH     r0,[sp,#0x18]
;;;452    		//更新待读取的信息
;;;453    		UART485_Read();
000038  f7fffffe          BL       UART485_Read
;;;454    		
;;;455    		//modbus从机处理,始终采用结构0，作为从机数据结构
;;;456    		ret = UART485_MbSl_rep(Cmd,&g_PduUART485[0]);
00003c  481e              LDR      r0,|L8.184|
00003e  9003              STR      r0,[sp,#0xc]
000040  a809              ADD      r0,sp,#0x24
000042  c807              LDM      r0,{r0-r2}
000044  e88d0007          STM      sp,{r0-r2}
000048  a805              ADD      r0,sp,#0x14
00004a  c80f              LDM      r0,{r0-r3}
00004c  f7fffffe          BL       UART485_MbSl_rep
000050  4604              MOV      r4,r0
;;;457    		if(ret == MB_REGHOLD_RD)
000052  2c03              CMP      r4,#3
000054  d00b              BEQ      |L8.110|
;;;458    		{
;;;459    		}
;;;460    		else if(ret == MB_BITINP_RD)
000056  2c02              CMP      r4,#2
000058  d009              BEQ      |L8.110|
;;;461    		{
;;;462    		}
;;;463    		else if((ret == MB_BITCOIL_WT)||(ret == MB_MULTICOIL_WT))
00005a  2c05              CMP      r4,#5
00005c  d007              BEQ      |L8.110|
00005e  2c0f              CMP      r4,#0xf
000060  d005              BEQ      |L8.110|
;;;464    		{
;;;465    		}
;;;466    		else if((ret == MB_REGHOLD_WT)||(ret == MB_MULTIREG_WT))
000062  2c06              CMP      r4,#6
000064  d001              BEQ      |L8.106|
000066  2c10              CMP      r4,#0x10
000068  d101              BNE      |L8.110|
                  |L8.106|
;;;467    		{
;;;468    				UART485_Write();
00006a  f7fffffe          BL       UART485_Write
                  |L8.110|
;;;469    		}
;;;470    		
;;;471    		//清空缓冲区
;;;472    		comClearRxFifo(UART_485);
00006e  2000              MOVS     r0,#0
000070  f7fffffe          BL       comClearRxFifo
;;;473    		
;;;474    		//485应答延时定时器
;;;475    		bsp_StartTimer(TIMER_485, 10);
000074  210a              MOVS     r1,#0xa
000076  200d              MOVS     r0,#0xd
000078  f7fffffe          BL       bsp_StartTimer
;;;476    		return ret;	
00007c  4620              MOV      r0,r4
                  |L8.126|
;;;477      }
;;;478    	
;;;479    	//485延时发送处理部分
;;;480    	if(bsp_CheckTimer(TIMER_485))
;;;481    	{
;;;482    		bsp_StopTimer(TIMER_485);
;;;483    		
;;;484    		//延时应答
;;;485    		comSendBuf(UART_485, UART485Sentdat, Sendlen);
;;;486    		memset((char*)UART485Sentdat,0,UART485_TXBUFLEN);
;;;487      }
;;;488    	return 0;
;;;489    }
00007e  b00c              ADD      sp,sp,#0x30
000080  bd10              POP      {r4,pc}
                  |L8.130|
000082  200d              MOVS     r0,#0xd               ;480
000084  f7fffffe          BL       bsp_CheckTimer
000088  b168              CBZ      r0,|L8.166|
00008a  200d              MOVS     r0,#0xd               ;482
00008c  f7fffffe          BL       bsp_StopTimer
000090  480a              LDR      r0,|L8.188|
000092  8802              LDRH     r2,[r0,#0]            ;485  ; Sendlen
000094  490a              LDR      r1,|L8.192|
000096  2000              MOVS     r0,#0                 ;485
000098  f7fffffe          BL       comSendBuf
00009c  f44f7100          MOV      r1,#0x200             ;486
0000a0  4807              LDR      r0,|L8.192|
0000a2  f7fffffe          BL       __aeabi_memclr
                  |L8.166|
0000a6  2000              MOVS     r0,#0                 ;488
0000a8  e7e9              B        |L8.126|
;;;490    
                          ENDP

0000aa  0000              DCW      0x0000
                  |L8.172|
                          DCD      g_tUart1
                  |L8.176|
                          DCD      g_RxBuf1
                  |L8.180|
                          DCD      UART485RxDat
                  |L8.184|
                          DCD      g_PduUART485
                  |L8.188|
                          DCD      Sendlen
                  |L8.192|
                          DCD      UART485Sentdat

                          AREA ||i.Uart485_Task||, CODE, READONLY, ALIGN=2

                  Uart485_Task PROC
;;;110    ***************************************************************/
;;;111    void Uart485_Task(void)
000000  b570              PUSH     {r4-r6,lr}
;;;112    {
000002  b08c              SUB      sp,sp,#0x30
;;;113    	uint8_t    ret = 0;
000004  2400              MOVS     r4,#0
;;;114    	uint32_t   addr = 0;
000006  2000              MOVS     r0,#0
000008  900b              STR      r0,[sp,#0x2c]
;;;115    	uint8_t    i = 0;
00000a  2500              MOVS     r5,#0
;;;116    	
;;;117    	static uint32_t start_time = 0;
;;;118    	       uint8_t  sign = 0;
00000c  2600              MOVS     r6,#0
;;;119    
;;;120    	ElemType e;
;;;121    	
;;;122    	//服务器未下发数据，则，485主机轮询
;;;123    		if(GPRS_Para.DataFlag == 0)
00000e  483c              LDR      r0,|L9.256|
000010  7a40              LDRB     r0,[r0,#9]  ; GPRS_Para
000012  bb98              CBNZ     r0,|L9.124|
;;;124    		{
;;;125    			ret = UART485_Master(&addr);
000014  a80b              ADD      r0,sp,#0x2c
000016  f7fffffe          BL       UART485_Master
00001a  4604              MOV      r4,r0
;;;126    	
;;;127    			//此句判断，主要是为了，完成上一命令
;;;128    			if(ret != 0)
00001c  2c00              CMP      r4,#0
00001e  d06c              BEQ      |L9.250|
;;;129    			{
;;;130    				//读取超时，说明断线
;;;131    				if(ret == 0xff)
000020  2cff              CMP      r4,#0xff
000022  d115              BNE      |L9.80|
;;;132    				{
;;;133    					GPRS_Para.OnlineFlag &=~BIT((addr-1));
000024  4836              LDR      r0,|L9.256|
000026  68c0              LDR      r0,[r0,#0xc]  ; GPRS_Para
000028  990b              LDR      r1,[sp,#0x2c]
00002a  1e49              SUBS     r1,r1,#1
00002c  2201              MOVS     r2,#1
00002e  408a              LSLS     r2,r2,r1
000030  4390              BICS     r0,r0,r2
000032  4933              LDR      r1,|L9.256|
000034  60c8              STR      r0,[r1,#0xc]  ; GPRS_Para
;;;134    					//清除数据变量
;;;135    					memset(&g_PduUART485[(addr-1)].RegHold[100],0,20);
000036  990b              LDR      r1,[sp,#0x2c]
000038  1e49              SUBS     r1,r1,#1
00003a  2267              MOVS     r2,#0x67
00003c  4351              MULS     r1,r2,r1
00003e  4a31              LDR      r2,|L9.260|
000040  eb020181          ADD      r1,r2,r1,LSL #2
000044  f10100d4          ADD      r0,r1,#0xd4
000048  2114              MOVS     r1,#0x14
00004a  f7fffffe          BL       __aeabi_memclr
00004e  e00c              B        |L9.106|
                  |L9.80|
;;;136    				}
;;;137    				//正常
;;;138    				else if((ret >= 1)&&(ret <= 16))
000050  2c01              CMP      r4,#1
000052  db0a              BLT      |L9.106|
000054  2c10              CMP      r4,#0x10
000056  dc08              BGT      |L9.106|
;;;139    				{
;;;140    					GPRS_Para.OnlineFlag |= BIT((addr-1));
000058  4829              LDR      r0,|L9.256|
00005a  68c0              LDR      r0,[r0,#0xc]  ; GPRS_Para
00005c  990b              LDR      r1,[sp,#0x2c]
00005e  1e49              SUBS     r1,r1,#1
000060  2201              MOVS     r2,#1
000062  408a              LSLS     r2,r2,r1
000064  4310              ORRS     r0,r0,r2
000066  4926              LDR      r1,|L9.256|
000068  60c8              STR      r0,[r1,#0xc]  ; GPRS_Para
                  |L9.106|
;;;141    				}
;;;142    				
;;;143    				//判断透传队列是否为空
;;;144    				if(!T_IsQueueEmpty(&Trans_Queue))
00006a  4827              LDR      r0,|L9.264|
00006c  f7fffffe          BL       T_IsQueueEmpty
000070  2800              CMP      r0,#0
000072  d142              BNE      |L9.250|
;;;145    				{
;;;146    					//不为空，则说明有数据
;;;147    					GPRS_Para.DataFlag = 1;
000074  2001              MOVS     r0,#1
000076  4922              LDR      r1,|L9.256|
000078  7248              STRB     r0,[r1,#9]
00007a  e03e              B        |L9.250|
                  |L9.124|
00007c  e7ff              B        |L9.126|
                  |L9.126|
;;;148    				}
;;;149    			}
;;;150      }
;;;151    	//服务器有数据待下发，则，透传到板子
;;;152    	else if(GPRS_Para.DataFlag == 1)
00007e  4820              LDR      r0,|L9.256|
000080  7a40              LDRB     r0,[r0,#9]  ; GPRS_Para
000082  2801              CMP      r0,#1
000084  d11e              BNE      |L9.196|
;;;153    	{
;;;154    		if(!T_IsQueueEmpty(&Trans_Queue))
000086  4820              LDR      r0,|L9.264|
000088  f7fffffe          BL       T_IsQueueEmpty
00008c  b9b0              CBNZ     r0,|L9.188|
;;;155    		{
;;;156    			T_DeQueue(&Trans_Queue,&e);
00008e  a904              ADD      r1,sp,#0x10
000090  481d              LDR      r0,|L9.264|
000092  f7fffffe          BL       T_DeQueue
;;;157    			
;;;158    			UART485_MbMt_req(e,(UART485_PDU *)&g_PduGprs);// g_PduUART485[e.slave-1]
000096  481d              LDR      r0,|L9.268|
000098  9003              STR      r0,[sp,#0xc]
00009a  a808              ADD      r0,sp,#0x20
00009c  c807              LDM      r0,{r0-r2}
00009e  e88d0007          STM      sp,{r0-r2}
0000a2  a804              ADD      r0,sp,#0x10
0000a4  c80f              LDM      r0,{r0-r3}
0000a6  f7fffffe          BL       UART485_MbMt_req
;;;159    			
;;;160    			//发送后等待2秒，看是否应答
;;;161    			GPRS_Para.DataFlag = 2;
0000aa  2002              MOVS     r0,#2
0000ac  4914              LDR      r1,|L9.256|
0000ae  7248              STRB     r0,[r1,#9]
;;;162    			bsp_StartTimer(TIMER_485, 5000);
0000b0  f2413188          MOV      r1,#0x1388
0000b4  200d              MOVS     r0,#0xd
0000b6  f7fffffe          BL       bsp_StartTimer
0000ba  e01e              B        |L9.250|
                  |L9.188|
;;;163        }
;;;164    		else
;;;165    		{
;;;166    			GPRS_Para.DataFlag = 0;
0000bc  2000              MOVS     r0,#0
0000be  4910              LDR      r1,|L9.256|
0000c0  7248              STRB     r0,[r1,#9]
0000c2  e01a              B        |L9.250|
                  |L9.196|
;;;167        }
;;;168      }
;;;169    	else if(GPRS_Para.DataFlag == 2)
0000c4  480e              LDR      r0,|L9.256|
0000c6  7a40              LDRB     r0,[r0,#9]  ; GPRS_Para
0000c8  2802              CMP      r0,#2
0000ca  d116              BNE      |L9.250|
;;;170    	{
;;;171    		if(bsp_CheckTimer(TIMER_485))
0000cc  200d              MOVS     r0,#0xd
0000ce  f7fffffe          BL       bsp_CheckTimer
0000d2  b128              CBZ      r0,|L9.224|
;;;172    		{
;;;173    			bsp_StopTimer(TIMER_485);
0000d4  200d              MOVS     r0,#0xd
0000d6  f7fffffe          BL       bsp_StopTimer
;;;174    			//继续判断队列中是否有数据
;;;175    			GPRS_Para.DataFlag = 1;
0000da  2001              MOVS     r0,#1
0000dc  4908              LDR      r1,|L9.256|
0000de  7248              STRB     r0,[r1,#9]
                  |L9.224|
;;;176    		}
;;;177    		
;;;178    		//超时成帧
;;;179    		if(bsp_CheckTimer(UART_485))
0000e0  2000              MOVS     r0,#0
0000e2  f7fffffe          BL       bsp_CheckTimer
0000e6  b140              CBZ      r0,|L9.250|
;;;180    		{
;;;181    			bsp_StopTimer(UART_485);
0000e8  2000              MOVS     r0,#0
0000ea  f7fffffe          BL       bsp_StopTimer
;;;182    			GPRS_Para.DataFlag = 1;
0000ee  2001              MOVS     r0,#1
0000f0  4903              LDR      r1,|L9.256|
0000f2  7248              STRB     r0,[r1,#9]
;;;183    
;;;184    			comClearRxFifo(UART_485);
0000f4  2000              MOVS     r0,#0
0000f6  f7fffffe          BL       comClearRxFifo
                  |L9.250|
;;;185    		}			
;;;186      }
;;;187    }
0000fa  b00c              ADD      sp,sp,#0x30
0000fc  bd70              POP      {r4-r6,pc}
;;;188    /**************************************************************
                          ENDP

0000fe  0000              DCW      0x0000
                  |L9.256|
                          DCD      GPRS_Para
                  |L9.260|
                          DCD      g_PduUART485
                  |L9.264|
                          DCD      Trans_Queue
                  |L9.268|
                          DCD      g_PduGprs

                          AREA ||.bss||, DATA, NOINIT, ALIGN=1

                  UART485RxDat
                          %        512
                  UART485Sentdat
                          %        512
                  g_PduUART485
                          %        1648
                  g_PduUART485_bak
                          %        1648

                          AREA ||.data||, DATA, ALIGN=2

                  Sendlen
000000  0000              DCW      0x0000
000002  0000              DCB      0x00,0x00
                  start_time
                          DCD      0x00000000
                  interval
000008  0bb8              DCW      0x0bb8
00000a  0000              DCB      0x00,0x00
                  |symbol_number.41|
                          DCD      0x00000000
                  |symbol_number.42|
                          DCD      0x00000000
                  g_MbMtCmd485
                          DCD      0x00000000

;*** Start embedded assembler ***

#line 1 "..\\..\\User\\Modbus\\modbus_485.c"
	AREA ||.rev16_text||, CODE, READONLY
	THUMB
	EXPORT |__asm___12_modbus_485_c_Sendlen____REV16|
#line 114 "..\\..\\Libraries\\CMSIS\\Include\\core_cmInstr.h"
|__asm___12_modbus_485_c_Sendlen____REV16| PROC
#line 115

 rev16 r0, r0
 bx lr
	ENDP
	AREA ||.revsh_text||, CODE, READONLY
	THUMB
	EXPORT |__asm___12_modbus_485_c_Sendlen____REVSH|
#line 128
|__asm___12_modbus_485_c_Sendlen____REVSH| PROC
#line 129

 revsh r0, r0
 bx lr
	ENDP

;*** End   embedded assembler ***
